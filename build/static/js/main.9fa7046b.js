/*! For license information please see main.9fa7046b.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var je=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){je=!0,Me=e}};function ze(e,t,n,r,i,a,o,s,u){je=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function jt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Dt.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=jt(Nt,e,t,n,r,i),!0;case"mouseover":return At=jt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,jt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,jt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},fn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var jn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Fr(e,0)}function Yn(e){if(H(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),u(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),je){if(!je)throw Error(a(198));var l=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Tr:case Cr:u=yn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Gn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Wi=0,Hi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Gi++]=Wi,qi[Gi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=$i,Hi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Wi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=jc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=jc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=jc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Wa(r,a,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Mu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){jo(t)&&Mo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Au.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Wu=r),hs(0,t)},n}function vs(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ou,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ou,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ou,Pu),Pu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ou,Pu),Pu|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Cs(e,t,n,r,i){if(Ri(n)){var a=!0;ji(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gs(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Aa||Ba(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Di(t,u=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ga(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ks(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ds(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ps,Os,Ls,js={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=jc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=js,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=jc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=js,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=$i,Hi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=jc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=js,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Hs(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ps(e,t),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),Ps(e,t),null===e&&Br(t.stateNode.containerInfo),Hs(t),null;case 10:return xa(t.type._context),Hs(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*$e()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!$s&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,du(e,t,n),$s=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=$e())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||f,mu(t,e),$s=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Zs=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Js;var c=$s;if(Js=o,($s=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Zs=u):_u(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Js=s,$s=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$s||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Iu,Eu=Math.ceil,Su=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Nu=0,Au=null,Du=null,Ru=0,Pu=0,Ou=Ii(0),Lu=0,ju=null,Mu=0,Fu=0,Uu=0,Vu=null,zu=null,Bu=0,qu=1/0,Gu=null,Ku=!1,Wu=null,Hu=null,Qu=!1,Yu=null,Ju=0,$u=0,Xu=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?$e():-1!==Zu?Zu:Zu=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Ru?Ru&-Ru:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$u)throw $u=0,Xu=null,Error(a(185));yt(e,n,r),0!==(2&Nu)&&e===Au||(e===Au&&(0===(2&Nu)&&(Fu|=n),4===Lu&&uc(e,Ru)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=$e()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Au===e&&Ru===t||(Gu=null,qu=$e()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Su.current=o,Nu=i,null!==Du?t=0:(Au=null,Ru=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=ju,dc(e,0),uc(e,r),ic(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=ju,dc(e,0),uc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zu,Gu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zu,Gu),t);break}xc(e,zu,Gu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zu,Gu),r);break}xc(e,zu,Gu);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=ju,dc(e,0),uc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zu,Gu),ic(e,$e()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=$e()+500,Ui&&Bi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&_c();var t=Nu;Nu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Nu=t))&&Bi()}}function hc(){Pu=Ou.current,Ei(Ou)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Du=e=Oc(e.current,null),Ru=Pu=t,Lu=0,ju=null,Uu=Fu=Mu=0,zu=Vu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Du;try{if(wa(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,ju=t,Du=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Au||0===(268435455&Mu)&&0===(268435455&Fu)||uc(Au,Ru)}function yc(e,t){var n=Nu;Nu|=2;var r=vc();for(Au===e&&Ru===t||(Gu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Su.current=r,null!==Du)throw Error(a(261));return Au=null,Ru=0,Lu}function gc(){for(;null!==Du;)bc(Du)}function kc(){for(;null!==Du&&!Ye();)bc(Du)}function bc(e){var t=Iu(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?wc(e):Du=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Pu)))return void(Du=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Lu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Lu&&(Lu=5)}function xc(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Du=Au=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Je(),Nu=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Ju=i),o=e.pendingLanes,0===o&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Wu,Wu=null,e;0!==(1&Ju)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xu?$u++:($u=0,Xu=e):$u=0,Bi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function _c(){if(null!==Yu){var e=bt(Ju),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Ju=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ru&n)===n&&(4===Lu||3===Lu&&(130023424&Ru)===Ru&&500>$e()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return jc(n.children,i,o,t);case I:s=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case C:s=11;break e;case D:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&ji(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Si(so,1&so.current),null!==(e=Ks(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ks(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ds(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ks(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ks(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_s(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Ri(r)?(e=!0,ji(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Kc(o);s.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Nu)&&(qu=$e()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){y(A,0)};function P(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".c98bf17e.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="urbanapp:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkurbanapp=self.webpackChunkurbanapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return wt},SDK_VERSION:function(){return An},_DEFAULT_ENTRY_NAME:function(){return yn},_addComponent:function(){return wn},_addOrOverwriteComponent:function(){return xn},_apps:function(){return kn},_clearComponents:function(){return Sn},_components:function(){return bn},_getProvider:function(){return In},_registerComponent:function(){return _n},_removeServiceInstance:function(){return En},deleteApp:function(){return On},getApp:function(){return Rn},getApps:function(){return Pn},initializeApp:function(){return Dn},onLog:function(){return Mn},registerVersion:function(){return jn},setLogLevel:function(){return Fn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||s(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function w(e,t,n){return w=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},w.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},x(e)}function _(e){if(Array.isArray(e))return e}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return _(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||I()}function S(e){return _(e)||s(e)||u(e)||I()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var N,A="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function j(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:L(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(A,v),h=e,function(){s.removeEventListener(A,v),h=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?j(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],$(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ne([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,c(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,c(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var z=/^:\w+$/,B=3,q=2,G=1,K=10,W=-2,H=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=W),t&&(r+=q),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(z.test(t)?B:""===t?G:K)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=J({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function J(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=E(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function $(e){try{return decodeURI(e)}catch(t){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=j(e):(D(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?j(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ie(a),hash:ae(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(x(Error));function se(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],ce=(new Set(ue),["get"].concat(ue));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function ge(){return null!=r.useContext(ve)}function ke(){return ge()||D(!1),r.useContext(ve).location}function be(e){r.useContext(pe).static||r.useLayoutEffect(e)}function we(){return r.useContext(me).isDataRoute?function(){var e=De(Ee.UseNavigateStable).router,t=Pe(Se.UseNavigateStable),n=r.useRef(!1);be((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){ge()||D(!1);var e=r.useContext(fe),t=r.useContext(pe),n=t.basename,i=t.navigator,a=r.useContext(me).matches,o=ke().pathname,s=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);return be((function(){u.current=!0})),r.useCallback((function(t,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof t){var a=te(t,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,s,o,e])}()}function xe(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function _e(e,n,i){ge()||D(!1);var a,o=r.useContext(pe).navigator,s=r.useContext(me).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),f=(u&&u.route,ke());if(n){var h,d="string"===typeof n?j(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||D(!1),a=d}else a=f;var p=a.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ae(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,i);return n&&m?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Ie(){var e=function(){var e,t=r.useContext(ye),n=Re(Se.UseRouteError),i=Pe(Se.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ee,Se,Te=r.createElement(Ie,null),Ce=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return p(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(me.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ne(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(me.Provider,{value:t},i)}function Ae(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,s=null==(i=n)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||D(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Te);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=u?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ne,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ce,{location:n.location,revalidation:n.revalidation,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function De(e){var t=r.useContext(fe);return t||D(!1),t}function Re(e){var t=r.useContext(he);return t||D(!1),t}function Pe(e){var t=function(e){var t=r.useContext(me);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ee||(Ee={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Se||(Se={}));var Oe;i.startTransition;function Le(e){D(!1)}function je(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;ge()&&D(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof s&&(s=j(s));var v=s,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,I=v.key,E=void 0===I?"default":I,S=r.useMemo((function(){var e=X(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:_,key:E},navigationType:c}}),[d,y,k,w,_,E,c]);return null==S?null:r.createElement(pe.Provider,{value:p},r.createElement(ve.Provider,{children:o,value:S}))}function Me(e){var t=e.children,n=e.location;return _e(Ue(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Oe||(Oe={}));var Fe=new Promise((function(){}));r.Component;function Ue(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(c(t),[i]);if(e.type!==r.Fragment){e.type!==Le&&D(!1),e.props.index&&e.props.children&&D(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ue(e.props.children,a)),n.push(o)}else n.push.apply(n,Ue(e.props.children,a))}})),n}function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ve.apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var qe=i.startTransition;function Ge(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,s=r.useRef();null==s.current&&(s.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),M((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var u=s.current,c=E(r.useState({action:u.action,location:u.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=r.useCallback((function(e){h&&qe?qe((function(){return f(e)})):f(e)}),[f,h]);return r.useLayoutEffect((function(){return u.listen(d)}),[u,d]),r.createElement(je,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:u})}var Ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,We=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=ze(e,Be),d=r.useContext(pe).basename,p=!1;if("string"===typeof l&&We.test(l)&&(n=l,Ke))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=X(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,t){var n=(void 0===t?{}:t).relative;ge()||D(!1);var i=r.useContext(pe),a=i.basename,o=i.navigator,s=xe(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:ne([a,c])),o.createHref({pathname:f,search:l,hash:u})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=we(),l=ke(),f=xe(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,e,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:f,relative:a});return r.createElement("a",Ve({},h,{href:n||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var Qe,Ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Qe||(Qe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ye||(Ye={}));var Je=n(184),$e=function(){var e=E((0,r.useState)(""),2),t=e[0],n=e[1],i=we();function a(){document.getElementById("myTopnav").classList.toggle("show")}return(0,Je.jsx)("nav",{children:(0,Je.jsxs)("div",{className:"navbar-container",children:[(0,Je.jsxs)("div",{className:"navbar-logo",style:{fontSize:"1.5rem",color:"floralwhite",cursor:"pointer"},children:["Skopje",(0,Je.jsx)("strong",{children:"Urban"})]}),(0,Je.jsxs)("ul",{className:"navbar-links topnav",id:"myTopnav",children:[(0,Je.jsx)("li",{onClick:a,children:(0,Je.jsx)(He,{to:"/",children:"Home"})}),(0,Je.jsx)("li",{onClick:a,children:(0,Je.jsx)(He,{to:"/Explore",children:"Explore"})}),(0,Je.jsx)("li",{onClick:a,children:(0,Je.jsx)(He,{to:"/Events",children:"Events"})}),(0,Je.jsx)("div",{className:"navbar-search",children:(0,Je.jsxs)("div",{className:"search-input-container",children:[(0,Je.jsx)("form",{onSubmit:function(e){e.preventDefault(),i("/search?eventType=".concat(t)),n("")},children:(0,Je.jsx)("input",{type:"text",placeholder:"Search events...",onChange:function(e){return n(e.target.value)},value:t})}),(0,Je.jsxs)("button",{className:"searchButton",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black"},children:"search"})]})]})}),(0,Je.jsx)("li",{onClick:a,children:(0,Je.jsx)(He,{to:"/LogIn",children:"Log In"})}),(0,Je.jsx)("li",{onClick:a,children:(0,Je.jsx)(He,{to:"/SignUp",children:"Sign Up"})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)(He,{to:"/Account",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.2rem",color:"#D9D9D9"},children:"account_circle"})]})})]}),(0,Je.jsx)("input",{type:"checkbox",id:"checkbox"}),(0,Je.jsxs)("label",{htmlFor:"checkbox",className:"toggle",onClick:a,children:[(0,Je.jsx)("div",{className:"bars",id:"bar1"}),(0,Je.jsx)("div",{className:"bars",id:"bar2"}),(0,Je.jsx)("div",{className:"bars",id:"bar3"})]})]})})},Xe=function(){return(0,Je.jsxs)("div",{className:"intro-container",children:[(0,Je.jsx)("p",{className:"intro-heading",style:{fontFamily:"franchise",fontSize:"90px",color:"black"},children:"Welcome to SkopjeUrban"}),(0,Je.jsxs)("div",{className:"intro-text",children:[(0,Je.jsx)("p",{children:(0,Je.jsx)("em",{children:"Unlock the City's Hidden Treasures"})}),(0,Je.jsx)("p",{children:"This is SkopjeUrban, your ultimate companion for exploring the heartbeat of the capital city. Whether you're a curious traveler or a seasoned local, SkopjeUrban is your ticket to unlocking the true essence of urban living."})]}),(0,Je.jsx)("div",{className:"homeImage"}),(0,Je.jsxs)("div",{className:"intro-text",children:[(0,Je.jsx)("h2",{children:"Why Choose SkopjeUrban?"}),(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("strong",{children:"Discover the Unseen:"})," We believe that every city has its secrets waiting to be revealed. SkopjeUrban is here to guide you off the beaten path, uncovering the hidden gems that make each city unique."]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("strong",{children:"Live Like a Local:"})," Immerse yourself in the local culture and lifestyle. From trendy cafes to underground art scenes, SkopjeUrban gives you insider access to the experiences that locals cherish."]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("strong",{children:"Real-Time Exploration:"})," Say goodbye to outdated guides. With SkopjeUrban, you get real-time updates on events, happenings, and the latest hotspots, ensuring you never miss a beat."]})]}),(0,Je.jsx)("p",{style:{marginTop:"100px",fontSize:"2.2rem"},children:(0,Je.jsx)("strong",{children:"EXPLORE THE CITY"})}),(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsxs)(He,{to:"/Explore",children:[(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3rem",color:"black",marginLeft:"-10px",marginTop:"-20px"},children:"explore"})," "]}),(0,Je.jsx)("h2",{style:{marginTop:"100px"},children:"Get started with us"}),(0,Je.jsxs)("div",{className:"cta-buttons",children:[(0,Je.jsx)("button",{className:"signup-button",children:(0,Je.jsx)(He,{style:{textDecoration:"none",color:"floralwhite "},to:"/SignUp",children:"Sign Up"})}),(0,Je.jsx)("button",{className:"download-button",children:"Download App"})]})]}),(0,Je.jsx)("compnenet",{})]})};function Ze(){Ze=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new S(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function et(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function it(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){rt(a,r,i,o,s,"next",e)}function s(e){rt(a,r,i,o,s,"throw",e)}o(void 0)}))}}var at=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ot={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(at(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new st;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},st=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return p(n)}(x(Error)),ut=function(e){return function(e){var t=at(e);return ot.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ct=function(e){try{return ot.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=lt(e[n],t[n]));return e}var ft=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ht=function(){try{return ft()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ct(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},dt=function(){var e;return null===(e=ht())||void 0===e?void 0:e.config},pt=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function vt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function mt(){var e,t=null===(e=ht())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function yt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function gt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function kt(){var e=vt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function bt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var wt=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),xt.prototype.create),a}return p(n)}(x(Error)),xt=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(_t,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new wt(n,a,t)}}]),e}();var _t=/\{\$([^}]+)}/g;function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Et(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function St(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Tt(s)&&Tt(u)){if(!St(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Tt(e){return null!==e&&"object"===typeof e}function Ct(e){for(var t=[],n=function(){var e=E(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Nt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=E(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function At(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Dt(e,t){var n=new Rt(e,t);return n.subscribe.bind(n)}var Rt=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Pt),void 0===r.error&&(r.error=Pt),void 0===r.complete&&(r.complete=Pt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Pt(){}function Ot(e){return e&&e._delegate?e._delegate:e}var Lt=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),jt="[DEFAULT]",Mt=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new pt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jt})}catch(u){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=E(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(c(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),c(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=E(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===jt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.component?this.component.multipleInstances?e:jt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ft,Ut,Vt=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Mt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),zt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ut||(Ut={}));var Bt={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},qt=Ut.INFO,Gt=(et(Ft={},Ut.DEBUG,"log"),et(Ft,Ut.VERBOSE,"log"),et(Ft,Ut.INFO,"info"),et(Ft,Ut.WARN,"warn"),et(Ft,Ut.ERROR,"error"),Ft),Kt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wt=function(){function e(t){l(this,e),this.name=t,this._logLevel=qt,this._logHandler=Kt,this._userLogHandler=null,zt.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ut))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Bt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ut.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ut.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ut.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ut.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ut.INFO].concat(t)),this._logHandler.apply(this,[this,Ut.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ut.WARN].concat(t)),this._logHandler.apply(this,[this,Ut.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ut.ERROR].concat(t)),this._logHandler.apply(this,[this,Ut.ERROR].concat(t))}}]),e}();var Ht,Qt,Yt=function(e,t){return t.some((function(t){return e instanceof t}))};var Jt=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,en=new WeakMap;var tn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function nn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(on(this),n),an(Jt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return an(e.apply(on(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[on(this),t].concat(r));return Xt.set(a,t.sort?t.sort():[t]),an(a)}}function rn(e){return"function"===typeof e?nn(e):(e instanceof IDBTransaction&&function(e){if(!$t.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));$t.set(e,t)}}(e),Yt(e,Ht||(Ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,tn):e)}function an(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(an(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Jt.set(t,e)})).catch((function(){})),en.set(t,e),t}(e);if(Zt.has(e))return Zt.get(e);var t=rn(e);return t!==e&&(Zt.set(e,t),en.set(t,e)),t}var on=function(e){return en.get(e)};var sn,un,cn=["get","getKey","getAll","getAllKeys","count"],ln=["put","add","delete","clear"],fn=new Map;function hn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(fn.get(t))return fn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ln.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||cn.includes(n))){var a=function(){var e=it(Ze().mark((function e(t){var a,o,s,u,c,l,f=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return fn.set(t,a),a}}}tn=function(e){return nt(nt({},e),{},{get:function(t,n,r){return hn(t,n)||e.get(t,n,r)},has:function(t,n){return!!hn(t,n)||e.has(t,n)}})}(tn);var dn=function(){function e(t){l(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var pn="@firebase/app",vn="0.9.15",mn=new Wt("@firebase/app"),yn="[DEFAULT]",gn=(et(sn={},pn,"fire-core"),et(sn,"@firebase/app-compat","fire-core-compat"),et(sn,"@firebase/analytics","fire-analytics"),et(sn,"@firebase/analytics-compat","fire-analytics-compat"),et(sn,"@firebase/app-check","fire-app-check"),et(sn,"@firebase/app-check-compat","fire-app-check-compat"),et(sn,"@firebase/auth","fire-auth"),et(sn,"@firebase/auth-compat","fire-auth-compat"),et(sn,"@firebase/database","fire-rtdb"),et(sn,"@firebase/database-compat","fire-rtdb-compat"),et(sn,"@firebase/functions","fire-fn"),et(sn,"@firebase/functions-compat","fire-fn-compat"),et(sn,"@firebase/installations","fire-iid"),et(sn,"@firebase/installations-compat","fire-iid-compat"),et(sn,"@firebase/messaging","fire-fcm"),et(sn,"@firebase/messaging-compat","fire-fcm-compat"),et(sn,"@firebase/performance","fire-perf"),et(sn,"@firebase/performance-compat","fire-perf-compat"),et(sn,"@firebase/remote-config","fire-rc"),et(sn,"@firebase/remote-config-compat","fire-rc-compat"),et(sn,"@firebase/storage","fire-gcs"),et(sn,"@firebase/storage-compat","fire-gcs-compat"),et(sn,"@firebase/firestore","fire-fst"),et(sn,"@firebase/firestore-compat","fire-fst-compat"),et(sn,"fire-js","fire-js"),et(sn,"firebase","fire-js-all"),sn),kn=new Map,bn=new Map;function wn(e,t){try{e.container.addComponent(t)}catch(n){mn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function xn(e,t){e.container.addOrOverwriteComponent(t)}function _n(e){var t=e.name;if(bn.has(t))return mn.debug("There were multiple attempts to register component ".concat(t,".")),!1;bn.set(t,e);var n,r=T(kn.values());try{for(r.s();!(n=r.n()).done;){wn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function In(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function En(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yn;In(e,t).clearInstance(n)}function Sn(){bn.clear()}var Tn=(et(un={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),et(un,"bad-app-name","Illegal App name: '{$appName}"),et(un,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),et(un,"app-deleted","Firebase App named '{$appName}' already deleted"),et(un,"no-options","Need to provide options, when not being deployed to hosting via source."),et(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),et(un,"invalid-log-argument","First argument to `onLog` must be null or a function."),et(un,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),et(un,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),et(un,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),et(un,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),un),Cn=new xt("app","Firebase",Tn),Nn=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lt("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}]),e}(),An="10.1.0";function Dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:yn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=dt()),!n)throw Cn.create("no-options");var a=kn.get(i);if(a){if(St(n,a.options)&&St(r,a.config))return a;throw Cn.create("duplicate-app",{appName:i})}var o,s=new Vt(i),u=T(bn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new Nn(n,r,s);return kn.set(i,l),l}function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=kn.get(e);if(!t&&e===yn&&dt())return Dn();if(!t)throw Cn.create("no-app",{appName:e});return t}function Pn(){return Array.from(kn.values())}function On(e){return Ln.apply(this,arguments)}function Ln(){return Ln=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kn.has(n)){e.next=6;break}return kn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function jn(e,t,n){var r,i=null!==(r=gn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void mn.warn(s.join(" "))}_n(new Lt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Mn(e,t){if(null!==e&&"function"!==typeof e)throw Cn.create("invalid-log-argument");!function(e,t){var n,r=T(zt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Bt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ut[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Fn(e){var t;t=e,zt.forEach((function(e){e.setLogLevel(t)}))}var Un="firebase-heartbeat-database",Vn=1,zn="firebase-heartbeat-store",Bn=null;function qn(){return Bn||(Bn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=an(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(an(s.result),e.oldVersion,e.newVersion,an(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Un,Vn,{upgrade:function(e,t){if(0===t)e.createObjectStore(zn)}}).catch((function(e){throw Cn.create("idb-open",{originalErrorMessage:e.message})}))),Bn}function Gn(e){return Kn.apply(this,arguments)}function Kn(){return Kn=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn();case 3:return n=e.sent,e.next=6,n.transaction(zn).objectStore(zn).get(Qn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof wt?mn.warn(e.t0.message):(i=Cn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),mn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Kn.apply(this,arguments)}function Wn(e,t){return Hn.apply(this,arguments)}function Hn(){return Hn=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn();case 3:return r=e.sent,i=r.transaction(zn,"readwrite"),a=i.objectStore(zn),e.next=8,a.put(n,Qn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof wt?mn.warn(e.t0.message):(o=Cn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),mn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Hn.apply(this,arguments)}function Qn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Yn=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new er(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=it(Ze().mark((function e(){var t,n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Jn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Jn(),n=$n(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ut(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Jn(){return(new Date).toISOString().substring(0,10)}function $n(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),tr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),tr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xn,Zn,er=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Gn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Wn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Wn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(c(r.heartbeats),c(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function tr(e){return ut(JSON.stringify({version:2,heartbeats:e})).length}Xn="",_n(new Lt("platform-logger",(function(e){return new dn(e)}),"PRIVATE")),_n(new Lt("heartbeat",(function(e){return new Yn(e)}),"PRIVATE")),jn(pn,vn,Xn),jn(pn,vn,"esm2017"),jn("fire-js","");var nr=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,wn(t,new Lt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),On(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){xn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),rr=(et(Zn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),et(Zn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Zn),ir=new xt("app-compat","Firebase",rr);var ar=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Dn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(It(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:jn,setLogLevel:Fn,onLog:Mn,apps:null,SDK_VERSION:An,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(_n(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ir.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&lt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!It(n,e=e||yn))throw ir.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(nr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){lt(n,e)},createSubscribe:Dt,ErrorFactory:xt,deepExtend:lt}),n}(),or=new Wt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){or.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var sr=self.firebase.SDK_VERSION;sr&&sr.indexOf("LITE")>=0&&or.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ur=ar;!function(e){jn("@firebase/app-compat","0.2.15",e)}();function cr(){return cr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},cr.apply(this,arguments)}ur.registerVersion("firebase","10.1.0","app-compat");function lr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var fr,hr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},dr="EMAIL_SIGNIN",pr="PASSWORD_RESET",vr="RECOVER_EMAIL",mr="REVERT_SECOND_FACTOR_ADDITION",yr="VERIFY_AND_CHANGE_EMAIL",gr="VERIFY_EMAIL";function kr(){return et({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var br=function(){var e;return et(e={},"admin-restricted-operation","This operation is restricted to administrators only."),et(e,"argument-error",""),et(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),et(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),et(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),et(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),et(e,"cordova-not-ready","Cordova framework is not ready."),et(e,"cors-unsupported","This browser is not supported."),et(e,"credential-already-in-use","This credential is already associated with a different user account."),et(e,"custom-token-mismatch","The custom token corresponds to a different audience."),et(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),et(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),et(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),et(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),et(e,"email-already-in-use","The email address is already in use by another account."),et(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),et(e,"expired-action-code","The action code has expired."),et(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),et(e,"internal-error","An internal AuthError has occurred."),et(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),et(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),et(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),et(e,"invalid-auth-event","An internal AuthError has occurred."),et(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),et(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),et(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),et(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),et(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),et(e,"invalid-email","The email address is badly formatted."),et(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),et(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),et(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),et(e,"invalid-credential","The supplied auth credential is malformed or has expired."),et(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),et(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),et(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),et(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),et(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),et(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),et(e,"wrong-password","The password is invalid or the user does not have a password."),et(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),et(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),et(e,"invalid-provider-id","The specified provider ID is invalid."),et(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),et(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),et(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),et(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),et(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),et(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),et(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),et(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),et(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),et(e,"missing-continue-uri","A continue URL must be provided in the request."),et(e,"missing-iframe-start","An internal AuthError has occurred."),et(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),et(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),et(e,"missing-password","A non-empty password must be provided"),et(e,"missing-multi-factor-info","No second factor identifier is provided."),et(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),et(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),et(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),et(e,"app-deleted","This instance of FirebaseApp has been deleted."),et(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),et(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),et(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),et(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),et(e,"no-auth-event","An internal AuthError has occurred."),et(e,"no-such-provider","User was not linked to an account with the given provider."),et(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),et(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),et(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),et(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),et(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),et(e,"provider-already-linked","User can only be linked to one identity for the given provider."),et(e,"quota-exceeded","The project's quota for this operation has been exceeded."),et(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),et(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),et(e,"rejected-credential","The request contains malformed or mismatching credentials."),et(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),et(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),et(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),et(e,"timeout","The operation has timed out."),et(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),et(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),et(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),et(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),et(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),et(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),et(e,"unverified-email","The operation requires a verified email."),et(e,"user-cancelled","The user did not grant your application the permissions it requested."),et(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),et(e,"user-disabled","The user account has been disabled by an administrator."),et(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),et(e,"user-signed-out",""),et(e,"weak-password","The password must be 6 characters long or more."),et(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),et(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),et(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),et(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),et(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),et(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),et(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),et(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),et(e,"invalid-req-type","Invalid request parameters."),et(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},wr=kr,xr=new xt("auth","Firebase",kr()),_r=new Wt("@firebase/auth");function Ir(e){if(_r.logLevel<=Ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_r.warn.apply(_r,["Auth (".concat(An,"): ").concat(e)].concat(n))}}function Er(e){if(_r.logLevel<=Ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_r.error.apply(_r,["Auth (".concat(An,"): ").concat(e)].concat(n))}}function Sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ar.apply(void 0,[e].concat(n))}function Tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ar.apply(void 0,[e].concat(n))}function Cr(e,t,n){var r=Object.assign(Object.assign({},wr()),et({},t,n));return new xt("auth","Firebase",r).create(t,{appName:e.name})}function Nr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Sr(e,"argument-error"),Cr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=c(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(c(o)))}return xr.create.apply(xr,[e].concat(n))}function Dr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ar.apply(void 0,[t].concat(r))}}function Rr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Er(t),new Error(t)}function Pr(e,t){e||Rr(t)}function Or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Lr(){return"http:"===jr()||"https:"===jr()}function jr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Mr=function(){function e(t,n){l(this,e),this.shortDelay=t,this.longDelay=n,Pr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())||gt()}return p(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Lr()||yt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Fr(e,t){Pr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ur=function(){function e(){l(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Vr=(et(fr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),et(fr,"MISSING_CUSTOM_TOKEN","internal-error"),et(fr,"INVALID_IDENTIFIER","invalid-email"),et(fr,"MISSING_CONTINUE_URI","internal-error"),et(fr,"INVALID_PASSWORD","wrong-password"),et(fr,"MISSING_PASSWORD","missing-password"),et(fr,"EMAIL_EXISTS","email-already-in-use"),et(fr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),et(fr,"INVALID_IDP_RESPONSE","invalid-credential"),et(fr,"INVALID_PENDING_TOKEN","invalid-credential"),et(fr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),et(fr,"MISSING_REQ_TYPE","internal-error"),et(fr,"EMAIL_NOT_FOUND","user-not-found"),et(fr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),et(fr,"EXPIRED_OOB_CODE","expired-action-code"),et(fr,"INVALID_OOB_CODE","invalid-action-code"),et(fr,"MISSING_OOB_CODE","internal-error"),et(fr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),et(fr,"INVALID_ID_TOKEN","invalid-user-token"),et(fr,"TOKEN_EXPIRED","user-token-expired"),et(fr,"USER_NOT_FOUND","user-token-expired"),et(fr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),et(fr,"INVALID_CODE","invalid-verification-code"),et(fr,"INVALID_SESSION_INFO","invalid-verification-id"),et(fr,"INVALID_TEMPORARY_PROOF","invalid-credential"),et(fr,"MISSING_SESSION_INFO","missing-verification-id"),et(fr,"SESSION_EXPIRED","code-expired"),et(fr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),et(fr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),et(fr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),et(fr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),et(fr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),et(fr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),et(fr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),et(fr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),et(fr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),et(fr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),et(fr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),et(fr,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),et(fr,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),et(fr,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),et(fr,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),et(fr,"MISSING_CLIENT_TYPE","missing-client-type"),et(fr,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),et(fr,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),et(fr,"INVALID_REQ_TYPE","invalid-req-type"),fr),zr=new Mr(3e4,6e4);function Br(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function qr(e,t,n,r){return Gr.apply(this,arguments)}function Gr(){return Gr=it(Ze().mark((function e(t,n,r,i){var a,o=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Kr(t,a,it(Ze().mark((function e(){var a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ct(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ur.fetch()(Yr(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}function Kr(e,t,n){return Wr.apply(this,arguments)}function Wr(){return Wr=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Vr),n),e.prev=2,a=new Jr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw $r(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=E(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw $r(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw $r(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw $r(t,"user-disabled",s);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Cr(t,d,h);case 34:Sr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof wt)){e.next=41;break}throw e.t0;case 41:Sr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Wr.apply(this,arguments)}function Hr(e,t,n,r){return Qr.apply(this,arguments)}function Qr(){return Qr=it(Ze().mark((function e(t,n,r,i){var a,o,s=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,qr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Sr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Yr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Fr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Jr=function(){function e(t){var n=this;l(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Tr(n.auth,"network-request-failed"))}),zr.get())}))}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function $r(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Tr(e,t,r);return i.customData._tokenResponse=n,i}function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return Zr=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ai(){return ai=it(Ze().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Ot(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Dr((a=si(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ii(oi(a.auth_time)),issuedAtTime:ii(oi(a.iat)),expirationTime:ii(oi(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(e){return 1e3*Number(e)}function si(e){var t=E(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Er("JWT malformed, contained fewer than 3 sections"),null;try{var a=ct(r);return a?JSON.parse(a):(Er("Failed to decode base64 JWT payload"),null)}catch(o){return Er("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function ui(e,t){return ci.apply(this,arguments)}function ci(){return ci=it(Ze().mark((function e(t,n){var r=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof wt&&li(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ci.apply(this,arguments)}function li(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var fi=function(){function e(t){l(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),hi=function(){function e(t,n){l(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function di(e){return pi.apply(this,arguments)}function pi(){return pi=it(Ze().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ui(t,ni(r,{idToken:i}));case 6:Dr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=lr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=mi(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new hi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function vi(){return(vi=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ot(t),e.next=3,di(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(c(n),c(t))}function yi(e,t){return gi.apply(this,arguments)}function gi(){return gi=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t,{},it(Ze().mark((function e(){var r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ct({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Yr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ur.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}var ki=function(){function e(){l(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Dr(e.idToken,"internal-error"),Dr("undefined"!==typeof e.idToken,"internal-error"),Dr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=si(e);return Dr(t,"internal-error"),Dr("undefined"!==typeof t.exp,"internal-error"),Dr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=it(Ze().mark((function e(t){var n,r=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Dr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Rr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Dr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Dr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Dr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function bi(e,t){Dr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var wi=function(){function e(t){l(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=lr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?c(a.providerData):[],this.metadata=new hi(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ui(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Dr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ai.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return vi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Dr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Dr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=it(Ze().mark((function e(t){var n,r,i=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,di(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ui(this,Xr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Dr(k&&_,t,"internal-error");var I=ki.fromJSON(this.name,_);Dr("string"===typeof k,t,"internal-error"),bi(f,t.name),bi(h,t.name),Dr("boolean"===typeof b,t,"internal-error"),Dr("boolean"===typeof w,t,"internal-error"),bi(d,t.name),bi(p,t.name),bi(v,t.name),bi(m,t.name),bi(y,t.name),bi(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=it(Ze().mark((function t(n,r){var i,a,o,s=arguments;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new ki).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,di(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),xi=new Map;function _i(e){Pr(e instanceof Function,"Expected a class definition");var t=xi.get(e);return t?(Pr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xi.set(e,t),t)}var Ii=function(){function e(){l(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ii.type="NONE";var Ei=Ii;function Si(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ti=function(){function e(t,n,r){l(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Si(this.userKey,a.apiKey,o),this.fullPersistenceKey=Si("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?wi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=it(Ze().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(_i(Ei),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||_i(Ei),s=Si(i,n.config.apiKey,n.name),u=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=wi._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ci(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ri(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ni(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oi(t))return"Blackberry";if(Li(t))return"Webos";if(Ai(t))return"Safari";if((t.includes("chrome/")||Di(t))&&!t.includes("edge/"))return"Chrome";if(Pi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/firefox\//i.test(e)}function Ai(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/crios\//i.test(e)}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iemobile/i.test(e)}function Pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/android/i.test(e)}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/blackberry/i.test(e)}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/webos/i.test(e)}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return ji(e)||Pi(e)||Li(e)||Oi(e)||/windows phone/i.test(e)||Ri(e)}function Fi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ci(vt());break;case"Worker":t="".concat(Ci(vt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(An,"/").concat(r)}function Ui(e){return Vi.apply(this,arguments)}function Vi(){return Vi=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function zi(e,t){return Bi.apply(this,arguments)}function Bi(){return Bi=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"GET","/v2/recaptchaConfig",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function qi(e){return void 0!==e&&void 0!==e.getResponse}function Gi(e){return void 0!==e&&void 0!==e.enterprise}var Ki=p((function e(t){if(l(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Wi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Tr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Hi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Qi=function(){function e(t){l(this,e),this.type="recaptcha-enterprise",this.auth=Zi(t)}return p(e,[{key:"verify",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Gi(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=it(Ze().mark((function e(n,r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Ki(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Gi(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Wi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yi(e,t,n){return Ji.apply(this,arguments)}function Ji(){return Ji=it(Ze().mark((function e(t,n,r){var i,a,o,s,u=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Qi(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ji.apply(this,arguments)}var $i=function(){function e(t){l(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=it(Ze().mark((function e(t){var n,r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xi=function(){function e(t,n,r,i){l(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ea(this),this.idTokenSubscription=new ea(this),this.beforeStateQueue=new $i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(it(Ze().mark((function r(){var i,a;return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ti.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=it(Ze().mark((function e(t){var n,r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Dr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,di(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ot(t):null)&&Dr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=it(Ze().mark((function e(t){var n,r=this,i=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Dr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(it(Ze().mark((function n(){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(_i(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Ki(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Qi(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new xt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Dr(n=t&&_i(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ti.create(this,[_i(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=it(Ze().mark((function e(t){var n=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Dr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Dr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=et({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Ir("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zi(e){return Ot(e)}var ea=function(){function e(t){var n=this;l(this,e),this.auth=t,this.observer=null,this.addObserver=Dt((function(e){return n.observer=e}))}return p(e,[{key:"next",get:function(){return Dr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ta(e,t,n){var r=Zi(e);Dr(r._canInitEmulator,r,"emulator-config-failed"),Dr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=na(t),o=function(e){var t=na(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ra(r.substr(a.length+1))}}var o=E(r.split(":"),2);return{host:o[0],port:ra(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function na(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ra(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ia=function(){function e(t,n){l(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return Rr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Rr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Rr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Rr("not implemented")}}]),e}();function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:resetPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function sa(e,t){return ua.apply(this,arguments)}function ua(){return ua=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:sendOobCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return ma=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return xa=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function _a(e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}var Ta=function(e){m(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Yi(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",fa(t,i));case 11:return e.abrupt("return",fa(t,r).catch(function(){var e=it(Ze().mark((function e(n){var i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Yi(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",fa(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",_a(t,{email:this._email,oobCode:this._password}));case 13:Sr(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",sa(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ea(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Sr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ia);function Ca(e,t){return Na.apply(this,arguments)}function Na(){return Na=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithIdp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}var Aa=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ct(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=lr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ia);function Da(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:sendVerificationCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Pa(){return Pa=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Oa(){return Oa=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw $r(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}var La=et({},"USER_NOT_FOUND","user-not-found");function ja(){return ja=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,r),La));case 2:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}var Ma=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Pa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Oa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ja.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ia);var Fa=function(){function e(t){var n,r,i,a,o,s;l(this,e);var u=Nt(At(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,f=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Dr(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Nt(At(e)).link,n=t?Nt(At(t)).deep_link_id:null,r=Nt(At(e)).deep_link_id;return(r?Nt(At(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ua=function(){function e(){l(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return Ta._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Fa.parseLink(t);return Dr(n,"argument-error"),Ta._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ua.PROVIDER_ID="password",Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Va=function(){function e(t){l(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),za=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return c(this.scopes)}}]),n}(Va),Ba=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Dr(e.idToken||e.accessToken,"argument-error"),Aa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Dr("providerId"in t&&"signInMethod"in t,"argument-error"),Aa._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(za),qa=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(za);qa.FACEBOOK_SIGN_IN_METHOD="facebook.com",qa.PROVIDER_ID="facebook.com";var Ga=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(za);Ga.GOOGLE_SIGN_IN_METHOD="google.com",Ga.PROVIDER_ID="google.com";var Ka=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(za);Ka.GITHUB_SIGN_IN_METHOD="github.com",Ka.PROVIDER_ID="github.com";var Wa=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ia),Ha=function(e){m(n,e);var t=b(n);function n(e){return l(this,n),Dr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Wa.fromJSON(e);return Dr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Wa._create(r,n)}catch(i){return null}}}]),n}(Va),Qa=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(za);function Ya(e,t){return Ja.apply(this,arguments)}function Ja(){return Ja=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signUp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}Qa.TWITTER_SIGN_IN_METHOD="twitter.com",Qa.PROVIDER_ID="twitter.com";var $a=function(){function e(t){l(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=it(Ze().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,wi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Xa(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=it(Ze().mark((function t(n,r,i){var a;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Xa(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Xa(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Za(){return Za=it(Ze().mark((function e(t){var n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new $a({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ya(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,$a._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}var eo=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o,s;return l(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(wt);function to(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw eo._fromErrorAndOperation(e,n,t,r);throw n}))}function no(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ro(e,t){return io.apply(this,arguments)}function io(){return io=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ot(t),e.next=3,so(!0,r,n);case 3:return e.t0=ei,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=no(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),io.apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return oo=it(Ze().mark((function e(t,n){var r,i,a=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ui,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",$a._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function so(e,t,n){return uo.apply(this,arguments)}function uo(){return(uo=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di(n);case 2:i=no(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Dr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e,t){return lo.apply(this,arguments)}function lo(){return lo=it(Ze().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ui(t,to(i,a,n,t),r);case 6:return Dr((o=e.sent).idToken,i,"internal-error"),Dr(s=si(o.idToken),i,"internal-error"),u=s.sub,Dr(t.uid===u,i,"user-mismatch"),e.abrupt("return",$a._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Sr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=it(Ze().mark((function e(t,n){var r,i,a,o,s=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,to(t,i,n);case 4:return a=e.sent,e.next=7,$a._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fo(Zi(t),n));case 1:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ot(t),e.next=3,so(!1,r,n.providerId);case 3:return e.abrupt("return",ao(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",co(Ot(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t){return wo.apply(this,arguments)}function wo(){return wo=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithCustomToken",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function xo(){return xo=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zi(t),e.next=3,bo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,$a._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}var _o=function(){function e(t,n){l(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Io._fromServerResponse(e,t):"totpInfo"in t?Eo._fromServerResponse(e,t):Sr(e,"internal-error")}}]),e}(),Io=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_o),Eo=function(e){m(n,e);var t=b(n);function n(e){return l(this,n),t.call(this,"totp",e)}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_o);function So(e,t,n){var r;Dr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Dr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Dr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Dr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function To(){return To=it(Ze().mark((function e(t,n,r){var i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Zi(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Yi(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&So(a,s,r),e.next=9,ya(a,s);case 9:e.next=14;break;case 11:return r&&So(a,o,r),e.next=14,ya(a,o).catch(function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Yi(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&So(a,n,r),e.next=8,ya(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(){return Co=it(Ze().mark((function e(t,n,r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa(Ot(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(){return No=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(Ot(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(e,t){return Do.apply(this,arguments)}function Do(){return Do=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ot(t),e.next=3,aa(r,{oobCode:n});case 3:i=e.sent,Dr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Dr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Dr(i.mfaInfo,r,"internal-error");case 13:Dr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_o._fromServerResponse(Zi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Ro(){return Ro=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao(Ot(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Po(e,t,n){return Oo.apply(this,arguments)}function Oo(){return Oo=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c,l;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Zi(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Yi(a,o,"signUpPassword");case 5:u=e.sent,s=Ya(a,u),e.next=10;break;case 9:s=Ya(a,o).catch(function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Yi(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Ya(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,$a._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Lo(){return Lo=it(Ze().mark((function e(t,n,r){var i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){Dr(t.handleCodeInApp,a,"argument-error"),t&&So(a,e,t)},a=Zi(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Yi(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,ka(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,ka(a,o).catch(function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Yi(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,ka(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function jo(){return jo=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ot(t),Dr((a=Ua.credentialWithLink(n,r||Or()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",po(i,a));case 4:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return Fo=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:createAuthUri",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function Uo(){return Uo=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr()?Or():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Mo(Ot(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Vo(){return(Vo=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ot(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&So(r.auth,a,n),e.next=8,va(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(){return(zo=it(Ze().mark((function e(t,n,r){var i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ot(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&So(i.auth,o,r),e.next=8,wa(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t){return qo.apply(this,arguments)}function qo(){return qo=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Go(){return(Go=it(Ze().mark((function e(t,n){var r,i,a,o,s,u,c;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ot(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ui(a,Bo(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t,n){return Wo.apply(this,arguments)}function Wo(){return Wo=it(Ze().mark((function e(t,n,r){var i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ui(t,sa(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}var Ho=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Qo=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(Ho),Yo=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(Ho),Jo=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return p(n)}(Qo),$o=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"google.com",r)}return p(n)}(Ho),Xo=function(e){m(n,e);var t=b(n);function n(e,r,i){return l(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(Qo);function Zo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=si(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ho(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Yo(a,i);case"github.com":return new Jo(a,i);case"google.com":return new $o(a,i);case"twitter.com":return new Xo(a,i,e.screenName||null);case"custom":case"anonymous":return new Ho(a,null);default:return new Ho(a,r,i)}}(n)}var es=function(){function e(t,n,r){l(this,e),this.type=t,this.credential=n,this.user=r}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:et({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ts=function(){function e(t,n,r){l(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Zi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _o._fromServerResponse(r,e)}));Dr(i.mfaPendingCredential,r,"internal-error");var o=es._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=it(Ze().mark((function e(t){var a,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,$a._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Dr(n.user,r,"internal-error"),e.abrupt("return",$a._forOperation(n.user,n.operationType,s));case 17:Sr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ns(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:start",Br(e,t))}function rs(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:start",Br(e,t))}function is(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Br(e,t))}function as(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Br(e,t))}var os=function(){function e(t){var n=this;l(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _o._fromServerResponse(t.auth,e)})))}))}return p(e,[{key:"getSession",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=es,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ui(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,ui(this.user,as(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ss=new WeakMap;var us="__sak",cs=function(){function e(t,n){l(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(us,"1"),this.storage.removeItem(us),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ls=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=vt();return Ai(e)||ji(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Mi(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);kt()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=it(Ze().mark((function e(t,r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=it(Ze().mark((function e(t){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(cs);ls.type="LOCAL";var fs=ls,hs=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(cs);hs.type="SESSION";var ds=hs;function ps(e){return Promise.all(e.map(function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var vs=function(){function e(t){l(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=it(Ze().mark((function e(t){var n,r,i,a,o,s,u,c;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ps(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ms(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}vs.receivers=[];var ys=function(){function e(t){l(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=it(Ze().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=ms("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function gs(){return window}function ks(e){gs().location.href=e}function bs(){return"undefined"!==typeof gs().WorkerGlobalScope&&"function"===typeof gs().importScripts}function ws(){return xs.apply(this,arguments)}function xs(){return(xs=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function _s(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Is="firebaseLocalStorageDb",Es="firebaseLocalStorage",Ss="fbase_key",Ts=function(){function e(t){l(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Cs(e,t){return e.transaction([Es],t?"readwrite":"readonly").objectStore(Es)}function Ns(){var e=indexedDB.deleteDatabase(Is);return new Ts(e).toPromise()}function As(){var e=indexedDB.open(Is,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Es,{keyPath:Ss})}catch(r){n(r)}})),e.addEventListener("success",it(Ze().mark((function n(){var r;return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Es)){n.next=12;break}return r.close(),n.next=5,Ns();case 5:return n.t0=t,n.next=8,As();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ds(e,t,n){return Rs.apply(this,arguments)}function Rs(){return Rs=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Cs(t,!0).put((et(i={},Ss,n),et(i,"value",r),i)),e.abrupt("return",new Ts(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ps(e,t){return Os.apply(this,arguments)}function Os(){return Os=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs(t,!1).get(n),e.next=3,new Ts(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ls(e,t){var n=Cs(e,!0).delete(t);return new Ts(n).toPromise()}var js=function(){function e(){l(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return p(e,[{key:"_openDb",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,As();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=it(Ze().mark((function e(){var t=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=vs._getInstance(bs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=it(Ze().mark((function e(n,r){var i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=it(Ze().mark((function e(){var t,n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ws();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ys(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&_s()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,As();case 5:return t=e.sent,e.next=8,Ds(t,us,"1");case 8:return e.next=10,Ls(t,us);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=it(Ze().mark((function e(t,n){var r=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ds(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ps(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=it(Ze().mark((function e(t){var n=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ls(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Cs(e,!1).getAll();return new Ts(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();js.type="LOCAL";var Ms=js;function Fs(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:start",Br(e,t))}function Us(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:finalize",Br(e,t))}var Vs=1e12,zs=function(){function e(t){l(this,e),this.auth=t,this.counter=Vs,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Bs(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Vs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Vs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Vs,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Bs=function(){function e(t,n,r){var i=this;l(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Dr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var qs=Hi("rcb"),Gs=new Mr(3e4,6e4),Ks=function(){function e(){var t;l(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=gs().grecaptcha)||void 0===t?void 0:t.render)}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Dr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&qi(gs().grecaptcha)?Promise.resolve(gs().grecaptcha):new Promise((function(r,i){var a=gs().setTimeout((function(){i(Tr(e,"network-request-failed"))}),Gs.get());gs()[qs]=function(){gs().clearTimeout(a),delete gs()[qs];var o=gs().grecaptcha;if(o&&qi(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Tr(e,"internal-error"))},Wi("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ct({onload:qs,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Tr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=gs().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Ws=function(){function e(){l(this,e)}return p(e,[{key:"load",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new zs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Hs="recaptcha",Qs={theme:"light",type:"image"},Ys=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Qs);l(this,e),this.parameters=r,this.type=Hs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zi(t),this.isInvisible="invisible"===this.parameters.size,Dr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;Dr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ws:new Ks,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Dr(!this.parameters.sitekey,this.auth,"argument-error"),Dr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Dr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=gs()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Dr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr(Lr()&&!bs(),this.auth,"internal-error"),e.next=3,Js();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ui(this.auth);case 8:Dr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Dr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Js(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var $s=function(){function e(t,n){l(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=Ma._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Xs(){return Xs=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zi(t),e.next=3,nu(i,n,Ot(r));case 3:return a=e.sent,e.abrupt("return",new $s(a,(function(e){return po(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}function Zs(e,t,n){return eu.apply(this,arguments)}function eu(){return(eu=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ot(t),e.next=3,so(!1,i,"phone");case 3:return e.next=5,nu(i.auth,n,Ot(r));case 5:return a=e.sent,e.abrupt("return",new $s(a,(function(e){return mo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(){return(tu=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ot(t),e.next=3,nu(i.auth,n,Ot(r));case 3:return a=e.sent,e.abrupt("return",new $s(a,(function(e){return go(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e,t,n){return ru.apply(this,arguments)}function ru(){return ru=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Dr("string"===typeof a,t,"argument-error"),Dr(r.type===Hs,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Dr("enroll"===s.type,t,"internal-error"),e.next=13,ns(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Dr("signin"===s.type,t,"internal-error"),Dr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Fs(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Da(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ru.apply(this,arguments)}function iu(){return(iu=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ao(Ot(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var au=function(){function e(t){l(this,e),this.providerId=e.PROVIDER_ID,this.auth=Zi(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return nu(this.auth,e,Ot(t))}}],[{key:"credential",value:function(e,t){return Ma._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ma._fromTokenResponse(n,r):null}}]),e}();function ou(e,t){return t?_i(t):(Dr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}au.PROVIDER_ID="phone",au.PHONE_SIGN_IN_METHOD="phone";var su=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ca(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ia);function uu(e){return fo(e.auth,new su(e),e.bypassAuthState)}function cu(e){var t=e.auth,n=e.user;return Dr(n,t,"internal-error"),co(n,new su(e),e.bypassAuthState)}function lu(e){return fu.apply(this,arguments)}function fu(){return fu=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Dr(r=t.user,n,"internal-error"),e.abrupt("return",ao(r,new su(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}var hu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=it(Ze().mark((function t(n,r){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=it(Ze().mark((function e(t){var n,r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uu;case"linkViaPopup":case"linkViaRedirect":return lu;case"reauthViaPopup":case"reauthViaRedirect":return cu;default:Sr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),du=new Mr(2e3,1e4);function pu(e,t,n){return vu.apply(this,arguments)}function vu(){return vu=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zi(t),Nr(t,n,Va),a=ou(i,r),o=new ku(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function mu(){return(mu=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=Ot(t)).auth,n,Va),a=ou(i.auth,r),o=new ku(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t,n){return gu.apply(this,arguments)}function gu(){return(gu=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=Ot(t)).auth,n,Va),a=ou(i.auth,r),o=new ku(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ku=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o){var s;return l(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(s),s}return p(n,[{key:"executeNotNull",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Dr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=it(Ze().mark((function e(){var t,n=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr(1===this.filter.length,"Popup operations only handle one event"),t=ms(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Tr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Tr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Tr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,du.get())}()}}]),n}(hu);ku.currentPopupAction=null;var bu="pendingRedirect",wu=new Map,xu=function(e){m(n,e);var t=b(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=it(Ze().mark((function e(){var t,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=wu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,_u(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,cr(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:wu.set(this.auth._key(),t);case 21:return this.bypassAuthState||wu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=it(Ze().mark((function e(t){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",cr(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",cr(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(hu);function _u(e,t){return Iu.apply(this,arguments)}function Iu(){return Iu=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nu(n),i=Cu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Eu(e,t){return Su.apply(this,arguments)}function Su(){return Su=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t)._set(Nu(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}function Tu(e,t){wu.set(e._key(),t)}function Cu(e){return _i(e._redirectPersistence)}function Nu(e){return Si(bu,e.config.apiKey,e.name)}function Au(e,t,n){return function(e,t,n){return Du.apply(this,arguments)}(e,t,n)}function Du(){return Du=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zi(t),Nr(t,n,Va),e.next=4,i._initializationPromise;case 4:return a=ou(i,r),e.next=7,Eu(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Ru(e,t,n){return function(e,t,n){return Pu.apply(this,arguments)}(e,t,n)}function Pu(){return(Pu=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=Ot(t)).auth,n,Va),e.next=4,i.auth._initializationPromise;case 4:return a=ou(i.auth,r),e.next=7,Eu(a,i.auth);case 7:return e.next=9,Vu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(e,t,n){return function(e,t,n){return Lu.apply(this,arguments)}(e,t,n)}function Lu(){return(Lu=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=Ot(t)).auth,n,Va),e.next=4,i.auth._initializationPromise;case 4:return a=ou(i.auth,r),e.next=7,so(!1,i,n.providerId);case 7:return e.next=9,Eu(a,i.auth);case 9:return e.next=11,Vu(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t){return Mu.apply(this,arguments)}function Mu(){return Mu=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi(t)._initializationPromise;case 2:return e.abrupt("return",Fu(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Fu(e,t){return Uu.apply(this,arguments)}function Uu(){return Uu=it(Ze().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Zi(t),a=ou(i,n),o=new xu(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function Vu(e){return zu.apply(this,arguments)}function zu(){return(zu=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ms("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bu=function(){function e(t){l(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Gu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(qu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function qu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Gu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ku(e){return Wu.apply(this,arguments)}function Wu(){return Wu=it(Ze().mark((function e(t){var n,r=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",qr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}var Hu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qu=/^https?/;function Yu(){return Yu=it(Ze().mark((function e(t){var n,r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ku(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ju(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Sr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Yu.apply(this,arguments)}function Ju(e){var t=Or(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Qu.test(r))return!1;if(Hu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var $u=new Mr(3e4,6e4);function Xu(){var e=gs().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=c(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Zu=null;function ec(e){return Zu=Zu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Xu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Xu(),n(Tr(e,"network-request-failed"))},timeout:$u.get()})}if(null===(i=null===(r=gs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=gs().gapi)||void 0===a?void 0:a.load)){var s=Hi("iframefcb");return gs()[s]=function(){gapi.load?o():n(Tr(e,"network-request-failed"))},Wi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Zu=null,e}))}(e),Zu}var tc=new Mr(5e3,15e3),nc="__/auth/iframe",rc="emulator/auth/iframe",ic={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ac=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oc(e){var t=e.config;Dr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Fr(t,rc):"https://".concat(e.config.authDomain,"/").concat(nc),r={apiKey:t.apiKey,appName:e.name,v:An},i=ac.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ct(r).slice(1))}function sc(e){return uc.apply(this,arguments)}function uc(){return uc=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(t);case 2:return n=e.sent,Dr(r=gs().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:oc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ic,dontclear:!0},(function(e){return new Promise(function(){var n=it(Ze().mark((function n(r,i){var a,o,s;return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){gs().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Tr(t,"network-request-failed"),o=gs().setTimeout((function(){i(a)}),tc.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}var cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lc=function(){function e(t){l(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function fc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},cc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=vt().toLowerCase();n&&(s=Di(c)?"_blank":n),Ni(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=E(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return ji(arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new lc(null);var f=window.open(t||"",s,l);Dr(f,e,"popup-blocked");try{f.focus()}catch(h){}return new lc(f)}var hc="__/auth/handler",dc="emulator/auth/handler",pc=encodeURIComponent("fac");function vc(e,t,n,r,i,a){return mc.apply(this,arguments)}function mc(){return mc=it(Ze().mark((function e(t,n,r,i,a,o){var s,u,c,l,f,h,d,p,v,m,y,g,k;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dr(t.config.authDomain,t,"auth-domain-config-required"),Dr(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:An,eventId:a},n instanceof Va)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Et(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)l=E(c[u],2),f=l[0],h=l[1],s[f]=h;for(n instanceof za&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=d.join(",")),t.tenantId&&(s.tid=t.tenantId),p=s,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(pc,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(yc(t),"?").concat(Ct(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function yc(e){var t=e.config;return t.emulator?Fr(t,dc):"https://".concat(t.authDomain,"/").concat(hc)}var gc="webStorageSupport",kc=function(){function e(){l(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return p(e,[{key:"_openPopup",value:function(){var e=it(Ze().mark((function e(t,n,r,i){var a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,vc(t,n,r,Or(),i);case 3:return o=e.sent,e.abrupt("return",fc(t,o,ms()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=it(Ze().mark((function e(t,n,r,i){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,vc(t,n,r,Or(),i);case 4:return ks(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Pr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(t);case 2:return n=e.sent,r=new Bu(t),n.register("authEvent",(function(e){return Dr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(gc,{type:gc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[gc];void 0!==i&&t(!!i),Sr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Yu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Mi()||Ai()||ji()}}]),e}(),bc=kc,wc=function(){function e(t){l(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rr("unexpected MultiFactorSessionType")}}}]),e}(),xc=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Br(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:finalize",Br(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(wc),_c=function(){function e(){l(this,e)}return p(e,null,[{key:"assertion",value:function(e){return xc._fromCredential(e)}}]),e}();_c.FACTOR_ID="phone";var Ic=function(){function e(){l(this,e)}return p(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Ec._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Ec._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,rs(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",Sc._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ic.FACTOR_ID="totp";var Ec=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return p(n,[{key:"_finalizeEnroll",value:function(){var e=it(Ze().mark((function e(t,n,r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",is(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Us(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(wc),Sc=function(){function e(t,n,r,i,a,o,s){l(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return p(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Tc(e)||Tc(t))&&(r=!0),r&&(Tc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Tc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Tc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Cc="@firebase/auth",Nc="1.1.0",Ac=function(){function e(t){l(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Dr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Dc;!function(e){var t;null===(t=ht())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Rc(){return window}Dc="Browser",_n(new Lt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Dr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Dc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fi(Dc)},l=new Xi(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_i);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),_n(new Lt("auth-internal",(function(e){return function(e){return new Ac(e)}(Zi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),jn(Cc,Nc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Dc)),jn(Cc,Nc,"esm2017");var Pc=2e3;function Oc(e,t,n){return Lc.apply(this,arguments)}function Lc(){return Lc=it(Ze().mark((function e(t,n,r){var i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rc(),o=a.BuildInfo,Pr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,zc(n.sessionId);case 4:return s=e.sent,u={},ji()?u.ibi=o.packageName:Pi()?u.apn=o.packageName:Sr(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",vc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}function jc(){return jc=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rc(),r=n.BuildInfo,i={},ji()?i.iosBundleId=r.packageName:Pi()?i.androidPackageName=r.packageName:Sr(t,"operation-not-supported-in-this-environment"),e.next=5,Ku(t,i);case 5:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}function Mc(e){var t=Rc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Fc(e,t,n){return Uc.apply(this,arguments)}function Uc(){return Uc=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Tr(t,"redirect-cancelled-by-user"))}),Pc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Pi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Uc.apply(this,arguments)}function Vc(e){var t,n,r,i,a,o,s,u,c,l,f=Rc();Dr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Dr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Dr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dr("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function zc(e){return Bc.apply(this,arguments)}function Bc(){return(Bc=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qc(e){if(Pr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Gc=20,Kc=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),cr(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Bu);function Wc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:$c(),postBody:null,tenantId:e.tenantId,error:Tr(e,"no-auth-event")}}function Hc(e,t){return Xc()._set(Zc(e),t)}function Qc(e){return Yc.apply(this,arguments)}function Yc(){return Yc=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc()._get(Zc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Xc()._remove(Zc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function Jc(e,t){var n,r,i=function(e){var t=el(e),n=t.link?decodeURIComponent(t.link):void 0,r=el(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return el(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=el(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Tr(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $c(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Gc;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Xc(){return _i(fs)}function Zc(e){return Si("authEvent",e.config.apiKey,e.name)}function el(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return Nt(t.slice(1).join("?"))}var tl=function(){function e(){l(this,e),this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return p(e,[{key:"_initialize",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Kc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Sr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=it(Ze().mark((function e(t,n,r,i){var a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),wu.clear(),e.next=10,this._originValidation(t);case 10:return o=Wc(t,r,i),e.next=13,Hc(t,o);case 13:return e.next=15,Oc(t,o,n);case 15:return s=e.sent,e.next=18,Mc(s);case 18:return u=e.sent,e.abrupt("return",Fc(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return jc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Rc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(it(Ze().mark((function n(){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qc(e);case 2:t.onEvent(rl());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=it(Ze().mark((function n(r){var i,a;return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Qc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Jc(i,r.url)),t.onEvent(a||rl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Rc().handleOpenURL=function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),nl=tl;function rl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tr("no-auth-event")}}var il=1e3;function al(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ol(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return!("file:"!==al()&&"ionic:"!==al()&&"capacitor:"!==al()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return kt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/Edge\/\d+/.test(e)}(e)}function ul(){try{var e=self.localStorage,t=ms();if(e)return e.setItem(t,"1"),e.removeItem(t),!sl()||bt()}catch(n){return cl()&&bt()}return!1}function cl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ll(){return("http:"===al()||"https:"===al()||yt()||ol())&&!(gt()||mt())&&ul()&&!cl()}function fl(){return ol()&&"undefined"!==typeof document}function hl(){return dl.apply(this,arguments)}function dl(){return(dl=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),il);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pl={LOCAL:"local",NONE:"none",SESSION:"session"},vl=Dr,ml="persistence";function yl(e,t){vl(Object.values(pl).includes(t),e,"invalid-persistence-type"),gt()?vl(t!==pl.SESSION,e,"unsupported-persistence-type"):mt()?vl(t===pl.NONE,e,"unsupported-persistence-type"):cl()?vl(t===pl.NONE||t===pl.LOCAL&&bt(),e,"unsupported-persistence-type"):vl(t===pl.NONE||ul(),e,"unsupported-persistence-type")}function gl(e){return kl.apply(this,arguments)}function kl(){return kl=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=bl(),r=Si(ml,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}function bl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var wl=Dr,xl=function(){function e(){l(this,e),this.browserResolver=_i(bc),this.cordovaResolver=_i(nl),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=Fu,this._overrideRedirectResult=Tu}return p(e,[{key:"_initialize",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=it(Ze().mark((function e(t,n,r,i){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=it(Ze().mark((function e(t,n,r,i){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return fl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return wl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,hl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _l(e){return e.unwrap()}function Il(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Nl(e,function(e,t){var n,r=Ot(e),i=t;return Dr(t.customData.operationType,r,"argument-error"),Dr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ts._fromError(r,i)}(e,t));else if(r){var i=El(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function El(e){var t=(e instanceof wt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof wt)&&"temporaryProof"in t&&"phoneNumber"in t)return au.credentialFromResult(e);var n,r=t.providerId;if(!r||r===hr.PASSWORD)return null;switch(r){case hr.GOOGLE:n=Ga;break;case hr.FACEBOOK:n=qa;break;case hr.GITHUB:n=Ka;break;case hr.TWITTER:n=Qa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Wa._create(r,s):Aa._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Ba(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof wt?n.credentialFromError(e):n.credentialFromResult(e)}function Sl(e,t){return t.catch((function(t){throw t instanceof wt&&Il(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,El(t)),additionalUserInfo:Zo(e),user:Al.getOrCreate(r)}}))}function Tl(e,t){return Cl.apply(this,arguments)}function Cl(){return Cl=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Sl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}var Nl=function(){function e(t,n){l(this,e),this.resolver=n,this.auth=t.wrapped()}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Sl(_l(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Al=function(){function e(t){l(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ot(e);return ss.has(t)||ss.set(t,os._fromUser(t)),ss.get(t)}(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl(this.auth,mo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tl(this.auth,Zs(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl(this.auth,yu(this._delegate,t,xl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gl(Zi(this.auth));case 2:return e.abrupt("return",Ou(this._delegate,t,xl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl(this.auth,go(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Tl(this.auth,function(e,t,n){return tu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Sl(this.auth,function(e,t,n){return mu.apply(this,arguments)}(this._delegate,e,xl))}},{key:"reauthenticateWithRedirect",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gl(Zi(this.auth));case 2:return e.abrupt("return",Ru(this._delegate,t,xl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Vo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ko(Ot(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ko(Ot(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return iu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Go.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return zo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Al.USER_MAP=new WeakMap;var Dl=Dr,Rl=function(){function e(t,n){if(l(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Dl(r,"invalid-api-key",{appName:t.name}),Dl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?xl:void 0;this._delegate=n.initialize({options:{persistence:Ol(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(br),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Al.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ta(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return No.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ao(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Co.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl(this._delegate,Po(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Uo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Fa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(ll(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ju(this._delegate,xl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Sl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Zi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Pl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Pl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Lo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return To.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yl(this._delegate,t),e.t0=t,e.next=e.t0===pl.SESSION?4:e.t0===pl.LOCAL?6:e.t0===pl.NONE?11:13;break;case 4:return n=ds,e.abrupt("break",14);case 6:return e.next=8,_i(Ms)._isAvailable();case 8:return r=e.sent,n=r?Ms:fs,e.abrupt("break",14);case 11:return n=Ei,e.abrupt("break",14);case 13:return e.abrupt("return",Sr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Sl(this._delegate,function(e){return Za.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Sl(this._delegate,po(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Sl(this._delegate,function(e,t){return xo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Sl(this._delegate,function(e,t,n){return po(Ot(e),Ua.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Sl(this._delegate,function(e,t,n){return jo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Tl(this._delegate,function(e,t,n){return Xs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(ll(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Sl(this._delegate,pu(this._delegate,t,xl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(ll(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,gl(this._delegate);case 3:return e.abrupt("return",Au(this._delegate,t,xl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ro.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Pl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Al.getOrCreate(e))},error:t,complete:n}}function Ol(e,t){var n=function(e,t){var n=bl();if(!n)return[];var r=Si(ml,e,t);switch(n.getItem(r)){case pl.NONE:return[Ei];case pl.LOCAL:return[Ms,ds];case pl.SESSION:return[ds];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ms)||n.push(Ms),"undefined"!==typeof window)for(var r=0,i=[fs,ds];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ei)||n.push(Ei),n}Rl.Persistence=pl;var Ll=function(){function e(){l(this,e),this.providerId="phone",this._delegate=new au(_l(ur.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return au.credential(e,t)}}]),e}();Ll.PHONE_SIGN_IN_METHOD=au.PHONE_SIGN_IN_METHOD,Ll.PROVIDER_ID=au.PROVIDER_ID;var jl,Ml=Dr,Fl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ur.app();l(this,e),Ml(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ys(i.auth(),t,n),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(jl=ur).INTERNAL.registerComponent(new Lt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Rl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:dr,PASSWORD_RESET:pr,RECOVER_EMAIL:vr,REVERT_SECOND_FACTOR_ADDITION:mr,VERIFY_AND_CHANGE_EMAIL:yr,VERIFY_EMAIL:gr}},EmailAuthProvider:Ua,FacebookAuthProvider:qa,GithubAuthProvider:Ka,GoogleAuthProvider:Ga,OAuthProvider:Ba,SAMLAuthProvider:Ha,PhoneAuthProvider:Ll,PhoneMultiFactorGenerator:_c,RecaptchaVerifier:Fl,TwitterAuthProvider:Qa,Auth:Rl,AuthCredential:ia,Error:wt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),jl.registerVersion("@firebase/auth-compat","0.4.4");var Ul,Vl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zl={},Bl=Bl||{},ql=Vl||self;function Gl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Kl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wl="closure_uid_"+(1e9*Math.random()>>>0),Hl=0;function Ql(e,t,n){return e.call.apply(e.bind,arguments)}function Yl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jl(e,t,n){return(Jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ql:Yl).apply(null,arguments)}function $l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Zl(){this.s=this.s,this.o=this.o}Zl.prototype.s=!1,Zl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wl)&&e[Wl]||(e[Wl]=++Hl))},Zl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ef=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function tf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nf(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Gl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function rf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}rf.prototype.h=function(){this.defaultPrevented=!0};var af=function(){if(!ql.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ql.addEventListener("test",(function(){}),t),ql.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function of(e){return/^[\s\xa0]*$/.test(e)}function sf(){var e=ql.navigator;return e&&(e=e.userAgent)?e:""}function uf(e){return-1!=sf().indexOf(e)}function cf(e){return cf[" "](e),e}cf[" "]=function(){};var lf,ff,hf=uf("Opera"),df=uf("Trident")||uf("MSIE"),pf=uf("Edge"),vf=pf||df,mf=uf("Gecko")&&!(-1!=sf().toLowerCase().indexOf("webkit")&&!uf("Edge"))&&!(uf("Trident")||uf("MSIE"))&&!uf("Edge"),yf=-1!=sf().toLowerCase().indexOf("webkit")&&!uf("Edge");function gf(){var e=ql.document;return e?e.documentMode:void 0}e:{var kf="",bf=function(){var e=sf();return mf?/rv:([^\);]+)(\)|;)/.exec(e):pf?/Edge\/([\d\.]+)/.exec(e):df?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yf?/WebKit\/(\S+)/.exec(e):hf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(bf&&(kf=bf?bf[1]:""),df){var wf=gf();if(null!=wf&&wf>parseFloat(kf)){lf=String(wf);break e}}lf=kf}if(ql.document&&df){var xf=gf();ff=xf||(parseInt(lf,10)||void 0)}else ff=void 0;var _f=ff;function If(e,t){if(rf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(mf){e:{try{cf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ef[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&If.$.h.call(this)}}Xl(If,rf);var Ef={2:"touch",3:"pen",4:"mouse"};If.prototype.h=function(){If.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Sf="closure_listenable_"+(1e6*Math.random()|0),Tf=0;function Cf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Tf,this.fa=this.ia=!1}function Nf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Af(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Df(e){var t={};for(var n in e)t[n]=e[n];return t}var Rf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Rf.length;a++)n=Rf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Of(e){this.src=e,this.g={},this.h=0}function Lf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ef(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Nf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Of.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=jf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Cf(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Mf="closure_lm_"+(1e6*Math.random()|0),Ff={};function Uf(e,t,n,r,i){if(r&&r.once)return zf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uf(e,t[a],n,r,i);return null}return n=Qf(n),e&&e[Sf]?e.O(t,n,Kl(r)?!!r.capture:!!r,i):Vf(e,t,n,!1,r,i)}function Vf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Kl(i)?!!i.capture:!!i,s=Wf(e);if(s||(e[Mf]=s=new Of(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Kf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)af||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zf(e,t[a],n,r,i);return null}return n=Qf(n),e&&e[Sf]?e.P(t,n,Kl(r)?!!r.capture:!!r,i):Vf(e,t,n,!0,r,i)}function Bf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Bf(e,t[a],n,r,i);else r=Kl(r)?!!r.capture:!!r,n=Qf(n),e&&e[Sf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jf(a=e.g[t],n,r,i))&&(Nf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Wf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jf(t,n,r,i)),(n=-1<e?t[e]:null)&&qf(n))}function qf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Sf])Lf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Wf(t))?(Lf(n,e),0==n.h&&(n.src=null,t[Mf]=null)):Nf(e)}}}function Gf(e){return e in Ff?Ff[e]:Ff[e]="on"+e}function Kf(e,t){if(e.fa)e=!0;else{t=new If(t,this);var n=e.listener,r=e.la||e.src;e.ia&&qf(e),e=n.call(r,t)}return e}function Wf(e){return(e=e[Mf])instanceof Of?e:null}var Hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qf(e){return"function"===typeof e?e:(e[Hf]||(e[Hf]=function(t){return e.handleEvent(t)}),e[Hf])}function Yf(){Zl.call(this),this.i=new Of(this),this.S=this,this.J=null}function Jf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new rf(t,e);else if(t instanceof rf)t.target=t.target||e;else{var i=t;Pf(t=new rf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$f(o,r,!0,t)&&i}if(i=$f(o=t.g=e,r,!0,t)&&i,i=$f(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$f(o=t.g=n[a],r,!1,t)&&i}function $f(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Lf(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Xl(Yf,Zl),Yf.prototype[Sf]=!0,Yf.prototype.removeEventListener=function(e,t,n,r){Bf(this,e,t,n,r)},Yf.prototype.N=function(){if(Yf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Nf(n[r]);delete t.g[e],t.h--}}this.J=null},Yf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Yf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xf=ql.JSON.stringify,Zf=function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function eh(){var e=uh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var th=function(){function e(){l(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=nh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),nh=new Zf((function(){return new rh}),(function(e){return e.reset()})),rh=function(){function e(){l(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ih(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ah(e){ql.setTimeout((function(){throw e}),0)}var oh,sh=!1,uh=new th,ch=function(){var e=ql.Promise.resolve(void 0);oh=function(){e.then(lh)}},lh=function(){for(var e;e=eh();){try{e.h.call(e.g)}catch(n){ah(n)}var t=nh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sh=!1};function fh(e,t){Yf.call(this),this.h=e||1,this.g=t||ql,this.j=Jl(this.qb,this),this.l=Date.now()}function hh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function dh(e,t,n){if("function"===typeof e)n&&(e=Jl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jl(e.handleEvent,e)}return 2147483647<Number(t)?-1:ql.setTimeout(e,t||0)}function ph(e){e.g=dh((function(){e.g=null,e.i&&(e.i=!1,ph(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xl(fh,Yf),(Ul=fh.prototype).ga=!1,Ul.T=null,Ul.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jf(this,"tick"),this.ga&&(hh(this),this.start()))}},Ul.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ul.N=function(){fh.$.N.call(this),hh(this),delete this.g};var vh=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ph(this)}},{key:"N",value:function(){cr(y(n.prototype),"N",this).call(this),this.g&&(ql.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Zl);function mh(e){Zl.call(this),this.h=e,this.g={}}Xl(mh,Zl);var yh=[];function gh(e,t,n,r){Array.isArray(n)||(n&&(yh[0]=n.toString()),n=yh);for(var i=0;i<n.length;i++){var a=Uf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function kh(e){Af(e.g,(function(e,t){this.g.hasOwnProperty(t)&&qf(e)}),e),e.g={}}function bh(){this.g=!0}function wh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Xf(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}mh.prototype.N=function(){mh.$.N.call(this),kh(this)},mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bh.prototype.Ea=function(){this.g=!1},bh.prototype.info=function(){};var xh={},_h=null;function Ih(){return _h=_h||new Yf}function Eh(e){rf.call(this,xh.Ta,e)}function Sh(e){var t=Ih();Jf(t,new Eh(t))}function Th(e,t){rf.call(this,xh.STAT_EVENT,e),this.stat=t}function Ch(e){var t=Ih();Jf(t,new Th(t,e))}function Nh(e,t){rf.call(this,xh.Ua,e),this.size=t}function Ah(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ql.setTimeout((function(){e()}),t)}xh.Ta="serverreachability",Xl(Eh,rf),xh.STAT_EVENT="statevent",Xl(Th,rf),xh.Ua="timingevent",Xl(Nh,rf);var Dh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Rh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ph(){}function Oh(e){return e.h||(e.h=e.i())}function Lh(){}Ph.prototype.h=null;var jh,Mh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fh(){rf.call(this,"d")}function Uh(){rf.call(this,"c")}function Vh(){}function zh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new mh(this),this.P=qh,e=vf?125:void 0,this.V=new fh(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bh}function Bh(){this.i=null,this.g="",this.h=!1}Xl(Fh,rf),Xl(Uh,rf),Xl(Vh,Ph),Vh.prototype.g=function(){return new XMLHttpRequest},Vh.prototype.i=function(){return{}},jh=new Vh;var qh=45e3,Gh={},Kh={};function Wh(e,t,n){e.L=1,e.v=fd(od(t)),e.s=n,e.S=!0,Hh(e,null)}function Hh(e,t){e.G=Date.now(),$h(e),e.A=od(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Id(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Bh,e.g=Ep(e.l,n?t:null,!e.s),0<e.O&&(e.M=new vh(Jl(e.Pa,e,e.g),e.O)),gh(e.U,e.g,"readystatechange",e.nb),t=e.I?Df(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Sh(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Qh(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Yh(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Jh(e,n))==Kh){4==t&&(e.o=4,Ch(14),i=!1),wh(e.j,e.m,null,"[Incomplete Response]");break}if(r==Gh){e.o=4,Ch(15),wh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wh(e.j,e.m,r,null),nd(e,r)}Qh(e)&&r!=Kh&&r!=Gh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ch(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yp(t),t.M=!0,Ch(11))):(wh(e.j,e.m,n,"[Invalid Chunked Response]"),td(e),ed(e))}function Jh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Kh:(n=Number(t.substring(n,r)),isNaN(n)?Gh:(r+=1)+n>t.length?Kh:(t=t.slice(r,r+n),e.C=r+n,t))}function $h(e){e.Y=Date.now()+e.P,Xh(e,e.P)}function Xh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ah(Jl(e.lb,e),t)}function Zh(e){e.B&&(ql.clearTimeout(e.B),e.B=null)}function ed(e){0==e.l.H||e.J||bp(e.l,e)}function td(e){Zh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hh(e.V),kh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function nd(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Dd(n.i,e)))if(!e.K&&Dd(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;kp(n),cp(n)}mp(n),Ch(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ah(Jl(n.ib,n),6e3));if(1>=Ad(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else xp(n,11)}else if((e.K||n.g==e)&&kp(n),!of(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Rd(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ld(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Ip(r,r.J?r.pa:null,r.Y),d.K){Pd(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Zh(p),$h(p)),r.g=d}else vp(r);0<n.j.length&&fp(n)}else"stop"!=a[0]&&"close"!=a[0]||xp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?xp(n,7):up(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Sh()}catch(a){}}function rd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Gl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Gl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Gl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ul=zh.prototype).setTimeout=function(e){this.P=e},Ul.nb=function(e){e=e.target;var t=this.M;t&&3==np(e)?t.l():this.Pa(e)},Ul.Pa=function(e){try{if(e==this.g)e:{var t=np(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||vf||this.g&&(this.h.h||this.g.ja()||rp(this.g)))){this.J||4!=t||7==n||Sh(),Zh(this);var r=this.g.da();this.ca=r;t:if(Qh(this)){var i=rp(this.g);e="";var a=i.length,o=4==np(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){td(this),ed(this);var s="";break t}this.h.i=new ql.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!of(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Ch(12),td(this),ed(this);break e}wh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nd(this,r)}this.S?(Yh(this,t,s),vf&&this.i&&3==t&&(gh(this.U,this.V,"tick",this.mb),this.V.start())):(wh(this.j,this.m,s,null),nd(this,s)),4==t&&td(this),this.i&&!this.J&&(4==t?bp(this.l,this):(this.i=!1,$h(this)))}else(function(e){var t={};e=(e.g&&2<=np(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!of(e[n])){var r=ih(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Ch(12)):(this.o=0,Ch(13)),td(this),ed(this)}}}catch(t){}},Ul.mb=function(){if(this.g){var e=np(this.g),t=this.g.ja();this.C<t.length&&(Zh(this),Yh(this,e,t),this.i&&4!=e&&$h(this))}},Ul.cancel=function(){this.J=!0,td(this)},Ul.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Sh(),Ch(17)),td(this),this.o=2,ed(this)):Xh(this,this.Y-e)};var id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ad(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ad){this.h=e.h,sd(this,e.j),this.s=e.s,this.g=e.g,ud(this,e.m),this.l=e.l;var t=e.i,n=new bd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),cd(this,n),this.o=e.o}else e&&(t=String(e).match(id))?(this.h=!1,sd(this,t[1]||"",!0),this.s=hd(t[2]||""),this.g=hd(t[3]||"",!0),ud(this,t[4]),this.l=hd(t[5]||"",!0),cd(this,t[6]||"",!0),this.o=hd(t[7]||"")):(this.h=!1,this.i=new bd(null,this.h))}function od(e){return new ad(e)}function sd(e,t,n){e.j=n?hd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ud(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cd(e,t,n){t instanceof bd?(e.i=t,function(e,t){t&&!e.j&&(wd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xd(this,t),Id(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dd(t,gd)),e.i=new bd(t,e.h))}function ld(e,t,n){e.i.set(t,n)}function fd(e){return ld(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ad.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dd(t,vd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(dd(t,vd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dd(n,"/"==n.charAt(0)?yd:md,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",dd(n,kd)),e.join("")};var vd=/[#\/\?@]/g,md=/[#\?:]/g,yd=/[#\?]/g,gd=/[#\?@]/g,kd=/#/g;function bd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xd(e,t){wd(e),t=Ed(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _d(e,t){return wd(e),t=Ed(e,t),e.g.has(t)}function Id(e,t,n){xd(e,t),0<n.length&&(e.i=null,e.g.set(Ed(e,t),tf(n)),e.h+=n.length)}function Ed(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ul=bd.prototype).add=function(e,t){wd(this),this.i=null,e=Ed(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ul.forEach=function(e,t){wd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ul.ta=function(){wd(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ul.Z=function(e){wd(this);var t=[];if("string"===typeof e)_d(this,e)&&(t=t.concat(this.g.get(Ed(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ul.set=function(e,t){return wd(this),this.i=null,_d(this,e=Ed(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ul.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ul.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Sd=p((function e(t,n){l(this,e),this.g=t,this.map=n}));function Td(e){this.l=e||Cd,ql.PerformanceNavigationTiming?e=0<(e=ql.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ql.g&&ql.g.Ka&&ql.g.Ka()&&ql.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cd=10;function Nd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ad(e){return e.h?1:e.g?e.g.size:0}function Dd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Rd(e,t){e.g?e.g.add(t):e.h=t}function Pd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Od(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return tf(e.i)}Td.prototype.cancel=function(){if(this.i=Od(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Ld,jd=function(){function e(){l(this,e)}return p(e,[{key:"stringify",value:function(e){return ql.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return ql.JSON.parse(e,void 0)}}]),e}();function Md(){this.g=new jd}function Fd(e,t,n){var r=n||"";try{rd(e,(function(e,n){var i=e;Kl(e)&&(i=Xf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ud(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Vd(e){this.l=e.fc||null,this.j=e.ob||!1}function zd(e,t){Yf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xl(Vd,Ph),Vd.prototype.g=function(){return new zd(this.l,this.j)},Vd.prototype.i=(Ld={},function(){return Ld}),Xl(zd,Yf);var Bd=0;function qd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Gd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kd(e)}function Kd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ul=zd.prototype).open=function(e,t){if(this.readyState!=Bd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kd(this)},Ul.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ql).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ul.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gd(this)),this.readyState=Bd},Ul.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kd(this)),this.g&&(this.readyState=3,Kd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ql.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ul.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gd(this):Kd(this),3==this.readyState&&qd(this)}},Ul.Za=function(e){this.g&&(this.response=this.responseText=e,Gd(this))},Ul.Ya=function(e){this.g&&(this.response=e,Gd(this))},Ul.ka=function(){this.g&&Gd(this)},Ul.setRequestHeader=function(e,t){this.v.append(e,t)},Ul.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ul.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Wd=ql.JSON.parse;function Hd(e){Yf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qd,this.L=this.M=!1}Xl(Hd,Yf);var Qd="",Yd=/^https?$/i,Jd=["POST","PUT"];function $d(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xd(e),ep(e)}function Xd(e){e.F||(e.F=!0,Jf(e,"complete"),Jf(e,"error"))}function Zd(e){if(e.h&&"undefined"!=typeof Bl&&(!e.C[1]||4!=np(e)||2!=e.da()))if(e.v&&4==np(e))dh(e.La,0,e);else if(Jf(e,"readystatechange"),4==np(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(id)[1]||null;!a&&ql.self&&ql.self.location&&(a=ql.self.location.protocol.slice(0,-1)),i=!Yd.test(a?a.toLowerCase():"")}t=i}if(t)Jf(e,"complete"),Jf(e,"success");else{e.m=6;try{var o=2<np(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Xd(e)}}finally{ep(e)}}}function ep(e,t){if(e.g){tp(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Jf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function tp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ql.clearTimeout(e.A),e.A=null)}function np(e){return e.g?e.g.readyState:0}function rp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Qd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(lv){return null}}function ip(e){var t="";return Af(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ap(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ip(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ld(e,t,n))}function op(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sp(e){this.Ga=0,this.j=[],this.l=new bh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=op("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=op("baseRetryDelayMs",5e3,e),this.hb=op("retryDelaySeedMs",1e4,e),this.eb=op("forwardChannelMaxRetries",2,e),this.xa=op("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Td(e&&e.concurrentRequestLimit),this.Ja=new Md,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function up(e){if(lp(e),3==e.H){var t=e.W++,n=od(e.I);if(ld(n,"SID",e.K),ld(n,"RID",t),ld(n,"TYPE","terminate"),dp(e,n),(t=new zh(e,e.l,t)).L=2,t.v=fd(od(n)),n=!1,ql.navigator&&ql.navigator.sendBeacon)try{n=ql.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&ql.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ep(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$h(t)}_p(e)}function cp(e){e.g&&(yp(e),e.g.cancel(),e.g=null)}function lp(e){cp(e),e.u&&(ql.clearTimeout(e.u),e.u=null),kp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ql.clearTimeout(e.m),e.m=null)}function fp(e){if(!Nd(e.i)&&!e.m){e.m=!0;var t=e.Na;oh||ch(),sh||(oh(),sh=!0),uh.add(t,e),e.C=0}}function hp(e,t){var n;n=t?t.m:e.W++;var r=od(e.I);ld(r,"SID",e.K),ld(r,"RID",n),ld(r,"AID",e.V),dp(e,r),e.o&&e.s&&ap(r,e.o,e.s),n=new zh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=pp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Rd(e.i,n),Wh(n,r,t)}function dp(e,t){e.na&&Af(e.na,(function(e,n){ld(t,n,e)})),e.h&&rd({},(function(e,n){ld(t,n,e)}))}function pp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jl(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Fd(l,o,"req"+c+"_")}catch(Cm){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function vp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;oh||ch(),sh||(oh(),sh=!0),uh.add(t,e),e.A=0}}function mp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ah(Jl(e.Ma,e),wp(e,e.A)),e.A++,!0)}function yp(e){null!=e.B&&(ql.clearTimeout(e.B),e.B=null)}function gp(e){e.g=new zh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=od(e.wa);ld(t,"RID","rpc"),ld(t,"SID",e.K),ld(t,"AID",e.V),ld(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ld(t,"TO",e.qa),ld(t,"TYPE","xmlhttp"),dp(e,t),e.o&&e.s&&ap(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=fd(od(t)),n.s=null,n.S=!0,Hh(n,e)}function kp(e){null!=e.v&&(ql.clearTimeout(e.v),e.v=null)}function bp(e,t){var n=null;if(e.g==t){kp(e),yp(e),e.g=null;var r=2}else{if(!Dd(e.i,t))return;n=t.F,Pd(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Jf(r=Ih(),new Nh(r,n)),fp(e)}else vp(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ad(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ah(Jl(e.Na,e,t),wp(e,e.C)),e.C++,!0))}(e,t)||2==r&&mp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xp(e,5);break;case 4:xp(e,10);break;case 3:xp(e,6);break;default:xp(e,2)}}function wp(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function xp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Jl(e.pb,e);n||(n=new ad("//www.google.com/images/cleardot.gif"),ql.location&&"http"==ql.location.protocol||sd(n,"https"),fd(n)),function(e,t){var n=new bh;if(ql.Image){var r=new Image;r.onload=$l(Ud,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$l(Ud,n,r,"TestLoadImage: error",!1,t),r.onabort=$l(Ud,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$l(Ud,n,r,"TestLoadImage: timeout",!1,t),ql.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ch(2);e.H=0,e.h&&e.h.za(t),_p(e),lp(e)}function _p(e){if(e.H=0,e.ma=[],e.h){var t=Od(e.i);0==t.length&&0==e.j.length||(nf(e.ma,t),nf(e.ma,e.j),e.i.i.length=0,tf(e.j),e.j.length=0),e.h.ya()}}function Ip(e,t,n){var r=n instanceof ad?od(n):new ad(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ud(r,r.m);else{var i=ql.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ad(null);r&&sd(a,r),t&&(a.g=t),i&&ud(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ld(r,n,t),ld(r,"VER",e.ra),dp(e,r),r}function Ep(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Hd(new Vd({ob:!0})):new Hd(e.va)).Oa(e.J),t}function Sp(){}function Tp(){if(df&&!(10<=Number(_f)))throw Error("Environmental error: no available transport.")}function Cp(e,t){Yf.call(this),this.g=new sp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!of(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!of(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dp(this)}function Np(e){Fh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ap(){Uh.call(this),this.status=1}function Dp(e){this.g=e}function Rp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Op(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Ul=Hd.prototype).Oa=function(e){this.M=e},Ul.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jh.g(),this.C=this.u?Oh(this.u):Oh(jh),this.g.onreadystatechange=Jl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void $d(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=ql.FormData&&e instanceof ql.FormData,!(0<=ef(Jd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=T(n);try{for(c.s();!(u=c.n()).done;){var l=E(u.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tp(this),0<this.B&&((this.L=function(e){return df&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jl(this.ua,this)):this.A=dh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){$d(this,s)}},Ul.ua=function(){"undefined"!=typeof Bl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jf(this,"timeout"),this.abort(8))},Ul.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Jf(this,"complete"),Jf(this,"abort"),ep(this))},Ul.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ep(this,!0)),Hd.$.N.call(this)},Ul.La=function(){this.s||(this.G||this.v||this.l?Zd(this):this.kb())},Ul.kb=function(){Zd(this)},Ul.isActive=function(){return!!this.g},Ul.da=function(){try{return 2<np(this)?this.g.status:-1}catch(Ld){return-1}},Ul.ja=function(){try{return this.g?this.g.responseText:""}catch(Ld){return""}},Ul.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Wd(t)}},Ul.Ia=function(){return this.m},Ul.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ul=sp.prototype).ra=8,Ul.H=1,Ul.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new zh(this,this.l,e),n=this.s;if(this.U&&(n?Pf(n=Df(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=pp(this,t,r),ld(i=od(this.I),"RID",e),ld(i,"CVER",22),this.F&&ld(i,"X-HTTP-Session-Id",this.F),dp(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(ip(n)))+"&"+r:this.o&&ap(i,this.o,n)),Rd(this.i,t),this.bb&&ld(i,"TYPE","init"),this.P?(ld(i,"$req",r),ld(i,"SID","null"),t.aa=!0,Wh(t,i,null)):Wh(t,i,r),this.H=2}}else 3==this.H&&(e?hp(this,e):0==this.j.length||Nd(this.i)||hp(this))},Ul.Ma=function(){if(this.u=null,gp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ah(Jl(this.jb,this),e)}},Ul.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ch(10),cp(this),gp(this))},Ul.ib=function(){null!=this.v&&(this.v=null,cp(this),mp(this),Ch(19))},Ul.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ch(2)):(this.l.info("Failed to ping google.com"),Ch(1))},Ul.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ul=Sp.prototype).Ba=function(){},Ul.Aa=function(){},Ul.za=function(){},Ul.ya=function(){},Ul.isActive=function(){return!0},Ul.Va=function(){},Tp.prototype.g=function(e,t){return new Cp(e,t)},Xl(Cp,Yf),Cp.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ch(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ip(e,null,e.Y),fp(e)},Cp.prototype.close=function(){up(this.g)},Cp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Xf(e),e=n);t.j.push(new Sd(t.fb++,e)),3==t.H&&fp(t)},Cp.prototype.N=function(){this.g.h=null,delete this.j,up(this.g),delete this.g,Cp.$.N.call(this)},Xl(Np,Fh),Xl(Ap,Uh),Xl(Dp,Sp),Dp.prototype.Ba=function(){Jf(this.g,"a")},Dp.prototype.Aa=function(e){Jf(this.g,new Np(e))},Dp.prototype.za=function(e){Jf(this.g,new Ap)},Dp.prototype.ya=function(){Jf(this.g,"b")},Xl(Rp,(function(){this.blockSize=-1})),Rp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Rp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Pp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Pp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Pp(this,r),i=0;break}}this.h=i,this.i+=t},Rp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Lp={};function jp(e){return-128<=e&&128>e?function(e,t){var n=Lp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Op([0|e],0>e?-1:0)})):new Op([0|e],0>e?-1:0)}function Mp(e){if(isNaN(e)||!isFinite(e))return Up;if(0>e)return Gp(Mp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Fp;return new Op(t,0)}var Fp=4294967296,Up=jp(0),Vp=jp(1),zp=jp(16777216);function Bp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function qp(e){return-1==e.h}function Gp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Op(n,~e.h).add(Vp)}function Kp(e,t){return e.add(Gp(t))}function Wp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Hp(e,t){this.g=e,this.h=t}function Qp(e,t){if(Bp(t))throw Error("division by zero");if(Bp(e))return new Hp(Up,Up);if(qp(e))return t=Qp(Gp(e),t),new Hp(Gp(t.g),Gp(t.h));if(qp(t))return t=Qp(e,Gp(t)),new Hp(Gp(t.g),t.h);if(30<e.g.length){if(qp(e)||qp(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Vp,r=t;0>=r.X(e);)n=Yp(n),r=Yp(r);var i=Jp(n,1),a=Jp(r,1);for(r=Jp(r,2),n=Jp(n,2);!Bp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Jp(r,1),n=Jp(n,1)}return t=Kp(e,i.R(t)),new Hp(i,t)}for(i=Up;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Mp(n)).R(t);qp(o)||0<o.X(e);)o=(a=Mp(n-=r)).R(t);Bp(a)&&(a=Vp),i=i.add(a),e=Kp(e,o)}return new Hp(i,e)}function Yp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Op(n,e.h)}function Jp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Op(i,e.h)}(Ul=Op.prototype).ea=function(){if(qp(this))return-Gp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Fp+r)*t,t*=Fp}return e},Ul.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Bp(this))return"0";if(qp(this))return"-"+Gp(this).toString(e);for(var t=Mp(Math.pow(e,6)),n=this,r="";;){var i=Qp(n,t).g,a=((0<(n=Kp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Bp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ul.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ul.X=function(e){return qp(e=Kp(this,e))?-1:Bp(e)?0:1},Ul.abs=function(){return qp(this)?Gp(this):this},Ul.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Op(n,-2147483648&n[n.length-1]?-1:0)},Ul.R=function(e){if(Bp(this)||Bp(e))return Up;if(qp(this))return qp(e)?Gp(this).R(Gp(e)):Gp(Gp(this).R(e));if(qp(e))return Gp(this.R(Gp(e)));if(0>this.X(zp)&&0>e.X(zp))return Mp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Wp(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Wp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Wp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Wp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Op(n,0)},Ul.gb=function(e){return Qp(this,e).h},Ul.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Op(n,this.h&e.h)},Ul.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Op(n,this.h|e.h)},Ul.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Op(n,this.h^e.h)},Tp.prototype.createWebChannel=Tp.prototype.g,Cp.prototype.send=Cp.prototype.u,Cp.prototype.open=Cp.prototype.m,Cp.prototype.close=Cp.prototype.close,Dh.NO_ERROR=0,Dh.TIMEOUT=8,Dh.HTTP_ERROR=6,Rh.COMPLETE="complete",Lh.EventType=Mh,Mh.OPEN="a",Mh.CLOSE="b",Mh.ERROR="c",Mh.MESSAGE="d",Yf.prototype.listen=Yf.prototype.O,Hd.prototype.listenOnce=Hd.prototype.P,Hd.prototype.getLastError=Hd.prototype.Sa,Hd.prototype.getLastErrorCode=Hd.prototype.Ia,Hd.prototype.getStatus=Hd.prototype.da,Hd.prototype.getResponseJson=Hd.prototype.Wa,Hd.prototype.getResponseText=Hd.prototype.ja,Hd.prototype.send=Hd.prototype.ha,Hd.prototype.setWithCredentials=Hd.prototype.Oa,Rp.prototype.digest=Rp.prototype.l,Rp.prototype.reset=Rp.prototype.reset,Rp.prototype.update=Rp.prototype.j,Op.prototype.add=Op.prototype.add,Op.prototype.multiply=Op.prototype.R,Op.prototype.modulo=Op.prototype.gb,Op.prototype.compare=Op.prototype.X,Op.prototype.toNumber=Op.prototype.ea,Op.prototype.toString=Op.prototype.toString,Op.prototype.getBits=Op.prototype.D,Op.fromNumber=Mp,Op.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Gp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Mp(Math.pow(n,8)),i=Up,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Mp(Math.pow(n,o)),i=i.R(o).add(Mp(s))):i=(i=i.R(r)).add(Mp(s))}return i};var $p=zl.createWebChannelTransport=function(){return new Tp},Xp=zl.getStatEventTarget=function(){return Ih()},Zp=zl.ErrorCode=Dh,ev=zl.EventType=Rh,tv=zl.Event=xh,nv=zl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rv=zl.FetchXmlHttpFactory=Vd,iv=zl.WebChannel=Lh,av=zl.XhrIo=Hd,ov=zl.Md5=Rp,sv=zl.Integer=Op,uv="@firebase/firestore",cv=function(){function e(t){l(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();cv.UNAUTHENTICATED=new cv(null),cv.GOOGLE_CREDENTIALS=new cv("google-credentials-uid"),cv.FIRST_PARTY=new cv("first-party-uid"),cv.MOCK_USER=new cv("mock-user");var lv="10.1.0",fv=new Wt("@firebase/firestore");function hv(){return fv.logLevel}function dv(e){if(fv.logLevel<=Ut.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);fv.debug.apply(fv,["Firestore (".concat(lv,"): ").concat(e)].concat(c(i)))}}function pv(e){if(fv.logLevel<=Ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);fv.error.apply(fv,["Firestore (".concat(lv,"): ").concat(e)].concat(c(i)))}}function vv(e){if(fv.logLevel<=Ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);fv.warn.apply(fv,["Firestore (".concat(lv,"): ").concat(e)].concat(c(i)))}}function mv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function yv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(lv,") INTERNAL ASSERTION FAILED: ")+e;throw pv(t),new Error(t)}function gv(e,t){e||yv()}function kv(e,t){return e}var bv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wv=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(wt),xv=p((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_v=p((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Iv=function(){function e(){l(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ev=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Sv=function(){function e(t){l(this,e),this.t=t,this.currentUser=cv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new xv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new xv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){dv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(dv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(dv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(gv("string"==typeof n.accessToken),new _v(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return gv(null===e||"string"==typeof e),new cv(e)}}]),e}(),Tv=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=cv.FIRST_PARTY,this.I=new Map}return p(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Cv=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new Tv(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Nv=p((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Av=function(){function e(t){l(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&dv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,dv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){dv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):dv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(gv("string"==typeof t.token),e.R=t.token,new Nv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Dv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Rv=function(){function e(){l(this,e)}return p(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Dv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Pv(e,t){return e<t?-1:e>t?1:0}function Ov(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lv(e){return e+"\0"}var jv=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new wv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new wv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Pv(this.nanoseconds,e.nanoseconds):Pv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Mv=function(){function e(t){l(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jv(0,0))}},{key:"max",value:function(){return new e(new jv(253402300799,999999999))}}]),e}(),Fv=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&yv(),void 0===r?r=t.length-n:r>t.length-n&&yv(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Uv=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new wv(bv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,c(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fv),Vv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zv=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Vv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new wv(bv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new wv(bv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new wv(bv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new wv(bv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fv),Bv=function(){function e(t){l(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Uv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Uv.fromString(t))}},{key:"fromName",value:function(t){return new e(Uv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Uv.emptyPath())}},{key:"comparator",value:function(e,t){return Uv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Uv(t.slice()))}}]),e}(),qv=p((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Gv(e){return e.fields.find((function(e){return 2===e.kind}))}function Kv(e){return e.fields.filter((function(e){return 2!==e.kind}))}qv.UNKNOWN_ID=-1;var Wv=p((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n}));var Hv=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,Jv.min())}}]),e}();function Qv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Mv.fromTimestamp(1e9===r?new jv(n+1,0):new jv(n,r));return new Jv(i,Bv.empty(),t)}function Yv(e){return new Jv(e.readTime,e.key,-1)}var Jv=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Mv.min(),Bv.empty(),-1)}},{key:"max",value:function(){return new e(Mv.max(),Bv.empty(),-1)}}]),e}();function $v(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Bv.comparator(e.documentKey,t.documentKey))?n:Pv(e.largestBatchId,t.largestBatchId)}var Xv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zv=function(){function e(){l(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function em(e){return tm.apply(this,arguments)}function tm(){return(tm=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bv.FAILED_PRECONDITION&&t.message===Xv){e.next=2;break}throw t;case 2:dv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nm=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&yv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),rm=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new xv,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new om(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=fm(e.target.error);r.m.reject(new om(t,n))}}return p(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(dv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new um(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new om(n,t)}}}]),e}(),im=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(vt())&&pv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"N",value:function(){var e=it(Ze().mark((function e(t){var n=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return dv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new om(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new wv(bv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new wv(bv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new om(t,n))},i.onupgradeneeded=function(e){dv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){dv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=it(Ze().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=Ze().mark((function e(){var n,s,u,l;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=rm.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),nm.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.g;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,dv("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return dv("SimpleDb","Removing database:",e),cm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!bt())return!1;if(e.C())return!0;var t=vt(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),am=function(){function e(t){l(this,e),this.q=t,this.K=!1,this.$=null}return p(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return cm(this.q.delete())}}]),e}(),om=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,bv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(wv);function sm(e){return"IndexedDbTransactionError"===e.name}var um=function(){function e(t){l(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(dv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(dv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cm(n)}},{key:"add",value:function(e){return dv("SimpleDb","ADD",this.store.name,e,e),cm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return cm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),dv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return dv("SimpleDb","DELETE",this.store.name,e),cm(this.store.delete(e))}},{key:"count",value:function(){return dv("SimpleDb","COUNT",this.store.name),cm(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new nm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new nm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){dv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new nm((function(n,r){t.onerror=function(e){var t=fm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new nm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new am(i),o=t(i.primaryKey,i.value,a);if(o instanceof nm){var s=o.catch((function(e){return a.done(),nm.reject(e)}));n.push(s)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return nm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function cm(e){return new nm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fm(e.target.error);n(t)}}))}var lm=!1;function fm(e){var t=im.D(vt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new wv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lm||(lm=!0,setTimeout((function(){throw r}),0)),r}}return e}var hm=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return p(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;dv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=dv,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!sm(e.t4)){e.next=17;break}dv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,em(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),dm=function(){function e(t,n){l(this,e),this.localStore=t,this.persistence=n}return p(e,[{key:"ne",value:function(){var e=it(Ze().mark((function e(){var t,n=this,r=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return nm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return dv("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return dv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Yv(t);$v(r,n)>0&&(n=r)})),new Jv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),pm=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function vm(e){return null==e}function mm(e){return 0===e&&1/e==-1/0}function ym(e){return"number"==typeof e&&Number.isInteger(e)&&!mm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function gm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bm(t)),t=km(e.get(n),t);return bm(t)}function km(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function bm(e){return e+"\x01\x01"}function wm(e){var t=e.length;if(gv(t>=2),2===t)return gv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Uv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&yv(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:yv()}a=o+2}return new Uv(r)}pm.ae=-1;var xm=["userId","batchId"];function _m(e,t){return[e,gm(t)]}function Im(e,t,n){return[e,gm(t),n]}var Em={},Sm=["prefixPath","collectionGroup","readTime","documentId"],Tm=["prefixPath","collectionGroup","documentId"],Cm=["collectionGroup","readTime","prefixPath","documentId"],Nm=["canonicalId","targetId"],Am=["targetId","path"],Dm=["path","targetId"],Rm=["collectionId","parent"],Pm=["indexId","uid"],Om=["uid","sequenceNumber"],Lm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jm=["indexId","uid","orderedDocumentKey"],Mm=["userId","collectionPath","documentId"],Fm=["userId","collectionPath","largestBatchId"],Um=["userId","collectionGroup","largestBatchId"],Vm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zm=[].concat(c(Vm),["documentOverlays"]),Bm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qm=Bm,Gm=[].concat(qm,["indexConfiguration","indexState","indexEntries"]),Km=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return p(n)}(Zv);function Wm(e,t){var n=kv(e);return im.O(n.ue,t)}function Hm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ym(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Jm=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||Xm.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new $m(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new $m(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new $m(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new $m(this.root,e,this.comparator,!0)}}]),e}(),$m=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Xm=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw yv();if(this.right.isRed())throw yv();var e=this.left.check();if(e!==this.right.check())throw yv();return e+(this.isRed()?0:1)}}]),e}();Xm.EMPTY=null,Xm.RED=!0,Xm.BLACK=!1,Xm.EMPTY=new(function(){function e(){l(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw yv()}},{key:"value",get:function(){throw yv()}},{key:"color",get:function(){throw yv()}},{key:"left",get:function(){throw yv()}},{key:"right",get:function(){throw yv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Xm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Zm=function(){function e(t){l(this,e),this.comparator=t,this.data=new Jm(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ey(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ey(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ey=function(){function e(t){l(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ty(e){return e.hasNext()?e.getNext():void 0}var ny=function(){function e(t){l(this,e),this.fields=t,t.sort(zv.comparator)}return p(e,[{key:"unionWith",value:function(t){var n,r=new Zm(zv.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=T(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ov(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),ry=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return p(n)}(x(Error));var iy=function(e){function t(e){l(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Pv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ry("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();iy.EMPTY_BYTE_STRING=new iy("");var ay=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oy(e){if(gv(!!e),"string"==typeof e){var t=0,n=ay.exec(e);if(gv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sy(e.seconds),nanos:sy(e.nanos)}}function sy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uy(e){return"string"==typeof e?iy.fromBase64String(e):iy.fromUint8Array(e)}function cy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ly(e){var t=e.mapValue.fields.__previous_value__;return cy(t)?ly(t):t}function fy(e){var t=oy(e.mapValue.fields.__local_write_time__.timestampValue);return new jv(t.seconds,t.nanos)}var hy=p((function e(t,n,r,i,a,o,s,u,c){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),dy=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),py={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vy={nullValue:"NULL_VALUE"};function my(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cy(e)?4:Ay(e)?9007199254740991:10:yv()}function yy(e,t){if(e===t)return!0;var n=my(e);if(n!==my(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fy(e).isEqual(fy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=oy(e.timestampValue),r=oy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uy(e.bytesValue).isEqual(uy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sy(e.geoPointValue.latitude)===sy(t.geoPointValue.latitude)&&sy(e.geoPointValue.longitude)===sy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sy(e.integerValue)===sy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=sy(e.doubleValue),r=sy(t.doubleValue);return n===r?mm(n)===mm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ov(e.arrayValue.values||[],t.arrayValue.values||[],yy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hm(n)!==Hm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yy(n[i],r[i])))return!1;return!0}(e,t);default:return yv()}}function gy(e,t){return void 0!==(e.values||[]).find((function(e){return yy(e,t)}))}function ky(e,t){if(e===t)return 0;var n=my(e),r=my(t);if(n!==r)return Pv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=sy(e.integerValue||e.doubleValue),r=sy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return by(e.timestampValue,t.timestampValue);case 4:return by(fy(e),fy(t));case 5:return Pv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=uy(e),r=uy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Pv(n[i],r[i]);if(0!==a)return a}return Pv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Pv(sy(e.latitude),sy(t.latitude));return 0!==n?n:Pv(sy(e.longitude),sy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ky(n[i],r[i]);if(a)return a}return Pv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===py.mapValue&&t===py.mapValue)return 0;if(e===py.mapValue)return 1;if(t===py.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Pv(r[o],a[o]);if(0!==s)return s;var u=ky(n[r[o]],i[a[o]]);if(0!==u)return u}return Pv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw yv()}}function by(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pv(e,t);var n=oy(e),r=oy(t),i=Pv(n.seconds,r.seconds);return 0!==i?i:Pv(n.nanos,r.nanos)}function wy(e){return xy(e)}function xy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=oy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return uy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Bv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=xy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(xy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):yv()}function _y(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Iy(e){return!!e&&"integerValue"in e}function Ey(e){return!!e&&"arrayValue"in e}function Sy(e){return!!e&&"nullValue"in e}function Ty(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Cy(e){return!!e&&"mapValue"in e}function Ny(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ny(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ny(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ay(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dy(e){return"nullValue"in e?vy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?_y(dy.empty(),Bv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:yv()}function Ry(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?_y(dy.empty(),Bv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?py:yv()}function Py(e,t){var n=ky(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Oy(e,t){var n=ky(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ly=function(){function e(t){l(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Cy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ny(t)}},{key:"setAll",value:function(e){var t=this,n=zv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ny(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Cy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return yy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Cy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qm(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ny(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function jy(e){var t=[];return Qm(e.fields,(function(e,n){var r=new zv([e]);if(Cy(n)){var i=jy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new ny(t)}var My=function(){function e(t,n,r,i,a,o,s){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Mv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ly.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ly.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Mv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Mv.min(),Mv.min(),Mv.min(),Ly.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Mv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Mv.min(),Mv.min(),Ly.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Mv.min(),Mv.min(),Ly.empty(),2)}}]),e}(),Fy=p((function e(t,n){l(this,e),this.position=t,this.inclusive=n}));function Uy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Bv.comparator(Bv.fromName(o.referenceValue),n.key):ky(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Vy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yy(e.position[n],t.position[n]))return!1;return!0}var zy=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function By(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var qy=p((function e(){l(this,e)})),Gy=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ky(t,this.value)):null!==t&&my(this.value)===my(t)&&this.matchesComparison(ky(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new eg(e,t,r):"array-contains"===t?new ig(e,r):"in"===t?new ag(e,r):"not-in"===t?new og(e,r):"array-contains-any"===t?new sg(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new tg(e,n):new ng(e,n)}}]),n}(qy),Ky=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return p(n,[{key:"matches",value:function(e){return Wy(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(qy);function Wy(e){return"and"===e.op}function Hy(e){return"or"===e.op}function Qy(e){return Yy(e)&&Wy(e)}function Yy(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Ky)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Jy(e){if(e instanceof Gy)return e.field.canonicalString()+e.op.toString()+wy(e.value);if(Qy(e))return e.filters.map((function(e){return Jy(e)})).join(",");var t=e.filters.map((function(e){return Jy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function $y(e,t){return e instanceof Gy?function(e,t){return t instanceof Gy&&e.op===t.op&&e.field.isEqual(t.field)&&yy(e.value,t.value)}(e,t):e instanceof Ky?function(e,t){return t instanceof Ky&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&$y(n,t.filters[r])}),!0)}(e,t):void yv()}function Xy(e,t){var n=e.filters.concat(t);return Ky.create(n,e.op)}function Zy(e){return e instanceof Gy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wy(e.value))}(e):e instanceof Ky?function(e){return e.op.toString()+" {"+e.getFilters().map(Zy).join(" ,")+"}"}(e):"Filter"}var eg=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=Bv.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=Bv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Gy),tg=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=rg("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gy),ng=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=rg("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gy);function rg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Bv.fromName(e.referenceValue)}))}var ig=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ey(t)&&gy(t.arrayValue,this.value)}}]),n}(Gy),ag=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&gy(this.value.arrayValue,t)}}]),n}(Gy),og=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(gy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!gy(this.value.arrayValue,t)}}]),n}(Gy),sg=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return gy(t.value.arrayValue,e)}))}}]),n}(Gy),ug=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.he=null}));function cg(e){return new ug(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function lg(e){var t=kv(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Jy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),vm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return wy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return wy(e)})).join(",")),t.he=n}return t.he}function fg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!By(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!$y(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vy(e.startAt,t.startAt)&&Vy(e.endAt,t.endAt)}function hg(e){return Bv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function dg(e,t){return e.filters.filter((function(e){return e instanceof Gy&&e.field.isEqual(t)}))}function pg(e,t,n){var r,i=vy,a=!0,o=T(dg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=vy,c=!0;switch(s.op){case"<":case"<=":u=Dy(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=vy}Py({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Py({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function vg(e,t,n){var r,i=py,a=!0,o=T(dg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=py,c=!0;switch(s.op){case">=":case">":u=Ry(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=py}Oy({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Oy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var mg=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function yg(e,t,n,r,i,a,o,s){return new mg(e,t,n,r,i,a,o,s)}function gg(e){return new mg(e)}function kg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wg(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function xg(e){return null!==e.collectionGroup}function _g(e){var t=kv(e);if(null===t.Pe){t.Pe=[];var n=wg(t),r=bg(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new zy(n)),t.Pe.push(new zy(zv.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.Pe.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new zy(zv.keyField(),u))}}}return t.Pe}function Ig(e){var t=kv(e);if(!t.Ie)if("F"===t.limitType)t.Ie=cg(t.path,t.collectionGroup,_g(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(_g(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new zy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Fy(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Fy(t.startAt.position,t.startAt.inclusive):null;t.Ie=cg(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.Ie}function Eg(e,t){t.getFirstInequalityField(),wg(e);var n=e.filters.concat([t]);return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sg(e,t,n){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tg(e,t){return fg(Ig(e),Ig(t))&&e.limitType===t.limitType}function Cg(e){return"".concat(lg(Ig(e)),"|lt:").concat(e.limitType)}function Ng(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Zy(e)})).join(", "),"]")),vm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return wy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return wy(e)})).join(",")),"Target(".concat(t,")")}(Ig(e)),"; limitType=").concat(e.limitType,")")}function Ag(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Bv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(_g(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Uy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_g(e),t))&&!(e.endAt&&!function(e,t,n){var r=Uy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_g(e),t))}(e,t)}function Dg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rg(e){return function(t,n){var r,i=!1,a=T(_g(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Pg(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Pg(e,t,n){var r=e.field.isKeyField()?Bv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ky(r,i):yv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yv()}}var Og=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qm(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ym(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Lg=new Jm(Bv.comparator);function jg(){return Lg}var Mg=new Jm(Bv.comparator);function Fg(){for(var e=Mg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ug(e){var t=Mg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Vg(){return Bg()}function zg(){return Bg()}function Bg(){return new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var qg=new Jm(Bv.comparator),Gg=new Zm(Bv.comparator);function Kg(){for(var e=Gg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Wg=new Zm(Pv);function Hg(){return Wg}function Qg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(t)?"-0":t}}function Yg(e){return{integerValue:""+e}}function Jg(e,t){return ym(t)?Yg(t):Qg(e,t)}var $g=p((function e(){l(this,e),this._=void 0}));function Xg(e,t,n){return e instanceof tk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&cy(t)&&(t=ly(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nk?rk(e,t):e instanceof ik?ak(e,t):function(e,t){var n=ek(e,t),r=sk(n)+sk(e.Te);return Iy(n)&&Iy(e.Te)?Yg(r):Qg(e.serializer,r)}(e,t)}function Zg(e,t,n){return e instanceof nk?rk(e,t):e instanceof ik?ak(e,t):n}function ek(e,t){return e instanceof ok?function(e){return Iy(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var tk=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}($g),nk=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}($g);function rk(e,t){var n,r=uk(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return yy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ik=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}($g);function ak(e,t){var n,r=uk(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!yy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ok=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return p(n)}($g);function sk(e){return sy(e.integerValue||e.doubleValue)}function uk(e){return Ey(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ck=p((function e(t,n){l(this,e),this.field=t,this.transform=n}));var lk=p((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),fk=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function hk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var dk=p((function e(){l(this,e)}));function pk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sk(e.key,fk.none()):new kk(e.key,e.data,fk.none());var n,r=e.data,i=Ly.empty(),a=new Zm(zv.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new bk(e.key,i,new ny(a.toArray()),fk.none())}function vk(e,t,n){e instanceof kk?function(e,t,n){var r=e.value.clone(),i=xk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bk?function(e,t,n){if(hk(e.precondition,t)){var r=xk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(wk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mk(e,t,n,r){return e instanceof kk?function(e,t,n,r){if(!hk(e.precondition,t))return n;var i=e.value.clone(),a=_k(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bk?function(e,t,n,r){if(!hk(e.precondition,t))return n;var i=_k(e.fieldTransforms,r,t),a=t.data;return a.setAll(wk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return hk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function yk(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=ek(a.transform,o||null);null!=s&&(null===r&&(r=Ly.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function gk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ov(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nk&&t instanceof nk||e instanceof ik&&t instanceof ik?Ov(e.elements,t.elements,yy):e instanceof ok&&t instanceof ok?yy(e.Te,t.Te):e instanceof tk&&t instanceof tk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var kk=function(e){m(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dk),bk=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return p(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(dk);function wk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function xk(e,t,n){var r=new Map;gv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Zg(o,s,n[i]))}return r}function _k(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Xg(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ik,Ek,Sk=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dk),Tk=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dk),Ck=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&vk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=mk(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=mk(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=zg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=pk(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Mv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Kg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ov(this.mutations,e.mutations,(function(e,t){return gk(e,t)}))&&Ov(this.baseMutations,e.baseMutations,(function(e,t){return gk(e,t)}))}}]),e}(),Nk=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){gv(t.mutations.length===r.length);for(var i=qg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ak=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Dk=p((function e(t,n){l(this,e),this.count=t,this.unchangedNames=n}));function Rk(e){switch(e){default:return yv();case bv.CANCELLED:case bv.UNKNOWN:case bv.DEADLINE_EXCEEDED:case bv.RESOURCE_EXHAUSTED:case bv.INTERNAL:case bv.UNAVAILABLE:case bv.UNAUTHENTICATED:return!1;case bv.INVALID_ARGUMENT:case bv.NOT_FOUND:case bv.ALREADY_EXISTS:case bv.PERMISSION_DENIED:case bv.FAILED_PRECONDITION:case bv.ABORTED:case bv.OUT_OF_RANGE:case bv.UNIMPLEMENTED:case bv.DATA_LOSS:return!0}}function Pk(e){if(void 0===e)return pv("GRPC error has no .code"),bv.UNKNOWN;switch(e){case Ik.OK:return bv.OK;case Ik.CANCELLED:return bv.CANCELLED;case Ik.UNKNOWN:return bv.UNKNOWN;case Ik.DEADLINE_EXCEEDED:return bv.DEADLINE_EXCEEDED;case Ik.RESOURCE_EXHAUSTED:return bv.RESOURCE_EXHAUSTED;case Ik.INTERNAL:return bv.INTERNAL;case Ik.UNAVAILABLE:return bv.UNAVAILABLE;case Ik.UNAUTHENTICATED:return bv.UNAUTHENTICATED;case Ik.INVALID_ARGUMENT:return bv.INVALID_ARGUMENT;case Ik.NOT_FOUND:return bv.NOT_FOUND;case Ik.ALREADY_EXISTS:return bv.ALREADY_EXISTS;case Ik.PERMISSION_DENIED:return bv.PERMISSION_DENIED;case Ik.FAILED_PRECONDITION:return bv.FAILED_PRECONDITION;case Ik.ABORTED:return bv.ABORTED;case Ik.OUT_OF_RANGE:return bv.OUT_OF_RANGE;case Ik.UNIMPLEMENTED:return bv.UNIMPLEMENTED;case Ik.DATA_LOSS:return bv.DATA_LOSS;default:return yv()}}(Ek=Ik||(Ik={}))[Ek.OK=0]="OK",Ek[Ek.CANCELLED=1]="CANCELLED",Ek[Ek.UNKNOWN=2]="UNKNOWN",Ek[Ek.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ek[Ek.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ek[Ek.NOT_FOUND=5]="NOT_FOUND",Ek[Ek.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ek[Ek.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ek[Ek.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ek[Ek.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ek[Ek.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ek[Ek.ABORTED=10]="ABORTED",Ek[Ek.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ek[Ek.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ek[Ek.INTERNAL=13]="INTERNAL",Ek[Ek.UNAVAILABLE=14]="UNAVAILABLE",Ek[Ek.DATA_LOSS=15]="DATA_LOSS";var Ok=function(){function e(){l(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return p(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Lk}},{key:"getOrCreateInstance",value:function(){return null===Lk&&(Lk=new e),Lk}}]),e}(),Lk=null;function jk(){return new TextEncoder}var Mk=new sv([4294967295,4294967295],0);function Fk(e){var t=jk().encode(e),n=new ov;return n.update(t),new Uint8Array(n.digest())}function Uk(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new sv([n,r],0),new sv([i,a],0)]}var Vk=function(){function e(t,n,r){if(l(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zk("Invalid padding: ".concat(n));if(r<0)throw new zk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new zk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new zk("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=sv.fromNumber(this.de)}return p(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(sv.fromNumber(n)));return 1===r.compare(Mk)&&(r=new sv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=E(Uk(Fk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=E(Uk(Fk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),zk=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return p(n)}(x(Error)),Bk=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,qk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Mv.min(),i,new Jm(Pv),jg(),Kg())}}]),e}(),qk=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Kg(),Kg(),Kg())}}]),e}(),Gk=p((function e(t,n,r,i){l(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),Kk=p((function e(t,n){l(this,e),this.targetId=t,this.pe=n})),Wk=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Hk=function(){function e(){l(this,e),this.ye=0,this.we=Jk(),this.Se=iy.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return p(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=Kg(),t=Kg(),n=Kg();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yv()}})),new qk(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=Jk()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),Qk=function(){function e(t){l(this,e),this.qe=t,this.Qe=new Map,this.Ke=jg(),this.$e=Yk(),this.Ue=new Jm(Pv)}return p(e,[{key:"We",value:function(e){var t,n=T(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(s){n.e(s)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(s){a.e(s)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:yv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(hg(o))if(0===i){var s=new Bv(o.path);this.ze(r,s,My.newNoDocument(s,Mv.min()))}else gv(1===i);else{var u=this.et(r);if(u!==i){var c=this.tt(e,u);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=Ok.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,s,u,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(c=null===(u=null==f?void 0:f.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,u,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,s,u=i.bits,c=u.bitmap,l=void 0===c?"":c,f=u.padding,h=void 0===f?0:f,d=i.hashCount,p=void 0===d?0:d;try{o=uy(l).toUint8Array()}catch(e){if(e instanceof ry)return vv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{s=new Vk(o,h,p)}catch(e){return vv(e instanceof zk?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return s.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===s.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&hg(a.target)){var o=new Bv(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,My.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=Kg();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new Bk(e,n,this.Ue,this.Ke,r);return this.Ke=jg(),this.$e=Yk(),this.Ue=new Jm(Pv),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new Hk,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new Zm(Pv),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||dv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new Hk),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Yk(){return new Jm(Bv.comparator)}function Jk(){return new Jm(Bv.comparator)}var $k={asc:"ASCENDING",desc:"DESCENDING"},Xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zk={and:"AND",or:"OR"},eb=p((function e(t,n){l(this,e),this.databaseId=t,this.useProto3Json=n}));function tb(e,t){return e.useProto3Json||vm(t)?t:{value:t}}function nb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function rb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ib(e,t){return nb(e,t.toTimestamp())}function ab(e){return gv(!!e),Mv.fromTimestamp(function(e){var t=oy(e);return new jv(t.seconds,t.nanos)}(e))}function ob(e,t){return function(e){return new Uv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sb(e){var t=Uv.fromString(e);return gv(Ab(t)),t}function ub(e,t){return ob(e.databaseId,t.path)}function cb(e,t){var n=sb(t);if(n.get(1)!==e.databaseId.projectId)throw new wv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bv(db(n))}function lb(e,t){return ob(e.databaseId,t)}function fb(e){var t=sb(e);return 4===t.length?Uv.emptyPath():db(t)}function hb(e){return new Uv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function db(e){return gv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pb(e,t,n){return{name:ub(e,t),fields:n.value.mapValue.fields}}function vb(e,t,n){var r=cb(e,t.name),i=ab(t.updateTime),a=t.createTime?ab(t.createTime):Mv.min(),o=new Ly({mapValue:{fields:t.fields}}),s=My.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function mb(e,t){return"found"in t?function(e,t){gv(!!t.found),t.found.name,t.found.updateTime;var n=cb(e,t.found.name),r=ab(t.found.updateTime),i=t.found.createTime?ab(t.found.createTime):Mv.min(),a=new Ly({mapValue:{fields:t.found.fields}});return My.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){gv(!!t.missing),gv(!!t.readTime);var n=cb(e,t.missing),r=ab(t.readTime);return My.newNoDocument(n,r)}(e,t):yv()}function yb(e,t){var n;if(t instanceof kk)n={update:pb(e,t.key,t.value)};else if(t instanceof Sk)n={delete:ub(e,t.key)};else if(t instanceof bk)n={update:pb(e,t.key,t.data),updateMask:Nb(t.fieldMask)};else{if(!(t instanceof Tk))return yv();n={verify:ub(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof tk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ik)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ok)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw yv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ib(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yv()}(e,t.precondition)),n}function gb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?fk.updateTime(ab(e.updateTime)):void 0!==e.exists?fk.exists(e.exists):fk.none()}(t.currentDocument):fk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)gv("REQUEST_TIME"===t.setToServerValue),n=new tk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new nk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ik(i)}else"increment"in t?n=new ok(e,t.increment):yv();var a=zv.fromServerFormat(t.fieldPath);return new ck(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=cb(e,t.update.name),a=new Ly({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ny(t.map((function(e){return zv.fromServerFormat(e)})))}(t.updateMask);return new bk(i,a,o,n,r)}return new kk(i,a,n,r)}if(t.delete){var s=cb(e,t.delete);return new Sk(s,n)}if(t.verify){var u=cb(e,t.verify);return new Tk(u,n)}return yv()}function kb(e,t){return{documents:[lb(e,t.path)]}}function bb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=lb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=lb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Cb(Ky.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Sb(e.field),direction:_b(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=tb(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wb(e){var t=fb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){gv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=xb(e);return t instanceof Ky&&Qy(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new zy(Tb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return vm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Fy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Fy(n,t)}(n.endAt)),yg(t,i,s,o,u,"F",c,l)}function xb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Tb(e.unaryFilter.field);return Gy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Tb(e.unaryFilter.field);return Gy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Tb(e.unaryFilter.field);return Gy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Tb(e.unaryFilter.field);return Gy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yv()}}(e):void 0!==e.fieldFilter?function(e){return Gy.create(Tb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ky.create(e.compositeFilter.filters.map((function(e){return xb(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yv()}}(e.compositeFilter.op))}(e):yv()}function _b(e){return $k[e]}function Ib(e){return Xk[e]}function Eb(e){return Zk[e]}function Sb(e){return{fieldPath:e.canonicalString()}}function Tb(e){return zv.fromServerFormat(e.fieldPath)}function Cb(e){return e instanceof Gy?function(e){if("=="===e.op){if(Ty(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NAN"}};if(Sy(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ty(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NOT_NAN"}};if(Sy(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sb(e.field),op:Ib(e.op),value:e.value}}}(e):e instanceof Ky?function(e){var t=e.getFilters().map((function(e){return Cb(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Eb(e.op),filters:t}}}(e):yv()}function Nb(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ab(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Db=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:iy.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Rb=p((function e(t){l(this,e),this.ct=t}));function Pb(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ob(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ub(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nb(e,t.version.toTimestamp()),createTime:nb(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Lb(t.version)};else{if(!t.isUnknownDocument())return yv();r.unknownDocument={path:n.path.toArray(),version:Lb(t.version)}}return r}function Ob(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Lb(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function jb(e){var t=new jv(e.seconds,e.nanoseconds);return Mv.fromTimestamp(t)}function Mb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return gb(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return gb(e.ct,t)})),s=jv.fromMillis(t.localWriteTimeMs);return new Ck(t.batchId,s,n,o)}function Fb(e){var t,n=jb(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?jb(e.lastLimboFreeSnapshotVersion):Mv.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return gv(1===e.documents.length),Ig(gg(fb(e.documents[0])))}(e.query):function(e){return Ig(wb(e))}(e.query),new Db(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,iy.fromBase64String(e.resumeToken))}function Ub(e,t){var n,r=Lb(t.snapshotVersion),i=Lb(t.lastLimboFreeSnapshotVersion);n=hg(t.target)?kb(e.ct,t.target):bb(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Vb(e){var t=wb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sg(t,t.limit,"L"):t}function zb(e,t){return new Ak(t.largestBatchId,gb(e.ct,t.overlayMutation))}function Bb(e,t){var n=t.path.lastSegment();return[e,gm(t.path.popLast()),n]}function qb(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Lb(r.readTime),documentKey:gm(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gb=function(){function e(){l(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Kb(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:jb(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Kb(e).put(function(e){return{bundleId:e.id,createTime:Lb(ab(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Wb(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Vb(e.bundledQuery),readTime:jb(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Wb(e).put(function(e){return{name:e.name,readTime:Lb(ab(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Kb(e){return Wm(e,"bundles")}function Wb(e){return Wm(e,"namedQueries")}var Hb=function(){function e(t,n){l(this,e),this.serializer=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return Qb(e).get(Bb(this.userId,t)).next((function(e){return e?zb(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vg();return nm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ak(t,a);i.push(r.ht(e,o))})),nm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(gm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Qb(e).J("collectionPathOverlayIndex",i))})),nm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Vg(),a=gm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qb(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=zb(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Vg(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qb(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=zb(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Qb(e).put(function(e,t,n){var r=E(Bb(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:yb(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Qb(e){return Wm(e,"documentOverlays")}var Yb=function(){function e(){l(this,e)}return p(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(sy(e.integerValue));else if("doubleValue"in e){var n=sy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),mm(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(uy(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?Ay(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):yv()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Bv.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function Jb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $b(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Jb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Yb.bt=new Yb;var Xb=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=$b(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=$b(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Zb=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),ew=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),tw=function(){function e(){l(this,e),this.Gt=new Xb,this.zt=new Zb(this.Gt),this.jt=new ew(this.Gt)}return p(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),nw=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function rw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=iw(e.arrayValue,t.arrayValue))?n:0!==(n=iw(e.directionalValue,t.directionalValue))?n:Bv.comparator(e.documentKey,t.documentKey)}function iw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var aw=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"en",value:function(e){gv(e.collectionGroup===this.collectionId);var t=Gv(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Kv(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],s))return!1}return!0}},{key:"tn",value:function(e){var t,n=T(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function ow(e){var t,n;if(gv(e instanceof Gy||e instanceof Ky),e instanceof Gy){if(e instanceof ag){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Gy.create(e.field,"==",t)})))||[];return Ky.create(r,"or")}return e}var i=e.filters.map((function(e){return ow(e)}));return Ky.create(i,e.op)}function sw(e){if(0===e.getFilters().length)return[];var t=fw(ow(e));return gv(lw(t)),uw(t)||cw(t)?[t]:t.getFilters()}function uw(e){return e instanceof Gy}function cw(e){return e instanceof Ky&&Qy(e)}function lw(e){return uw(e)||cw(e)||function(e){if(e instanceof Ky&&Hy(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!uw(r)&&!cw(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function fw(e){if(gv(e instanceof Gy||e instanceof Ky),e instanceof Gy)return e;if(1===e.filters.length)return fw(e.filters[0]);var t=e.filters.map((function(e){return fw(e)})),n=Ky.create(t,e.op);return lw(n=pw(n))?n:(gv(n instanceof Ky),gv(Wy(n)),gv(n.filters.length>1),n.filters.reduce((function(e,t){return hw(e,t)})))}function hw(e,t){var n;return gv(e instanceof Gy||e instanceof Ky),gv(t instanceof Gy||t instanceof Ky),n=e instanceof Gy?t instanceof Gy?function(e,t){return Ky.create([e,t],"and")}(e,t):dw(e,t):t instanceof Gy?dw(t,e):function(e,t){if(gv(e.filters.length>0&&t.filters.length>0),Wy(e)&&Wy(t))return Xy(e,t.getFilters());var n=Hy(e)?e:t,r=Hy(e)?t:e,i=n.filters.map((function(e){return hw(e,r)}));return Ky.create(i,"or")}(e,t),pw(n)}function dw(e,t){if(Wy(t))return Xy(t,e.getFilters());var n=t.filters.map((function(t){return hw(e,t)}));return Ky.create(n,"or")}function pw(e){if(gv(e instanceof Gy||e instanceof Ky),e instanceof Gy)return e;var t=e.getFilters();if(1===t.length)return pw(t[0]);if(Yy(e))return e;var n=t.map((function(e){return pw(e)})),r=[];return n.forEach((function(t){t instanceof Gy?r.push(t):t instanceof Ky&&(t.op===e.op?r.push.apply(r,c(t.filters)):r.push(t))})),1===r.length?r[0]:Ky.create(r,e.op)}var vw=function(){function e(){l(this,e),this.sn=new mw}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),nm.resolve()}},{key:"getCollectionParents",value:function(e,t){return nm.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return nm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return nm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return nm.resolve(null)}},{key:"getIndexType",value:function(e,t){return nm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return nm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return nm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return nm.resolve(Jv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return nm.resolve(Jv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return nm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return nm.resolve()}}]),e}(),mw=function(){function e(){l(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zm(Uv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Zm(Uv.comparator)).toArray()}}]),e}(),yw=new Uint8Array(0),gw=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.on=new mw,this._n=new Og((function(e){return lg(e)}),(function(e,t){return fg(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:gm(i)};return kw(e).put(a)}return nm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lv(t),""],!1,!0);return kw(e).G(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(wm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ww(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xw(e);return a.next((function(e){o.put(qb(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ww(e),r=xw(e),i=bw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=bw(e),i=!0,a=new Map;return nm.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Kg(),o=[];return nm.forEach(a,(function(i,a){dv("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(lg(t)));var s=function(e,t){var n=Gv(t);if(void 0===n)return null;var r,i=T(dg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=T(Kv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=T(dg(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=T(Kv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?pg(e,o.fieldPath,e.startAt):vg(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Fy(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(Kv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?vg(e,o.fieldPath,e.endAt):pg(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Fy(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,u),p=n.hn(i.indexId,s,f,c.inclusive,h,l.inclusive,d);return nm.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Bv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return nm.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:sw(Ky.create(e.filters,"and")).map((function(t){return cg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),l=u/(null!=t?t.length:1),f=[],h=function(){var u=t?s.Pn(t[d/l]):yw,h=s.In(e,u,n[d%l],r),p=s.Tn(e,u,i[d%l],a),v=o.map((function(t){return s.In(e,u,t,!0)}));f.push.apply(f,c(s.createRange(h,p,v)))},d=0;d<u;++d)h();return f}},{key:"In",value:function(e,t,n,r){var i=new nw(e,Bv.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new nw(e,Bv.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new aw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return nm.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Zm(zv.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=T(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new tw,i=T(Kv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ht(a.kind);Yb.bt.Pt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new tw;return Yb.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new tw;return Yb.bt.Pt(_y(this.databaseId,t),n.Ht(function(e){var t=Kv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new tw);var i,a=0,o=T(Kv(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=T(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.An(t,u.fieldPath)&&Ey(c))r=this.Rn(r,u,c);else{var h=f.Ht(u.kind);Yb.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=c(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,l=T(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=new tw;h.seed(f.Wt()),Yb.bt.Pt(u,h.Ht(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Gy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ww(e),i=xw(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return nm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Hv(t.sequenceNumber,new Jv(jb(t.readTime),new Bv(wm(t.documentKey)),t.largestBatchId)):Hv.empty(),r=e.fields.map((function(e){var t=E(e,2),n=t[0],r=t[1];return new Wv(zv.fromServerFormat(n),r)}));return new qv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Pv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ww(e),a=xw(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return nm.forEach(t,(function(t){return a.put(qb(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return nm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?nm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),nm.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?nm.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return bw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return bw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=bw(e),i=new Zm(rw);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new nw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new Zm(rw),r=this.En(t,e);if(null==r)return n;var i=Gv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ey(a)){var o,s=T(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new nw(t.indexId,e.key,this.Pn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new nw(t.indexId,e.key,yw,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;dv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=ty(a),u=ty(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=ty(o)):l?(i(s),s=ty(a)):(s=ty(a),u=ty(o))}}(r,i,rw,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),nm.waitFor(o)}},{key:"mn",value:function(e){var t=1;return xw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return rw(e,t)})).filter((function(e,t,n){return!t||0!==rw(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=rw(o,e),u=rw(o,t);if(0===s)r[0]=e.Jt();else if(s>0&&u<0)r.push(o),r.push(o.Jt());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,yw,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,yw,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return rw(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(_w)}},{key:"getMinOffset",value:function(e,t){var n=this;return nm.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||yv()}))})).next(_w)}}]),e}();function kw(e){return Wm(e,"collectionParents")}function bw(e){return Wm(e,"indexEntries")}function ww(e){return Wm(e,"indexConfiguration")}function xw(e){return Wm(e,"indexState")}function _w(e){gv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;$v(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Jv(t.readTime,t.documentKey,n)}var Iw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Sw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){gv(1===s)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Im(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return nm.waitFor(a).next((function(){return l}))}function Tw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yv();t=e.noDocument}return JSON.stringify(t).length}Ew.DEFAULT_COLLECTION_PERCENTILE=10,Ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ew.DEFAULT=new Ew(41943040,Ew.DEFAULT_COLLECTION_PERCENTILE,Ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ew.DISABLED=new Ew(-1,0,0);var Cw=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Aw(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Dw(e),o=Aw(e);return o.add({}).next((function(s){gv("number"==typeof s);var u,c=new Ck(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return yb(e.ct,t)})),i=n.mutations.map((function(t){return yb(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Zm((function(e,t){return Pv(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Im(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Em))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[s]=c.keys()})),nm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Aw(e).get(t).next((function(e){return e?(gv(e.userId===n.userId),Mb(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?nm.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Aw(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(gv(t.batchId>=r),a=Mb(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Aw(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Aw(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Mb(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=_m(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dw(e).Z({range:i},(function(r,i,o){var s=E(r,3),u=s[0],c=s[1],l=s[2],f=wm(c);if(u===n.userId&&t.path.isEqual(f))return Aw(e).get(l).next((function(e){if(!e)throw yv();gv(e.userId===n.userId),a.push(Mb(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zm(Pv),i=[];return t.forEach((function(t){var a=_m(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Dw(e).Z({range:o},(function(e,i,a){var o=E(e,3),s=o[0],u=o[1],c=o[2],l=wm(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),nm.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=_m(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Zm(Pv);return Dw(e).Z({range:o},(function(e,t,a){var o=E(e,3),u=o[0],c=o[1],l=o[2],f=wm(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.vn(e,s)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Aw(e).get(t).next((function(e){if(null===e)throw yv();gv(e.userId===n.userId),r.push(Mb(n.serializer,e))})))})),nm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Sw(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),nm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return nm.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Dw(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=wm(e[1]);i.push(a)}else r.done()})).next((function(){gv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Nw(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return Rw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return gv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Nw(e,t,n){var r=_m(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Dw(e).Z({range:a,Y:!0},(function(e,n,r){var a=E(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Aw(e){return Wm(e,"mutations")}function Dw(e){return Wm(e,"documentMutations")}function Rw(e){return Wm(e,"mutationQueues")}var Pw=function(){function e(t){l(this,e),this.Mn=t}return p(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),Ow=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.serializer=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new Pw(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return Mv.fromTimestamp(new jv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Lw(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return gv(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Lw(e).Z((function(o,s){var u=Fb(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return nm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Lw(e).Z((function(e,n){var r=Fb(n);t(r)}))}},{key:"Nn",value:function(e){return jw(e).get("targetGlobalKey").next((function(e){return gv(null!==e),e}))}},{key:"Bn",value:function(e,t){return jw(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return Lw(e).put(Ub(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=lg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Lw(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Fb(n);fg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Mw(e);return t.forEach((function(t){var o=gm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),nm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Mw(e);return nm.forEach(t,(function(t){var a=gm(t.path);return nm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Mw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Mw(e),i=Kg();return r.Z({range:n,Y:!0},(function(e,t,n){var r=wm(e[1]),a=new Bv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=gm(t.path),r=IDBKeyRange.bound([n],[Lv(n)],!1,!0),i=0;return Mw(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=E(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return Lw(e).get(t).next((function(e){return e?Fb(e):null}))}}]),e}();function Lw(e){return Wm(e,"targets")}function jw(e){return Wm(e,"targetGlobal")}function Mw(e){return Wm(e,"targetDocuments")}function Fw(e,t){var n=E(e,2),r=n[0],i=n[1],a=E(t,2),o=a[0],s=a[1],u=Pv(r,o);return 0===u?Pv(i,s):u}var Uw=function(){function e(t){l(this,e),this.qn=t,this.buffer=new Zm(Fw),this.Qn=0}return p(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Fw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Vw=function(){function e(t,n,r){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return p(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;dv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!sm(e.t0)){e.next=12;break}dv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,em(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),zw=function(){function e(t,n){l(this,e),this.Gn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return nm.resolve(pm.ae);var r=new Uw(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(dv("LruGarbageCollector","Garbage collection skipped; disabled"),nm.resolve(Iw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(dv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Iw):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(dv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),hv()<=Ut.DEBUG&&dv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),nm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Bw(e,t){return new zw(e,t)}var qw=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=Bw(this,n)}return p(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Gw(e,n)}},{key:"removeReference",value:function(e,t,n){return Gw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Gw(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return Rw(e).X((function(r){return Nw(e,r,t).next((function(e){return e&&(n=!0),nm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Mv.min()),Mw(e).delete(function(e){return[0,gm(e.path)]}(o))}))}));i.push(u)}})).next((function(){return nm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Gw(e,t)}},{key:"Yn",value:function(e,t){var n,r=Mw(e),i=pm.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=E(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==pm.ae&&t(new Bv(wm(n)),i),i=u,n=s):i=pm.ae})).next((function(){i!==pm.ae&&t(new Bv(wm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Gw(e,t){return Mw(e).put(function(e,t){return{targetId:0,path:gm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Kw=function(){function e(){l(this,e),this.changes=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,My.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ww=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Jw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Jw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ob(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=My.newInvalidDocument(t);return Jw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($w(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:My.newInvalidDocument(t)};return Jw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($w(t))},(function(e,i){r={document:n.er(t,i),size:Tw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=jg();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=jg(),i=new Jm(Bv.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,Tw(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return nm.resolve();var r=new Zm(Zw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound($w(r.first()),$w(r.last())),a=r.getIterator(),o=a.getNext();return Jw(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Bv.fromSegments([].concat(c(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W($w(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ob(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jw(e).G(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=jg(),o=T(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.er(Bv.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Ag(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=jg(),o=Xw(t,n),s=Xw(t,Jv.max());return Jw(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.er(Bv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Yw(e).get("remoteDocumentGlobalKey").next((function(e){return gv(!!e),e}))}},{key:"Xn",value:function(e,t){return Yw(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=vb(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Bv.fromSegments(t.noDocument.path),i=jb(t.noDocument.readTime);n=My.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return yv();var a=Bv.fromSegments(t.unknownDocument.path),o=jb(t.unknownDocument.version);n=My.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jv(e[0],e[1]);return Mv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Mv.min()))return n}return My.newInvalidDocument(e)}}]),e}();function Hw(e){return new Ww(e)}var Qw=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Zm((function(e,t){return Pv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Pb(t.sr.serializer,o);i=i.add(a.path.popLast());var c=Tw(u);r+=c-s.size,n.push(t.sr.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Pb(t.sr.serializer,o.convertToNoDocument(Mv.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),nm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Kw);function Yw(e){return Wm(e,"remoteDocumentGlobal")}function Jw(e){return Wm(e,"remoteDocumentsV14")}function $w(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xw(e,t){var n=t.documentKey.path.toArray();return[e,Ob(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Pv(n[a],r[a]))return i;return(i=Pv(n.length,r.length))||((i=Pv(n[n.length-2],r[r.length-2]))||Pv(n[n.length-1],r[r.length-1]))}var ex=p((function e(t,n){l(this,e),this.overlayedDocument=t,this.mutatedFields=n})),tx=function(){function e(t,n,r,i){l(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return p(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&mk(r.mutation,e,ny.empty(),jv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Kg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kg(),i=Vg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Fg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Vg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Kg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=jg(),a=Bg(),o=Bg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof bk)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),mk(o.mutation,t,o.mutation.getFieldMask(),jv.now())):a.set(t.key,ny.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new ex(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Bg(),i=new Jm((function(e,t){return e-t})),a=Kg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ny.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Kg()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=zg();c.forEach((function(e){if(!a.has(e)){var n=pk(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return nm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Bv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):nm.resolve(Vg()),s=-1,u=a;return o.next((function(t){return nm.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?nm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Kg())})).next((function(e){return{batchId:s,changes:Ug(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Bv(t)).next((function(e){var t=Fg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Fg();return this.indexManager.getCollectionParents(e,i).next((function(o){return nm.forEach(o,(function(o){var s=function(e,t){return new mg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,My.newInvalidDocument(r)))}));var n=Fg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&mk(a.mutation,i,ny.empty(),jv.now()),Ag(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),nx=function(){function e(t){l(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return nm.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ab(e.createTime)}}(t)),nm.resolve()}},{key:"getNamedQuery",value:function(e,t){return nm.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:Vb(e.bundledQuery),readTime:ab(e.readTime)}}(t)),nm.resolve()}}]),e}(),rx=function(){function e(){l(this,e),this.overlays=new Jm(Bv.comparator),this.cr=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return nm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vg();return nm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),nm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),nm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Vg(),i=t.length+1,a=new Bv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return nm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Jm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Vg(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Vg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return nm.resolve(u)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ak(t,n));var a=this.cr.get(t);void 0===a&&(a=Kg(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),ix=function(){function e(){l(this,e),this.lr=new Zm(ax.hr),this.Pr=new Zm(ax.Ir)}return p(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ax(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new ax(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new Bv(new Uv([])),r=new ax(n,e),i=new ax(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new Bv(new Uv([])),n=new ax(t,e),r=new ax(t,e+1),i=Kg();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ax(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ax=function(){function e(t,n){l(this,e),this.key=t,this.mr=n}return p(e,null,[{key:"hr",value:function(e,t){return Bv.comparator(e.key,t.key)||Pv(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return Pv(e.mr,t.mr)||Bv.comparator(e.key,t.key)}}]),e}(),ox=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Zm(ax.hr)}return p(e,[{key:"checkEmpty",value:function(e){return nm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ck(i,t,n,r);this.mutationQueue.push(a);var o,s=T(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.pr=this.pr.add(new ax(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return nm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return nm.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return nm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return nm.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return nm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ax(t,0),i=new ax(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),nm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zm(Pv);return t.forEach((function(e){var t=new ax(e,0),i=new ax(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),nm.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Bv.isDocumentKey(i)||(i=i.child(""));var a=new ax(new Bv(i),0),o=new Zm(Pv);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),nm.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;gv(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return nm.forEach(t.mutations,(function(i){var a=new ax(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ax(t,0),r=this.pr.firstAfterOrEqual(n);return nm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,nm.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),sx=function(){function e(t){l(this,e),this.Dr=t,this.docs=new Jm(Bv.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return nm.resolve(n?n.document.mutableCopy():My.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():My.newInvalidDocument(e))})),nm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=jg(),a=t.path,o=new Bv(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||$v(Yv(l),n)<=0||(r.has(l.key)||Ag(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return nm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){yv()}},{key:"vr",value:function(e,t){return nm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ux(this)}},{key:"getSize",value:function(e){return nm.resolve(this.size)}}]),e}(),ux=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).sr=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),nm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(Kw),cx=function(){function e(t){l(this,e),this.persistence=t,this.Cr=new Og((function(e){return lg(e)}),fg),this.lastRemoteSnapshotVersion=Mv.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new ix,this.targetCount=0,this.Or=Pw.xn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),nm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return nm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return nm.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),nm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),nm.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new Pw(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,nm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),nm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,nm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),nm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return nm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return nm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),nm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),nm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),nm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return nm.resolve(n)}},{key:"containsKey",value:function(e,t){return nm.resolve(this.Mr.containsKey(t))}}]),e}(),lx=function(){function e(t,n){var r=this;l(this,e),this.Nr={},this.overlays={},this.Br=new pm(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new cx(this),this.indexManager=new vw,this.remoteDocumentCache=function(e){return new sx(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new Rb(n),this.Qr=new nx(this.serializer)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new rx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new ox(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;dv("MemoryPersistence","Starting transaction:",e);var i=new fx(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return nm.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),fx=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Zv),hx=function(){function e(t){l(this,e),this.persistence=t,this.Wr=new ix,this.Gr=null}return p(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw yv()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),nm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),nm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),nm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nm.forEach(this.jr,(function(r){var i=Bv.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,Mv.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return nm.or([function(){return nm.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),dx=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new rm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xm,{unique:!0}),e.createObjectStore("documentMutations")}(e),px(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=nm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),px(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return nm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Mm});t.createIndex("collectionPathOverlayIndex",Fm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Um,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Sm});t.createIndex("documentKeyIndex",Tm),t.createIndex("collectionGroupIndex",Cm)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Pm}).createIndex("sequenceNumberIndex",Om,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Lm}).createIndex("documentKeyIndex",jm,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Tw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return nm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return nm.forEach(r,(function(r){gv(r.userId===n.userId);var i=Mb(t.serializer,r);return Sw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Uv(n),o=function(e){return[0,gm(e)]}(a);r.push(t.get(o).next((function(n){return n?nm.resolve():function(n){return t.put({targetId:0,path:gm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return nm.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Rm});var n=t.store("collectionParents"),r=new mw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:gm(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Uv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=E(e,3),r=(n[0],n[1]),a=(n[2],wm(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Fb(r),a=Ub(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Bv(Uv.fromString(e.document.name).popFirst(5)):e.noDocument?Bv.fromSegments(e.noDocument.path):e.unknownDocument?Bv.fromSegments(e.unknownDocument.path):yv()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return nm.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=Hw(this.serializer),a=new lx(hx.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Kg();Mb(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),nm.forEach(r,(function(e,r){var o=new cv(r),s=Hb.lt(n.serializer,o),u=a.getIndexManager(o),c=Cw.lt(o,n.serializer,u,a.referenceDelegate);return new tx(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Km(t,pm.ae),e).next()}))}))}}]),e}();function px(e){e.createObjectStore("targetDocuments",{keyPath:Am}).createIndex("documentTargetsIndex",Dm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nm,{unique:!0}),e.createObjectStore("targetGlobal")}var vx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mx=function(){function e(t,n,r,i,a,o,s,u,c,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.si=c,this.oi=f,this._i=h,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new wv(bv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qw(this,i),this.Pi=n+"main",this.serializer=new Rb(u),this.Ii=new im(this.Pi,this._i,new dx(this.serializer)),this.kr=new Ow(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Hw(this.serializer),this.Qr=new Gb,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===f&&pv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new wv(bv.FAILED_PRECONDITION,vx);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new pm(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=it(Ze().mark((function n(r){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=it(Ze().mark((function t(n){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(sm(t))return dv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return dv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return yx(e).get("owner").next((function(e){return nm.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return gx(e).delete(this.clientId)}},{key:"Si",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Wm(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return nm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?nm.resolve(!0):yx(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new wv(bv.FAILED_PRECONDITION,vx);return!1}}return!(!t.networkEnabled||!t.inForeground)||gx(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&dv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=it(Ze().mark((function e(){var t=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Km(e,pm.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gx(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return Cw.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new gw(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Hb.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;dv("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Gm:14===e?qm:13===e?Bm:12===e?zm:11===e?Vm:void yv()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new Km(a,r.Br?r.Br.next():pm.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw pv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new wv(bv.FAILED_PRECONDITION,Xv);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return yx(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new wv(bv.FAILED_PRECONDITION,vx)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yx(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=yx(e);return n.get("owner").next((function(e){return t.yi(e)?(dv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):nm.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(pv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;!mt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return dv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return pv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){pv("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return im.v()}}]),e}();function yx(e){return Wm(e,"owner")}function gx(e){return Wm(e,"clientMetadata")}function kx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bx=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return p(e,null,[{key:"qi",value:function(t,n){var r,i=Kg(),a=Kg(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wx=function(){function e(){l(this,e),this.Qi=!1}return p(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(kg(t))return nm.resolve(null);var r=Ig(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Sg(t,null,"F"),r=Ig(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Kg.apply(void 0,c(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,Sg(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return kg(t)||r.isEqual(Mv.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(hv()<=Ut.DEBUG&&dv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ng(t)),i.ji(e,o,t,Qv(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new Zm(Rg(e));return t.forEach((function(t,r){Ag(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return hv()<=Ut.DEBUG&&dv("QueryEngine","Using full collection scan to execute query:",Ng(t)),this.Ki.getDocumentsMatchingQuery(e,t,Jv.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xx=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Jm(Pv),this.Yi=new Og((function(e){return lg(e)}),fg),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return p(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tx(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function _x(e,t,n,r){return new xx(e,t,n,r)}function Ix(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Kg(),u=T(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Sx(e,t){var n=kv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=nm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);gv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Kg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Tx(e){var t=kv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function Cx(e,t){var n=kv(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(iy.EMPTY_BYTE_STRING,Mv.min()).withLastLimboFreeSnapshotVersion(Mv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var s=jg(),u=Kg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Nx(e,a,t.documentUpdates).next((function(e){s=e.ns,u=e.rs}))),!r.isEqual(Mv.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return nm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Nx(e,t,n){var r=Kg(),i=Kg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=jg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Mv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):dv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function Ax(e,t){var n=kv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Dx(e,t){var n=kv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,nm.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new Db(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Rx(e,t,n){return Px.apply(this,arguments)}function Px(){return Px=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=kv(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),sm(e.t1)){e.next=12;break}throw e.t1;case 12:dv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Px.apply(this,arguments)}function Ox(e,t,n){var r=kv(e),i=Mv.min(),a=Kg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=kv(e),i=r.Yi.get(n);return void 0!==i?nm.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,Ig(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Mv.min(),n?a:Kg())})).next((function(e){return Mx(r,Dg(t),e),{documents:e,ss:a}}))}))}function Lx(e,t){var n=kv(e),r=kv(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function jx(e,t){var n=kv(e),r=n.Zi.get(t)||Mv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,Qv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Mx(n,t,e),e}))}function Mx(e,t,n){var r=e.Zi.get(t)||Mv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function Fx(e,t,n,r){return Ux.apply(this,arguments)}function Ux(){return Ux=it(Ze().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=kv(t),o=Kg(),s=jg(),u=T(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Dx(a,function(e){return Ig(gg(Uv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Nx(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t){return zx.apply(this,arguments)}function zx(){return zx=it(Ze().mark((function e(t,n){var r,i,a,o=arguments;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Kg(),e.next=3,Dx(t,Ig(Vb(n.bundledQuery)));case 3:return i=e.sent,a=kv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ab(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(iy.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}function Bx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function qx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Kx=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new wv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(pv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Wx=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wv(i.error.code,i.error.message))),a?new e(t,i.state,r):(pv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Hx=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Hg(),o=0;i&&o<r.activeTargetIds.length;++o)i=ym(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(pv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Qx=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(pv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Yx=function(){function e(){l(this,e),this.activeTargetIds=Hg()}return p(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jx=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Jm(Pv),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=Bx(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new Yx),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return p(e,[{key:"start",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Bx(this.persistenceKey,i)))&&(o=Hx.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(s=this.storage.getItem(this.ys))&&(u=this.bs(s))&&this.Ds(u),c=T(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gx(this.persistenceKey,e));if(n){var r=Wx.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return dv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){dv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){dv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(dv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void pv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(it(Ze().mark((function e(){var r,i,a,o,s,u,c;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(s));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}u=function(e){var t=pm.ae;if(null!=e)try{var n=JSON.parse(e);gv("number"==typeof n),t=n}catch(e){pv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==pm.ae&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new Kx(this.currentUser,e,t,n),i=qx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=qx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=Gx(this.persistenceKey,e),i=new Wx(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return Hx.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kx.cs(new cv(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return Wx.cs(r,t)}},{key:"bs",value:function(e){return Qx.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:dv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.js(o,s).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=Hg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),$x=function(){function e(){l(this,e),this.Hs=new Yx,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new Yx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Xx=function(){function e(){l(this,e)}return p(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zx=function(){function e(){var t=this;l(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return p(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){dv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){dv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),e_=null;function t_(){return null===e_?e_=268435456+Math.round(2147483648*Math.random()):e_++,"0x"+e_.toString(16)}var n_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},r_=function(){function e(t){l(this,e),this.so=t.so,this.oo=t.oo}return p(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),i_="WebChannelConnection",a_=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return p(n,[{key:"po",value:function(e,t,n,r){var i=t_();return new Promise((function(a,o){var s=new av;s.setWithCredentials(!0),s.listenOnce(ev.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Zp.NO_ERROR:var t=s.getResponseJson();dv(i_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Zp.TIMEOUT:dv(i_,"RPC '".concat(e,"' ").concat(i," timed out")),o(new wv(bv.DEADLINE_EXCEEDED,"Request time out"));break;case Zp.HTTP_ERROR:var n=s.getStatus();if(dv(i_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bv).indexOf(t)>=0?t:bv.UNKNOWN}(u.status);o(new wv(c,u.message))}else o(new wv(bv.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new wv(bv.UNAVAILABLE,"Connection failed."));break;default:yv()}}finally{dv(i_,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);dv(i_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=t_(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$p(),o=Xp(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new rv({})),this.fo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");dv(i_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new r_({so:function(t){h?dv(i_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(dv(i_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),dv(i_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,iv.EventType.OPEN,(function(){h||dv(i_,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,iv.EventType.CLOSE,(function(){h||(h=!0,dv(i_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,iv.EventType.ERROR,(function(t){h||(h=!0,vv(i_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new wv(bv.UNAVAILABLE,"The operation could not be completed")))})),p(l,iv.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];gv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){dv(i_,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Ik[e];if(void 0!==t)return Pk(t)}(s),c=o.message;void 0===u&&(u=bv.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.Po(new wv(u,c)),l.close()}else dv(i_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,tv.STAT_EVENT,(function(t){t.stat===nv.PROXY?dv(i_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nv.NOPROXY&&dv(i_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.To=n+"://"+t.host,this.Eo="projects/".concat(r,"/databases/").concat(i),this.Ao="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return p(e,[{key:"Ro",get:function(){return!1}},{key:"Vo",value:function(e,t,n,r,i){var a=t_(),o=this.mo(e,t);dv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(s,r,i),this.po(e,o,s,n).then((function(t){return dv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw vv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"yo",value:function(e,t,n,r,i,a){return this.Vo(e,t,n,r,i)}},{key:"fo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"mo",value:function(e,t){var n=n_[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function o_(){return"undefined"!=typeof window?window:null}function s_(){return"undefined"!=typeof document?document:null}function u_(e){return new eb(e,!0)}var c_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.ii=t,this.timerId=n,this.So=r,this.bo=i,this.Do=a,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.vo=0}},{key:"Mo",value:function(){this.vo=this.Do}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,n-r);i>0&&dv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Fo=Date.now(),e()})),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}},{key:"No",value:function(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}},{key:"cancel",value:function(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"Oo",value:function(){return(Math.random()-.5)*this.vo}}]),e}(),l_=function(){function e(t,n,r,i,a,o,s,u){l(this,e),this.ii=t,this.Bo=r,this.Lo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new c_(t,n)}return p(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Wo()}},{key:"stop",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Ko.reset()}},{key:"zo",value:function(){var e=this;this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,(function(){return e.jo()})))}},{key:"Ho",value:function(e){this.Jo(),this.stream.send(e)}},{key:"jo",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"Yo",value:function(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}},{key:"close",value:function(){var e=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,4!==t?this.Ko.reset():n&&n.code===bv.RESOURCE_EXHAUSTED?(pv(n.toString()),pv("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===bv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Zo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=E(t,2),i=r[0],a=r[1];e.ko===n&&e.e_(i,a)}),(function(n){t((function(){var t=new wv(bv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.t_(t)}))}))}},{key:"e_",value:function(e,t){var n=this,r=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.Qo=n.ii.enqueueAfterDelay(n.Lo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.t_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Wo",value:function(){var e=this;this.state=5,this.Ko.xo(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"t_",value:function(e){return dv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.ko===e?n():(dv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),f_=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return l(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return p(n,[{key:"n_",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(gv(void 0===t||"string"==typeof t),iy.fromBase64String(t||"")):(gv(void 0===t||t instanceof Uint8Array),iy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?bv.UNKNOWN:Pk(e.code);return new wv(t,e.message||"")}(o);n=new Wk(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=cb(e,u.document.name),l=ab(u.document.updateTime),f=u.document.createTime?ab(u.document.createTime):Mv.min(),h=new Ly({mapValue:{fields:u.document.fields}}),d=My.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new Gk(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=cb(e,m.document),g=m.readTime?ab(m.readTime):Mv.min(),k=My.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Gk([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=cb(e,w.document),_=w.removedTargetIds||[];n=new Gk([],_,x,null)}else{if(!("filter"in t))return yv();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new Dk(S,T),N=I.targetId;n=new Kk(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Mv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Mv.min():t.readTime?ab(t.readTime):Mv.min()}(e);return this.listener.r_(t,n)}},{key:"i_",value:function(e){var t={};t.database=hb(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=hg(r)?{documents:kb(e,r)}:{query:bb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=rb(e,t.resumeToken);var i=tb(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Mv.min())>0){n.readTime=nb(e,t.snapshotVersion.toTimestamp());var a=tb(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Ho(t)}},{key:"s_",value:function(e){var t={};t.database=hb(this.serializer),t.removeTarget=e,this.Ho(t)}}]),n}(l_),h_=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return l(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.o_=!1,u}return p(n,[{key:"__",get:function(){return this.o_}},{key:"start",value:function(){this.o_=!1,this.lastStreamToken=void 0,cr(y(n.prototype),"start",this).call(this)}},{key:"Zo",value:function(){this.o_&&this.a_([])}},{key:"n_",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(gv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();var t=function(e,t){return e&&e.length>0?(gv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ab(e.updateTime):ab(t);return n.isEqual(Mv.min())&&(n=ab(t)),new lk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ab(e.commitTime);return this.listener.u_(n,t)}return gv(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}},{key:"l_",value:function(){var e={};e.database=hb(this.serializer),this.Ho(e)}},{key:"a_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return yb(t.serializer,e)}))};this.Ho(n)}}]),n}(l_),d_=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.h_=!1,o}return p(n,[{key:"P_",value:function(){if(this.h_)throw new wv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Vo",value:function(e,t,n){var r=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=E(i,2),o=a[0],s=a[1];return r.connection.Vo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wv(bv.UNKNOWN,e.toString())}))}},{key:"yo",value:function(e,t,n,r){var i=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=E(a,2),s=o[0],u=o[1];return i.connection.yo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new wv(bv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.h_=!0}}]),n}(p((function e(){l(this,e)})));var p_=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}return p(e,[{key:"A_",value:function(){var e=this;0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.E_=null,e.V_("Backend didn't respond within 10 seconds."),e.R_("Offline"),Promise.resolve()})))}},{key:"m_",value:function(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.R_("Offline")))}},{key:"set",value:function(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}},{key:"R_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"V_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.d_?(pv(t),this.d_=!1):dv("OnlineStateTracker",t)}},{key:"f_",value:function(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}]),e}(),v_=p((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=a,this.S_.Ys((function(e){r.enqueueAndForget(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=S_(o),!e.t0){e.next=5;break}return dv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=kv(t)).y_.add(4),e.next=4,g_(n);case 4:return n.b_.set("Unknown"),n.y_.delete(4),e.next=8,m_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.b_=new p_(r,i)}));function m_(e){return y_.apply(this,arguments)}function y_(){return(y_=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S_(t)){e.next=18;break}n=T(t.w_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function g_(e){return k_.apply(this,arguments)}function k_(){return(k_=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.w_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function b_(e,t){var n=kv(e);n.p_.has(t.targetId)||(n.p_.set(t.targetId,t),E_(n)?I_(n):tI(n).Uo()&&x_(n,t))}function w_(e,t){var n=kv(e),r=tI(n);n.p_.delete(t),r.Uo()&&__(n,t),0===n.p_.size&&(r.Uo()?r.zo():S_(n)&&n.b_.set("Unknown"))}function x_(e,t){if(e.D_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tI(e).i_(t)}function __(e,t){e.D_.Be(t),tI(e).s_(t)}function I_(e){e.D_=new Qk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.p_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),tI(e).start(),e.b_.A_()}function E_(e){return S_(e)&&!tI(e).$o()&&e.p_.size>0}function S_(e){return 0===kv(e).y_.size}function T_(e){e.D_=void 0}function C_(e){return N_.apply(this,arguments)}function N_(){return(N_=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.p_.forEach((function(e,n){x_(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A_(e,t){return D_.apply(this,arguments)}function D_(){return(D_=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T_(t),E_(t)?(t.b_.m_(n),I_(t)):t.b_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R_(e,t,n){return P_.apply(this,arguments)}function P_(){return P_=it(Ze().mark((function e(t,n,r){var i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.b_.set("Online"),!(n instanceof Wk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.p_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.p_.delete(o),t.D_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),dv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,O_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gk?t.D_.We(n):n instanceof Kk?t.D_.Ze(n):t.D_.je(n),r.isEqual(Mv.min())){e.next=29;break}return e.prev=14,e.next=17,Tx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.D_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.p_.get(r);i&&e.p_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.p_.get(t);if(r){e.p_.set(t,r.withResumeToken(iy.EMPTY_BYTE_STRING,r.snapshotVersion)),__(e,t);var i=new Db(r.target,t,n,r.sequenceNumber);x_(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),dv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,O_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),P_.apply(this,arguments)}function O_(e,t,n){return L_.apply(this,arguments)}function L_(){return(L_=it(Ze().mark((function e(t,n,r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sm(n)){e.next=2;break}throw n;case 2:return t.y_.add(1),e.next=5,g_(t);case 5:t.b_.set("Offline"),r||(r=function(){return Tx(t.localStore)}),t.asyncQueue.enqueueRetryable(it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.y_.delete(1),e.next=6,m_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j_(e,t){return t().catch((function(n){return O_(e,n,t)}))}function M_(e){return F_.apply(this,arguments)}function F_(){return F_=it(Ze().mark((function e(t){var n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kv(t),r=nI(n),i=n.g_.length>0?n.g_[n.g_.length-1].batchId:-1;case 2:if(!U_(n)){e.next=19;break}return e.prev=3,e.next=6,Ax(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.g_.length&&r.zo(),e.abrupt("break",19);case 10:i=a.batchId,V_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,O_(n,e.t0);case 17:e.next=2;break;case 19:z_(n)&&B_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),F_.apply(this,arguments)}function U_(e){return S_(e)&&e.g_.length<10}function V_(e,t){e.g_.push(t);var n=nI(e);n.Uo()&&n.__&&n.a_(t.mutations)}function z_(e){return S_(e)&&!nI(e).$o()&&e.g_.length>0}function B_(e){nI(e).start()}function q_(e){return G_.apply(this,arguments)}function G_(){return(G_=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nI(t).l_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K_(e){return W_.apply(this,arguments)}function W_(){return(W_=it(Ze().mark((function e(t){var n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nI(t),r=T(t.g_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.a_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H_(e,t,n){return Q_.apply(this,arguments)}function Q_(){return Q_=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.g_.shift(),a=Nk.from(i,n,r),e.next=3,j_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,M_(t);case 5:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t){return J_.apply(this,arguments)}function J_(){return J_=it(Ze().mark((function e(t,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nI(t).__,!e.t0){e.next=4;break}return e.next=4,function(){var e=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Rk(e)&&e!==bv.ABORTED}(n.code)){e.next=7;break}return r=t.g_.shift(),nI(t).Go(),e.next=5,j_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,M_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:z_(t)&&B_(t);case 5:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function $_(e,t){return X_.apply(this,arguments)}function X_(){return X_=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=kv(t)).asyncQueue.verifyOperationInProgress(),dv("RemoteStore","RemoteStore received new credentials"),i=S_(r),r.y_.add(3),e.next=6,g_(r);case 6:return i&&r.b_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.y_.delete(3),e.next=12,m_(r);case 12:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(e,t){return eI.apply(this,arguments)}function eI(){return(eI=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kv(t),!n){e.next=7;break}return r.y_.delete(2),e.next=5,m_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.y_.add(2),e.next=12,g_(r);case 12:r.b_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tI(e){return e.v_||(e.v_=function(e,t,n){var r=kv(e);return r.P_(),new f_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:C_.bind(null,e),uo:A_.bind(null,e),r_:R_.bind(null,e)}),e.w_.push(function(){var t=it(Ze().mark((function t(n){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.v_.Go(),E_(e)?I_(e):e.b_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.v_.stop();case 6:T_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}function nI(e){return e.C_||(e.C_=function(e,t,n){var r=kv(e);return r.P_(),new h_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:q_.bind(null,e),uo:Y_.bind(null,e),c_:K_.bind(null,e),u_:H_.bind(null,e)}),e.w_.push(function(){var t=it(Ze().mark((function t(n){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.C_.Go(),t.next=4,M_(e);case 4:t.next=9;break;case 6:return t.next=8,e.C_.stop();case 8:e.g_.length>0&&(dv("RemoteStore","Stopping write stream with ".concat(e.g_.length," pending writes")),e.g_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.C_}var rI=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wv(bv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function iI(e,t){if(pv("AsyncQueue","".concat(t,": ").concat(e)),sm(e))return new wv(bv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var aI=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||Bv.comparator(e.key,n.key)}:function(e,t){return Bv.comparator(e.key,t.key)},this.keyedMap=Fg(),this.sortedSet=new Jm(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oI=function(){function e(){l(this,e),this.F_=new Jm(Bv.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.F_.get(t);n?0!==e.type&&3===n.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==n.type?this.F_=this.F_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.F_=this.F_.remove(t):1===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):yv():this.F_=this.F_.insert(t,e)}},{key:"M_",value:function(){var e=[];return this.F_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sI=function(){function e(t,n,r,i,a,o,s,u,c){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,aI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),uI=p((function e(){l(this,e),this.x_=void 0,this.listeners=[]})),cI=p((function e(){l(this,e),this.queries=new Og((function(e){return Cg(e)}),Tg),this.onlineState="Unknown",this.O_=new Set}));function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=it(Ze().mark((function e(t,n){var r,i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.x_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=iI(e.t0,"Initialization of query '".concat(Ng(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.N_(r.onlineState),o.x_&&n.B_(o.x_)&&mI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fI.apply(this,arguments)}function hI(e,t){return dI.apply(this,arguments)}function dI(){return dI=it(Ze().mark((function e(t,n){var r,i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t){var n,r=kv(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=T(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.B_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.x_=o}}}catch(f){a.e(f)}finally{a.f()}i&&mI(r)}function vI(e,t,n){var r=kv(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function mI(e){e.O_.forEach((function(e){e.next()}))}var yI=function(){function e(t,n,r){l(this,e),this.query=t,this.L_=n,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"B_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),a=!0):this.K_(e,this.onlineState)&&(this.U_(e),a=!0),this.q_=e,a}},{key:"onError",value:function(e){this.L_.error(e)}},{key:"N_",value:function(e){this.onlineState=e;var t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}},{key:"K_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.W_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"U_",value:function(e){e=sI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}]),e}(),gI=function(){function e(t,n){l(this,e),this.G_=t,this.byteLength=n}return p(e,[{key:"z_",value:function(){return"metadata"in this.G_}}]),e}(),kI=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"os",value:function(e){return cb(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?vb(this.serializer,e.document,!1):My.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return ab(e)}}]),e}(),bI=function(){function e(t,n,r){l(this,e),this.j_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wI(t)}return p(e,[{key:"H_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.G_.namedQuery)this.queries.push(e.G_.namedQuery);else if(e.G_.documentMetadata){this.documents.push({metadata:e.G_.documentMetadata}),e.G_.documentMetadata.exists||++t;var n=Uv.fromString(e.G_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.G_.document&&(this.documents[this.documents.length-1].document=e.G_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"J_",value:function(e){var t,n=new Map,r=new kI(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.os(a.metadata.name),u=T(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Kg()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fx(this.localStore,new kI(this.serializer),this.documents,this.j_.id);case 2:t=e.sent,n=this.J_(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Vx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Y_:this.collectionGroups,Z_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function wI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xI=p((function e(t){l(this,e),this.key=t})),_I=p((function e(t){l(this,e),this.key=t})),II=function(){function e(t,n){l(this,e),this.query=t,this.X_=n,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=Kg(),this.mutatedKeys=Kg(),this.na=Rg(t),this.ra=new aI(this.na)}return p(e,[{key:"ia",get:function(){return this.X_}},{key:"sa",value:function(e,t){var n=this,r=t?t.oa:new oI,i=t?t.ra:this.ra,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ag(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n._a(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.na(f,u)>0||c&&n.na(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ra:o,oa:r,zi:s,mutatedKeys:a}}},{key:"_a",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;var a=e.oa.M_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yv()}};return n(e)-n(t)}(e.type,t.type)||r.na(e.doc,t.doc)})),this.aa(n);var o=t?this.ua():[],s=0===this.ta.size&&this.current?1:0,u=s!==this.ea;return this.ea=s,0!==a.length||u?{snapshot:new sI(this.query,e.ra,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ca:o}:{ca:o}}},{key:"N_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new oI,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}},{key:"la",value:function(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}},{key:"aa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.X_=t.X_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.X_=t.X_.delete(e)})),this.current=e.current)}},{key:"ua",value:function(){var e=this;if(!this.current)return[];var t=this.ta;this.ta=Kg(),this.ra.forEach((function(t){e.la(t.key)&&(e.ta=e.ta.add(t.key))}));var n=[];return t.forEach((function(t){e.ta.has(t)||n.push(new _I(t))})),this.ta.forEach((function(e){t.has(e)||n.push(new xI(e))})),n}},{key:"ha",value:function(e){this.X_=e.ss,this.ta=Kg();var t=this.sa(e.documents);return this.applyChanges(t,!0)}},{key:"Pa",value:function(){return sI.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}]),e}(),EI=p((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),SI=p((function e(t){l(this,e),this.key=t,this.Ia=!1})),TI=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new Og((function(e){return Cg(e)}),Tg),this.da=new Map,this.Aa=new Set,this.Ra=new Jm(Bv.comparator),this.Va=new Map,this.ma=new ix,this.fa={},this.ga=new Map,this.pa=Pw.On(),this.onlineState="Unknown",this.ya=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.ya}}]),e}();function CI(e,t){return NI.apply(this,arguments)}function NI(){return NI=it(Ze().mark((function e(t,n){var r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wE(t),!(o=r.Ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Pa(),e.next=15;break;case 6:return e.next=8,Dx(r.localStore,Ig(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,AI(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&b_(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function AI(e,t,n,r,i){return DI.apply(this,arguments)}function DI(){return DI=it(Ze().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.wa=function(e,n,r){return function(){var e=it(Ze().mark((function e(t,n,r,i){var a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sa(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Ox(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sa(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($I(t,n.targetId,s.ca),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ox(t.localStore,n,!0);case 3:return o=e.sent,s=new II(n,o.ss),u=s.sa(o.documents),c=qk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),$I(t,r,l.ca),f=new EI(n,r,s),e.abrupt("return",(t.Ea.set(n,f),t.da.has(r)?t.da.get(r).push(n):t.da.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function RI(e,t){return PI.apply(this,arguments)}function PI(){return PI=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kv(t),i=r.Ea.get(n),!((a=r.da.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.da.set(i.targetId,a.filter((function(e){return!Tg(e,n)}))),void r.Ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Rx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),w_(r.remoteStore,i.targetId),YI(r,i.targetId)})).catch(em);case 9:e.next=14;break;case 11:return YI(r,i.targetId),e.next=14,Rx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function OI(e,t,n){return LI.apply(this,arguments)}function LI(){return LI=it(Ze().mark((function e(t,n,r){var i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=kv(e),a=jv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Kg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=jg(),u=Kg();return i.Xi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=T(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=yk(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new bk(c.key,l,jy(l.value.mapValue),fk.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ug(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fa[e.currentUser.toKey()];r||(r=new Jm(Pv)),r=r.insert(t,n),e.fa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,eE(i,a.changes);case 9:return e.next=11,M_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=iI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),LI.apply(this,arguments)}function jI(e,t){return MI.apply(this,arguments)}function MI(){return MI=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),e.prev=1,e.next=4,Cx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Va.get(t);n&&(gv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ia=!0:e.modifiedDocuments.size>0?gv(n.Ia):e.removedDocuments.size>0&&(gv(n.Ia),n.Ia=!1))})),e.next=8,eE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,em(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),MI.apply(this,arguments)}function FI(e,t,n){var r=kv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ea.forEach((function(e,n){var r=n.view.N_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=kv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.N_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mI(n)}(r.eventManager,t),i.length&&r.Ta.r_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function UI(e,t,n){return VI.apply(this,arguments)}function VI(){return VI=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=kv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Va.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Jm(Bv.comparator)).insert(o,My.newNoDocument(o,Mv.min())),u=Kg().add(o),c=new Bk(Mv.min(),new Map,new Jm(Pv),s,u),e.next=9,jI(i,c);case 9:i.Ra=i.Ra.remove(o),i.Va.delete(n),ZI(i),e.next=16;break;case 14:return e.next=16,Rx(i.localStore,n,!1).then((function(){return YI(i,n,r)})).catch(em);case 16:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function zI(e,t){return BI.apply(this,arguments)}function BI(){return BI=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),i=n.batch.batchId,e.prev=1,e.next=4,Sx(r.localStore,n);case 4:return a=e.sent,QI(r,i,null),HI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,eE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,em(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),BI.apply(this,arguments)}function qI(e,t,n){return GI.apply(this,arguments)}function GI(){return GI=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kv(t),e.prev=1,e.next=4,function(e,t){var n=kv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return gv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,QI(i,n,r),HI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,eE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,em(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),GI.apply(this,arguments)}function KI(e,t){return WI.apply(this,arguments)}function WI(){return WI=it(Ze().mark((function e(t,n){var r,i,a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S_((r=kv(t)).remoteStore)||dv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=kv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ga.get(i)||[]).push(n),r.ga.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=iI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),WI.apply(this,arguments)}function HI(e,t){(e.ga.get(t)||[]).forEach((function(e){e.resolve()})),e.ga.delete(t)}function QI(e,t,n){var r=kv(e),i=r.fa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fa[r.currentUser.toKey()]=i}}function YI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.da.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ea.delete(a),n&&e.Ta.Sa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.da.delete(t),e.isPrimaryClient&&e.ma.Ar(t).forEach((function(t){e.ma.containsKey(t)||JI(e,t)}))}function JI(e,t){e.Aa.delete(t.path.canonicalString());var n=e.Ra.get(t);null!==n&&(w_(e.remoteStore,n),e.Ra=e.Ra.remove(t),e.Va.delete(n),ZI(e))}function $I(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xI?(e.ma.addReference(a.key,t),XI(e,a)):a instanceof _I?(dv("SyncEngine","Document no longer in limbo: "+a.key),e.ma.removeReference(a.key,t),e.ma.containsKey(a.key)||JI(e,a.key)):yv()}}catch(o){i.e(o)}finally{i.f()}}function XI(e,t){var n=t.key,r=n.path.canonicalString();e.Ra.get(n)||e.Aa.has(r)||(dv("SyncEngine","New document in limbo: "+n),e.Aa.add(r),ZI(e))}function ZI(e){for(;e.Aa.size>0&&e.Ra.size<e.maxConcurrentLimboResolutions;){var t=e.Aa.values().next().value;e.Aa.delete(t);var n=new Bv(Uv.fromString(t)),r=e.pa.next();e.Va.set(r,new SI(n)),e.Ra=e.Ra.insert(n,r),b_(e.remoteStore,new Db(Ig(gg(n.path)),r,"TargetPurposeLimboResolution",pm.ae))}}function eE(e,t,n){return tE.apply(this,arguments)}function tE(){return tE=it(Ze().mark((function e(t,n,r){var i,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=kv(t),a=[],o=[],s=[],e.t0=i.Ea.isEmpty(),e.t0){e.next=9;break}return i.Ea.forEach((function(e,t){s.push(i.wa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=bx.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Ta.r_(a),e.next=9,function(){var e=it(Ze().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return nm.forEach(n,(function(t){return nm.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return nm.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),sm(e.t0)){e.next=10;break}throw e.t0;case 10:dv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return(rE=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=kv(t)).currentUser.isEqual(n)){e.next=11;break}return dv("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ix(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ga.forEach((function(e){e.forEach((function(e){e.reject(new wv(bv.CANCELLED,t))}))})),e.ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,eE(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iE(e,t){var n=kv(e),r=n.Va.get(t);if(r&&r.Ia)return Kg().add(r.key);var i=Kg(),a=n.da.get(t);if(!a)return i;var o,s=T(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Ea.get(u);i=i.unionWith(c.view.ia)}}catch(l){s.e(l)}finally{s.f()}return i}function aE(e,t){return oE.apply(this,arguments)}function oE(){return oE=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),e.next=3,Ox(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ha(i),e.abrupt("return",(r.isPrimaryClient&&$I(r,n.targetId,a.ca),a));case 6:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function sE(e,t){return uE.apply(this,arguments)}function uE(){return(uE=it(Ze().mark((function e(t,n){var r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),e.abrupt("return",jx(r.localStore,n).then((function(e){return eE(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cE(e,t,n,r){return lE.apply(this,arguments)}function lE(){return lE=it(Ze().mark((function e(t,n,r,i){var a,o;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kv(t),e.next=3,function(e,t){var n=kv(e),r=kv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):nm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,M_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(QI(a,n,i||null),HI(a,n),function(e,t){kv(kv(e).mutationQueue).Cn(t)}(a.localStore,n)):yv();case 11:return e.next=13,eE(a,o);case 13:e.next=16;break;case 15:dv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function fE(e,t){return hE.apply(this,arguments)}function hE(){return(hE=it(Ze().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wE(r=kv(t)),xE(r),!0!==n||!0===r.ya){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,dE(r,i.toArray());case 5:return a=e.sent,r.ya=!0,e.next=9,Z_(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(s=o.n()).done;)u=s.value,b_(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ya){e.next=25;break}return c=[],l=Promise.resolve(),r.da.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return YI(r,t),Rx(r.localStore,t,!0)})),w_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,dE(r,c);case 21:return function(e){var t=kv(e);t.Va.forEach((function(e,n){w_(t.remoteStore,n)})),t.ma.Rr(),t.Va=new Map,t.Ra=new Jm(Bv.comparator)}(r),r.ya=!1,e.next=25,Z_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return pE=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=kv(t),a=[],o=[],s=T(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.da.get(c))||0===f.length){e.next=34;break}return e.next=11,Dx(i.localStore,Ig(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ea.get(p),e.next=20,aE(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Lx(i.localStore,c);case 36:return y=e.sent,e.next=39,Dx(i.localStore,y);case 39:return l=e.sent,e.next=42,AI(i,vE(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ta.r_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pE.apply(this,arguments)}function vE(e){return yg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mE(e){return function(e){return kv(kv(e).persistence).Ni()}(kv(e).localStore)}function yE(e,t,n,r){return gE.apply(this,arguments)}function gE(){return gE=it(Ze().mark((function e(t,n,r,i){var a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=kv(t)).ya){e.next=3;break}return e.abrupt("return",void dv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.da.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,jx(a.localStore,Dg(o[0]));case 10:return s=e.sent,u=Bk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,iy.EMPTY_BYTE_STRING),e.next=14,eE(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Rx(a.localStore,n,!0);case 17:return YI(a,n,i),e.abrupt("break",20);case 19:yv();case 20:case"end":return e.stop()}}),e)}))),gE.apply(this,arguments)}function kE(e,t,n){return bE.apply(this,arguments)}function bE(){return bE=it(Ze().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=wE(t)).ya){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.da.has(s)){e.next=10;break}return dv("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Lx(i.localStore,s);case 12:return u=e.sent,e.next=15,Dx(i.localStore,u);case 15:return c=e.sent,e.next=18,AI(i,vE(u),c.targetId,!1,c.resumeToken);case 18:b_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.da.has(t),!e.t0){e.next=5;break}return e.next=5,Rx(i.localStore,t,!1).then((function(){w_(i.remoteStore,t),YI(i,t)})).catch(em);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),bE.apply(this,arguments)}function wE(e){var t=kv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=UI.bind(null,t),t.Ta.r_=pI.bind(null,t.eventManager),t.Ta.Sa=vI.bind(null,t.eventManager),t}function xE(e){var t=kv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qI.bind(null,t),t}function _E(e,t,n){var r=kv(e);(function(){var e=it(Ze().mark((function e(t,n,r){var i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=kv(e),r=ab(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(wI(i)),a=new bI(i,t.localStore,n.serializer),e.next=15,n.ba();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.H_(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ba();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,eE(t,u.Z_,void 0);case 31:return e.next=33,function(e,t){var n=kv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Y_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(vv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var IE=function(){function e(){l(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=u_(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return _x(this.persistence,new wx,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new lx(hx.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new $x}},{key:"terminate",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),EE=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).Da=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=it(Ze().mark((function e(t){var r=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Da.initialize(this,t);case 4:return e.next=6,xE(this.Da.syncEngine);case 6:return e.next=8,M_(this.Da.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return _x(this.persistence,new wx,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Vw(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new dm(t,this.persistence);return new hm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ew.withCacheSize(this.cacheSizeBytes):Ew.DEFAULT;return new mx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,o_(),s_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new $x}}]),n}(IE),SE=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).Da=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=it(Ze().mark((function e(t){var r,i=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Da.syncEngine,e.t0=this.sharedClientState instanceof Jx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:cE.bind(null,r),zs:yE.bind(null,r),js:kE.bind(null,r),Ni:mE.bind(null,r),Ws:sE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fE(i.Da.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=o_();if(!Jx.v(t))throw new wv(bv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(EE),TE=function(){function e(){l(this,e)}return p(e,[{key:"initialize",value:function(){var e=it(Ze().mark((function e(t,n){var r=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return FI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nE.bind(null,this.syncEngine),e.next=12,Z_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cI}},{key:"createDatastore",value:function(e){var t=u_(e.databaseInfo.databaseId),n=function(e){return new a_(e)}(e.databaseInfo);return function(e,t,n,r){return new d_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new v_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return FI(t.syncEngine,e,0)}),Zx.v()?new Zx:new Xx)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new TI(e,t,n,r,i,a);return o&&(s.ya=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kv(t),dv("RemoteStore","RemoteStore shutting down."),n.y_.add(5),e.next=5,g_(n);case 5:n.S_.shutdown(),n.b_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return it(Ze().mark((function r(){var i;return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var NE=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.va(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.va(this.observer.error,e):pv("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ca",value:function(){this.muted=!0}},{key:"va",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),AE=function(){function e(t,n){var r=this;l(this,e),this.Fa=t,this.serializer=n,this.metadata=new xv,this.buffer=new Uint8Array,this.Ma=new TextDecoder("utf-8"),this.xa().then((function(e){e&&e.z_()?r.metadata.resolve(e.G_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.G_))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Fa.cancel()}},{key:"getMetadata",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xa",value:function(){var e=it(Ze().mark((function e(){var t,n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ma.decode(t),r=Number(n),isNaN(r)&&this.Na("length string (".concat(n,") is not valid number")),e.next=9,this.Ba(r);case 9:return i=e.sent,e.abrupt("return",new gI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"La",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Oa",value:function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.La()<0)){e.next=7;break}return e.next=3,this.ka();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.La())<0&&this.Na("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ka();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Na("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ma.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Na",value:function(e){throw this.Fa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ka",value:function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Fa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),DE=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=it(Ze().mark((function e(t){var n,r=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new wv(bv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=it(Ze().mark((function e(t,n){var r,i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),i=hb(r.serializer)+"/documents",a={documents:n.map((function(e){return ub(r.serializer,e)}))},e.next=5,r.yo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=mb(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());gv(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Sk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=it(Ze().mark((function e(){var t,n=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Bv.fromPath(t);n.mutations.push(new Tk(r,n.precondition(r)))})),e.next=7,function(){var e=it(Ze().mark((function e(t,n){var r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kv(t),i=hb(r.serializer)+"/documents",a={writes:n.map((function(e){return yb(r.serializer,e)}))},e.next=3,r.Vo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yv();t=Mv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wv(bv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mv.min())?fk.exists(!1):fk.updateTime(t):fk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mv.min()))throw new wv(bv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fk.updateTime(t)}return fk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),RE=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.qa=r.maxAttempts,this.Ko=new c_(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.qa-=1,this.Qa()}},{key:"Qa",value:function(){var e=this;this.Ko.xo(it(Ze().mark((function t(){var n,r;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new DE(e.datastore),(r=e.Ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.$a(t)}))}))})).catch((function(t){e.$a(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ka",value:function(e){try{var t=this.updateFunction(e);return!vm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"$a",value:function(e){var t=this;this.qa>0&&this.Ua(e)?(this.qa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ua",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Rk(t)}return!1}}]),e}(),PE=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cv.UNAUTHENTICATED,this.clientId=Rv.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return dv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new wv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new xv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(it(Ze().mark((function n(){var r;return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=iI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function OE(e,t){return LE.apply(this,arguments)}function LE(){return LE=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),dv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ix(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}function jE(e,t){return ME.apply(this,arguments)}function ME(){return ME=it(Ze().mark((function e(t,n){var r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,UE(t);case 3:return r=e.sent,dv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $_(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e){return"FirebaseError"===e.name?e.code===bv.FAILED_PRECONDITION||e.code===bv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function UE(e){return VE.apply(this,arguments)}function VE(){return(VE=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return dv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,OE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),FE(n=e.t0)){e.next=13;break}throw n;case 13:return vv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,OE(t,new IE);case 16:e.next=21;break;case 18:return dv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,OE(t,new IE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function zE(e){return BE.apply(this,arguments)}function BE(){return(BE=it(Ze().mark((function e(t){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return dv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,jE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return dv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,jE(t,new TE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qE(e){return UE(e).then((function(e){return e.persistence}))}function GE(e){return UE(e).then((function(e){return e.localStore}))}function KE(e){return zE(e).then((function(e){return e.remoteStore}))}function WE(e){return zE(e).then((function(e){return e.syncEngine}))}function HE(e){return zE(e).then((function(e){return e.datastore}))}function QE(e){return YE.apply(this,arguments)}function YE(){return(YE=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=CI.bind(null,n.syncEngine),r.onUnlisten=RI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function i(){return Ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NE({next:function(a){t.enqueueAndForget((function(){return hI(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new wv(bv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new wv(bv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new yI(gg(n.path),a,{includeMetadataChanges:!0,W_:!0});return lI(e,o)},i.next=3,QE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function i(){return Ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NE({next:function(n){t.enqueueAndForget((function(){return hI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new wv(bv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yI(n,a,{includeMetadataChanges:!0,W_:!0});return lI(e,o)},i.next=3,QE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function XE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var ZE=new Map;function eS(e,t,n){if(!n)throw new wv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function tS(e,t,n,r){if(!0===t&&!0===r)throw new wv(bv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function nS(e){if(!Bv.isDocumentKey(e))throw new wv(bv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function rS(e){if(Bv.isDocumentKey(e))throw new wv(bv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function iS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":yv()}function aS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wv(bv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=iS(e);throw new wv(bv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function oS(e,t){if(t<=0)throw new wv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var sS=function(){function e(t){var n,r;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new wv(bv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wv(bv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new wv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new wv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new wv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),uS=function(){function e(t,n,r,i){l(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sS({}),this._settingsFrozen=!1}return p(e,[{key:"app",get:function(){if(!this._app)throw new wv(bv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new wv(bv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Iv;switch(e.type){case"firstParty":return new Cv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new wv(bv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ZE.get(e);t&&(dv("ComponentProvider","Removing Datastore"),ZE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function cS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=aS(e,uS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&vv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=cv.MOCK_USER;else{s=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new wv(bv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cv(c)}e._authCredentials=new Ev(new _v(s,u))}}var lS=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),fS=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new hS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),hS=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,gg(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new fS(this.firestore,null,new Bv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(lS);function dS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ot(e),eS("collection","path",t),e instanceof uS){var a=Uv.fromString.apply(Uv,[t].concat(r));return rS(a),new hS(e,null,a)}if(!(e instanceof fS||e instanceof hS))throw new wv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uv.fromString.apply(Uv,[t].concat(r)));return rS(o),new hS(e.firestore,null,o)}function pS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ot(e),1===arguments.length&&(t=Rv.V()),eS("doc","path",t),e instanceof uS){var a=Uv.fromString.apply(Uv,[t].concat(r));return nS(a),new fS(e,null,new Bv(a))}if(!(e instanceof fS||e instanceof hS))throw new wv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uv.fromString.apply(Uv,[t].concat(r)));return nS(o),new fS(e.firestore,e instanceof hS?e.converter:null,new Bv(o))}function vS(e,t){return e=Ot(e),t=Ot(t),(e instanceof fS||e instanceof hS)&&(t instanceof fS||t instanceof hS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function mS(e,t){return e=Ot(e),t=Ot(t),e instanceof lS&&t instanceof lS&&e.firestore===t.firestore&&Tg(e._query,t._query)&&e.converter===t.converter}var yS=function(){function e(){var t=this;l(this,e),this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new c_(this,"async_queue_retry"),this.Xa=function(){var e=s_();e&&dv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ko.No()};var n=s_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xa)}return p(e,[{key:"isShuttingDown",get:function(){return this.za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.eu(),this.tu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.za){this.za=!0,this.Ya=e||!1;var t=s_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}},{key:"enqueue",value:function(e){var t=this;if(this.eu(),this.za)return new Promise((function(){}));var n=new xv;return this.tu((function(){return t.za&&t.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ga.push(e),t.nu()}))}},{key:"nu",value:function(){var e=it(Ze().mark((function e(){var t=this;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ga.length){e.next=14;break}return e.prev=1,e.next=4,this.Ga[0]();case 4:this.Ga.shift(),this.Ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),sm(e.t0)){e.next=12;break}throw e.t0;case 12:dv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ga.length>0&&this.Ko.xo((function(){return t.nu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"tu",value:function(e){var t=this,n=this.Wa.then((function(){return t.Ja=!0,e().catch((function(e){t.Ha=e,t.Ja=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw pv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ja=!1,e}))}));return this.Wa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.eu(),this.Za.indexOf(e)>-1&&(t=0);var i=rI.createAndSchedule(this,e,t,n,(function(e){return r.ru(e)}));return this.ja.push(i),i}},{key:"eu",value:function(){this.Ha&&yv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"iu",value:function(){var e=it(Ze().mark((function e(){var t;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Wa,e.next=3,t;case 3:if(t!==this.Wa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(e){var t,n=T(this.ja);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ou",value:function(e){var t=this;return this.iu().then((function(){t.ja.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.ja);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.iu()}))}},{key:"_u",value:function(e){this.Za.push(e)}},{key:"ru",value:function(e){var t=this.ja.indexOf(e);this.ja.splice(t,1)}}]),e}();function gS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var kS=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new xv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),bS=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new yS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||xS(this),this._firestoreClient.terminate()}}]),n}(uS);function wS(e){return e._firestoreClient||xS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new hy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,XE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new PE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _S(e,t,n){var r=new xv;return e.asyncQueue.enqueue(it(Ze().mark((function i(){var a;return Ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,OE(e,n);case 3:return i.next=5,jE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),FE(a=i.t0)){i.next=13;break}throw a;case 13:vv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function IS(e){return function(e){var t=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function n(){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=KI,n.next=3,WE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(wS(e=aS(e,bS)))}function ES(e){return function(e){return e.asyncQueue.enqueue(it(Ze().mark((function t(){var n,r;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qE(e);case 2:return n=t.sent,t.next=5,KE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=kv(e);return t.y_.delete(0),m_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(wS(e=aS(e,bS)))}function SS(e){return function(e){return e.asyncQueue.enqueue(it(Ze().mark((function t(){var n,r;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qE(e);case 2:return n=t.sent,t.next=5,KE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=kv(t)).y_.add(0),e.next=4,g_(n);case 4:n.b_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(wS(e=aS(e,bS)))}function TS(e,t){var n=wS(e=aS(e,bS)),r=new kS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new AE(e,t)}(function(e,t){if(e instanceof Uint8Array)return CE(e,t);if(e instanceof ArrayBuffer)return CE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?jk().encode(e):e),t)}(n,u_(t));e.asyncQueue.enqueueAndForget(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_E,t.next=3,WE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function CS(e,t){return function(e,t){return e.asyncQueue.enqueue(it(Ze().mark((function n(){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=kv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,GE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(wS(e=aS(e,bS)),t).then((function(t){return t?new lS(e,null,t.query):null}))}function NS(e){if(e._initialized||e._terminated)throw new wv(bv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var AS=function(){function e(t){l(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(iy.fromBase64String(t))}catch(t){throw new wv(bv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(iy.fromUint8Array(t))}}]),e}(),DS=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new wv(bv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zv(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var RS=p((function e(t){l(this,e),this._methodName=t})),PS=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new wv(bv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new wv(bv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Pv(this._lat,e._lat)||Pv(this._long,e._long)}}]),e}(),OS=/^__.*__$/,LS=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new bk(e,this.data,this.fieldMask,t,this.fieldTransforms):new kk(e,this.data,t,this.fieldTransforms)}}]),e}(),jS=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new bk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function MS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yv()}}var FS=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.au(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"uu",get:function(){return this.settings.uu}},{key:"cu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"lu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.Pu(e),r}},{key:"Iu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.au(),r}},{key:"Tu",value:function(e){return this.cu({path:void 0,hu:!0})}},{key:"Eu",value:function(e){return iT(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"au",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}},{key:"Pu",value:function(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(MS(this.uu)&&OS.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}]),e}(),US=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||u_(t)}return p(e,[{key:"Ru",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new FS({uu:e,methodName:t,Au:n,path:zv.emptyPath(),hu:!1,du:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function VS(e){var t=e._freezeSettings(),n=u_(e._databaseId);return new US(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ru(a.merge||a.mergeFields?2:0,t,n,i);eT("Data must be an object, but it was:",o,r);var s,u,c=XS(r,o);if(a.merge)s=new ny(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=tT(t,l.value,n);if(!o.contains(d))throw new wv(bv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));aT(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new ny(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new LS(new Ly(c),s,u)}var BS=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.uu)throw 1===e.uu?e.Eu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Eu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RS);function qS(e,t,n){return new FS({uu:3,Au:t.settings.Au,methodName:e._methodName,hu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var GS=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new ck(e.path,new tk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RS),KS=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Vu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=qS(this,e,!0),n=this.Vu.map((function(e){return $S(e,t)})),r=new nk(n);return new ck(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RS),WS=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Vu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=qS(this,e,!0),n=this.Vu.map((function(e){return $S(e,t)})),r=new ik(n);return new ck(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RS),HS=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).mu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new ok(e.serializer,Jg(e.serializer,this.mu));return new ck(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RS);function QS(e,t,n,r){var i=e.Ru(1,t,n);eT("Data must be an object, but it was:",i,r);var a=[],o=Ly.empty();Qm(r,(function(e,r){var s=rT(t,e,n);r=Ot(r);var u=i.Iu(s);if(r instanceof BS)a.push(s);else{var c=$S(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new ny(a);return new jS(o,s,i.fieldTransforms)}function YS(e,t,n,r,i,a){var o=e.Ru(1,t,n),s=[tT(t,r,n)],u=[i];if(a.length%2!=0)throw new wv(bv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(tT(t,a[c])),u.push(a[c+1]);for(var l=[],f=Ly.empty(),h=s.length-1;h>=0;--h)if(!aT(l,s[h])){var d=s[h],p=u[h];p=Ot(p);var v=o.Iu(d);if(p instanceof BS)l.push(d);else{var m=$S(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ny(l);return new jS(f,y,o.fieldTransforms)}function JS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return $S(n,e.Ru(r?4:3,t))}function $S(e,t){if(ZS(e=Ot(e)))return eT("Unsupported field value:",t,e),XS(e,t);if(e instanceof RS)return function(e,t){if(!MS(t.uu))throw t.Eu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Eu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.hu&&4!==t.uu)throw t.Eu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=$S(n.value,t.Tu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ot(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jv.fromDate(e);return{timestampValue:nb(t.serializer,n)}}if(e instanceof jv){var r=new jv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nb(t.serializer,r)}}if(e instanceof PS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof AS)return{bytesValue:rb(t.serializer,e._byteString)};if(e instanceof fS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Eu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ob(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Eu("Unsupported field value: ".concat(iS(e)))}(e,t)}function XS(e,t){var n={};return Ym(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qm(e,(function(e,r){var i=$S(r,t.lu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ZS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jv||e instanceof PS||e instanceof AS||e instanceof fS||e instanceof RS)}function eT(e,t,n){if(!ZS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=iS(n);throw"an object"===r?t.Eu(e+" a custom object"):t.Eu(e+" "+r)}}function tT(e,t,n){if((t=Ot(t))instanceof DS)return t._internalPath;if("string"==typeof t)return rT(e,t);throw iT("Field path arguments must be of type string or ",e,!1,void 0,n)}var nT=new RegExp("[~\\*/\\[\\]]");function rT(e,t,n){if(t.search(nT)>=0)throw iT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return w(DS,c(t.split(".")))._internalPath}catch(Xl){throw iT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function iT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new wv(bv.INVALID_ARGUMENT,s+e+u)}function aT(e,t){return e.some((function(e){return e.isEqual(t)}))}var oT=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new fS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(uT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sT=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return cr(y(n.prototype),"data",this).call(this)}}]),n}(oT);function uT(e,t){return"string"==typeof t?rT(e,t):t instanceof DS?t._internalPath:t._delegate._internalPath}function cT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wv(bv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lT=p((function e(){l(this,e)})),fT=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(lT);function hT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof lT&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof vT})).length,n=e.filter((function(e){return e instanceof dT})).length;if(t>1||t>0&&n>0)throw new wv(bv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=T(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var dT=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=this._parse(e);return TT(e._query,t),new lS(e.firestore,e.converter,Eg(e._query,t))}},{key:"_parse",value:function(e){var t=VS(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new wv(bv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){ST(o,a);var u,c=[],l=T(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(ET(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=ET(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ST(o,a),s=JS(n,t,o,"in"===a||"not-in"===a);return Gy.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fT);function pT(e,t,n){var r=t,i=uT("where",e);return dT._create(i,r,n)}var vT=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return p(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Ky.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;TT(r,a),r=Eg(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new lS(e.firestore,e.converter,Eg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(lT);var mT=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new wv(bv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wv(bv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zy(t,n);return function(e,t){if(null===bg(e)){var n=wg(e);null!==n&&CT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new lS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new mg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(fT);var yT=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return p(n,[{key:"_apply",value:function(e){return new lS(e.firestore,e.converter,Sg(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fT);var gT=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=IT(e,this.type,this._docOrFields,this._inclusive);return new lS(e.firestore,e.converter,function(e,t){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fT);function kT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gT._create("startAt",t,!0)}function bT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gT._create("startAfter",t,!1)}var wT=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=IT(e,this.type,this._docOrFields,this._inclusive);return new lS(e.firestore,e.converter,function(e,t){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fT);function xT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wT._create("endBefore",t,!1)}function _T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wT._create("endAt",t,!0)}function IT(e,t,n,r){if(n[0]=Ot(n[0]),n[0]instanceof oT)return function(e,t,n,r,i){if(!r)throw new wv(bv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=T(_g(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(_y(t,r.key));else{var c=r.data.field(u.field);if(cy(c))throw new wv(bv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new wv(bv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Fy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=VS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new wv(bv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new wv(bv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!xg(e)&&-1!==c.indexOf("/"))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Uv.fromString(c));if(!Bv.isDocumentKey(l))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Bv(l);s.push(_y(t,f))}else{var h=JS(n,r,c);s.push(h)}}return new Fy(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ET(e,t,n){if("string"==typeof(n=Ot(n))){if(""===n)throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xg(t)&&-1!==n.indexOf("/"))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Uv.fromString(n));if(!Bv.isDocumentKey(r))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return _y(e,new Bv(r))}if(n instanceof fS)return _y(e,n._key);throw new wv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(iS(n),"."))}function ST(e,t){if(!Array.isArray(e)||0===e.length)throw new wv(bv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function TT(e,t){if(t.isInequality()){var n=wg(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=bg(e);null!==i&&CT(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new wv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function CT(e,t,n){if(!n.isEqual(t))throw new wv(bv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var NT=function(){function e(){l(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(my(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Qm(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new PS(sy(e.latitude),sy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ly(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=oy(e);return new jv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Uv.fromString(e);gv(Ab(n));var r=new dy(n.get(1),n.get(3)),i=new Bv(n.popFirst(5));return r.isEqual(t)||pv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function AT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var DT=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new AS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fS(this.firestore,null,t)}}]),n}(NT);var RT=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),PT=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return l(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return p(n,[{key:"exists",value:function(){return cr(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new OT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(uT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(oT),OT=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cr(y(n.prototype),"data",this).call(this,e)}}]),n}(PT),LT=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new RT(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new OT(n._firestore,n._userDataWriter,r.key,r,new RT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wv(bv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new OT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new OT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function jT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yv()}}function MT(e,t){return e instanceof PT&&t instanceof PT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof LT&&t instanceof LT&&e._firestore===t._firestore&&mS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var FT=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new AS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fS(this.firestore,null,t)}}]),n}(NT);function UT(e){e=aS(e,fS);var t=aS(e.firestore,bS),n=wS(t),r=new FT(t);return function(e,t){var n=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function r(){return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=it(Ze().mark((function e(t,n,r){var i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=kv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new wv(bv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=iI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,GE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new PT(t,r,e._key,n,new RT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function VT(e){e=aS(e,lS);var t=aS(e.firestore,bS),n=wS(t),r=new FT(t);return cT(e._query),$E(n,e._query).then((function(n){return new LT(t,r,e,n)}))}function zT(e){e=aS(e,lS);var t=aS(e.firestore,bS),n=wS(t),r=new FT(t);return function(e,t){var n=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function r(){return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=it(Ze().mark((function e(t,n,r){var i,a,o,s,u;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ox(t,n,!0);case 3:i=e.sent,a=new II(n,i.ss),o=a.sa(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=iI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,GE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new LT(t,r,e,n)}))}function BT(e){e=aS(e,lS);var t=aS(e.firestore,bS),n=wS(t),r=new FT(t);return $E(n,e._query,{source:"server"}).then((function(n){return new LT(t,r,e,n)}))}function qT(e,t,n){e=aS(e,fS);var r=aS(e.firestore,bS),i=AT(e.converter,t,n);return YT(r,[zS(VS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fk.none())])}function GT(e,t,n){e=aS(e,fS);for(var r=aS(e.firestore,bS),i=VS(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return YT(r,[("string"==typeof(t=Ot(t))||t instanceof DS?YS(i,"updateDoc",e._key,t,n,o):QS(i,"updateDoc",e._key,t)).toMutation(e._key,fk.exists(!0))])}function KT(e){return YT(aS(e.firestore,bS),[new Sk(e._key,fk.none())])}function WT(e,t){var n=aS(e.firestore,bS),r=pS(e),i=AT(e.converter,t);return YT(n,[zS(VS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fk.exists(!1))]).then((function(){return r}))}function HT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ot(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||gS(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(gS(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof fS)l=aS(e.firestore,bS),f=gg(e._key.path),c={next:function(t){n[u]&&n[u](JT(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=aS(e,lS);l=aS(p.firestore,bS),f=p._query;var v=new FT(l);c={next:function(e){n[u]&&n[u](new LT(l,v,p,e))},error:n[u+1],complete:n[u+2]},cT(e._query)}return function(e,t,n,r){var i=new NE(r),a=new yI(t,i,n);return e.asyncQueue.enqueueAndForget(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lI,t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ca(),e.asyncQueue.enqueueAndForget(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hI,t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wS(l),f,h,c)}function QT(e,t){return function(e,t){var n=new NE(t);return e.asyncQueue.enqueueAndForget(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){kv(e).O_.add(t),t.next()},t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ca(),e.asyncQueue.enqueueAndForget(it(Ze().mark((function t(){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){kv(e).O_.delete(t)},t.next=3,QE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wS(e=aS(e,bS)),gS(t)?t:{next:t})}function YT(e,t){return function(e,t){var n=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function r(){return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=OI,r.next=3,WE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(wS(e),t)}function JT(e,t,n){var r=n.docs.get(t._key),i=new FT(e);return new PT(e,i,t._key,r,new RT(n.hasPendingWrites,n.fromCache),t.converter)}var $T={maxAttempts:5},XT=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=VS(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ZT(e,this._firestore),i=AT(r.converter,t,n),a=zS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,fk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ZT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ot(t))||t instanceof DS?YS(this._dataReader,"WriteBatch.update",i._key,t,n,o):QS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,fk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ZT(e,this._firestore);return this._mutations=this._mutations.concat(new Sk(t._key,fk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new wv(bv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ZT(e,t){if((e=Ot(e)).firestore!==t)throw new wv(bv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var eC=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=ZT(e,this._firestore),i=new FT(this._firestore);return cr(y(n.prototype),"get",this).call(this,e).then((function(e){return new PT(t._firestore,i,r._key,e._document,new RT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=VS(t)}return p(e,[{key:"get",value:function(e){var t=this,n=ZT(e,this._firestore),r=new DT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return yv();var i=e[0];if(i.isFoundDocument())return new oT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new oT(t._firestore,r,n._key,null,n.converter);throw yv()}))}},{key:"set",value:function(e,t,n){var r=ZT(e,this._firestore),i=AT(r.converter,t,n),a=zS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ZT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ot(t))||t instanceof DS?YS(this._dataReader,"Transaction.update",i._key,t,n,o):QS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ZT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function tC(e,t,n){e=aS(e,bS);var r=Object.assign(Object.assign({},$T),n);return function(e){if(e.maxAttempts<1)throw new wv(bv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new xv;return e.asyncQueue.enqueueAndForget(it(Ze().mark((function i(){var a;return Ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,HE(e);case 2:a=i.sent,new RE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(wS(e),(function(n){return t(new eC(e,n))}),r)}function nC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new KS("arrayUnion",t)}function rC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){lv=e}(An),_n(new Lt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new bS(new Sv(e.getProvider("auth-internal")),new Av(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wv(bv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dy(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),jn(uv,"4.1.0",e),jn(uv,"4.1.0","esm2017")}();function iC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function aC(){if("undefined"===typeof Uint8Array)throw new wv("unimplemented","Uint8Arrays are not available in this environment.")}function oC(){if("undefined"==typeof atob)throw new wv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var sC=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return oC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return aC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return oC(),new e(AS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return aC(),new e(AS.fromUint8Array(t))}}]),e}();function uC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var cC=function(){function e(){l(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){NS(e=aS(e,bS));var n=wS(e);if(n._uninitializedComponentsProvider)throw new wv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");vv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new TE;return _S(n,i,new EE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){NS(e=aS(e,bS));var t=wS(e);if(t._uninitializedComponentsProvider)throw new wv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");vv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new TE;return _S(t,r,new SE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new wv(bv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new xv;return e._queue.enqueueAndForgetEvenWhileRestricted(it(Ze().mark((function n(){return Ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(im.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,im.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(kx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),lC=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof dy||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||vv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ES(this._delegate)}},{key:"disableNetwork",value:function(){return SS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&tS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return IS(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return QT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new wv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new IC(this,dS(this._delegate,e))}catch(t){throw mC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new vC(this,pS(this._delegate,e))}catch(t){throw mC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wC(this,function(e,t){if(e=aS(e,uS),eS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wv(bv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new lS(e,null,function(e){return new mg(Uv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw mC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return tC(this._delegate,(function(n){return e(new hC(t,n))}))}},{key:"batch",value:function(){var e=this;return wS(this._delegate),new dC(new XT(this._delegate,(function(t){return YT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return TS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return CS(this._delegate,e).then((function(e){return e?new wC(t,e):null}))}}]),e}(),fC=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new sC(new AS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return vC.forKey(t,this.firestore,null)}}]),n}(NT);var hC=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new fC(t)}return p(e,[{key:"get",value:function(e){var t=this,n=EC(e);return this._delegate.get(n).then((function(e){return new kC(t._firestore,new PT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=EC(e);return n?(iC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=EC(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=EC(e);return this._delegate.delete(t),this}}]),e}(),dC=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=EC(e);return n?(iC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=EC(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=EC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),pC=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new OT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new fC(t),n),i.set(n,a)),a}}]),e}();pC.INSTANCES=new WeakMap;var vC=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fC(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new IC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new IC(this.firestore,dS(this._delegate,e))}catch(t){throw mC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ot(e))instanceof fS&&vS(this._delegate,e)}},{key:"set",value:function(e,t){t=iC("DocumentReference.set",t);try{return t?qT(this._delegate,e,t):qT(this._delegate,e)}catch(n){throw mC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?GT(this._delegate,e):GT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw mC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return KT(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yC(n),a=gC(n,(function(t){return new kC(e.firestore,new PT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return HT(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?UT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=aS(e,fS);var t=aS(e.firestore,bS);return JE(wS(t),e._key,{source:"server"}).then((function(n){return JT(t,e,n)}))}(this._delegate):function(e){e=aS(e,fS);var t=aS(e.firestore,bS);return JE(wS(t),e._key).then((function(n){return JT(t,e,n)}))}(this._delegate)).then((function(e){return new kC(t.firestore,new PT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new wv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new fS(n._delegate,r,new Bv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new fS(n._delegate,r,t))}}]),e}();function mC(e,t,n){return e.message=e.message.replace(t,n),e}function yC(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function gC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uC(e[0])?e[0]:uC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kC=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new vC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return MT(this._delegate,e._delegate)}}]),e}(),bC=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||yv(),t}}]),n}(kC),wC=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fC(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,hT(this._delegate,pT(t,n,r)))}catch(i){throw mC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,hT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=uT("orderBy",e);return mT._create(n,t)}(t,n)))}catch(r){throw mC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,hT(this._delegate,(oS("limit",n=t),yT._create("limit",n,"F"))))}catch(n){throw mC(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,hT(this._delegate,(oS("limitToLast",n=t),yT._create("limitToLast",n,"L"))))}catch(n){throw mC(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,hT(this._delegate,kT.apply(void 0,arguments)))}catch(t){throw mC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,hT(this._delegate,bT.apply(void 0,arguments)))}catch(t){throw mC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,hT(this._delegate,xT.apply(void 0,arguments)))}catch(t){throw mC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,hT(this._delegate,_T.apply(void 0,arguments)))}catch(t){throw mC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return mS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?zT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?BT(this._delegate):VT(this._delegate)).then((function(e){return new _C(t.firestore,new LT(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yC(n),a=gC(n,(function(t){return new _C(e.firestore,new LT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return HT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),xC=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new bC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),_C=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new wC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new bC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new xC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new bC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return MT(this._delegate,e._delegate)}}]),e}(),IC=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new vC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new vC(this.firestore,void 0===e?pS(this._delegate):pS(this._delegate,e))}catch(t){throw mC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return WT(this._delegate,e).then((function(e){return new vC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(pC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wC);function EC(e){return aS(e,fS)}var SC=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=w(DS,n)}return p(e,[{key:"isEqual",value:function(e){return(e=Ot(e))instanceof DS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(zv.keyField().canonicalString())}}]),e}(),TC=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new GS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new BS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=nC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=rC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new HS("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),CC={Firestore:lC,GeoPoint:PS,Timestamp:jv,Blob:sC,Transaction:hC,WriteBatch:dC,DocumentReference:vC,DocumentSnapshot:kC,Query:wC,QueryDocumentSnapshot:bC,QuerySnapshot:_C,CollectionReference:IC,FieldPath:SC,FieldValue:TC,setLogLevel:function(e){var t;t=e,fv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Lt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},CC)))}(e,(function(e,t){return new lC(e,t,new cC)})),e.registerVersion("@firebase/firestore-compat","0.3.14")}(ur);var NC=ur.initializeApp({apiKey:"AIzaSyCv8UUs0Gk3VoAdUMtuk3RCP9viopS9fEU",authDomain:"urban-app-92c07.firebaseapp.com",projectId:"urban-app-92c07",storageBucket:"urban-app-92c07.appspot.com",messagingSenderId:"1011588780692",appId:"1:1011588780692:web:e3ef0765fb5f8754b91a81",measurementId:"G-WFMP5T1KB4"}),AC=NC.auth(),DC=ur.firestore(),RC=new Ga,PC=new Ka,OC=function(){pu(AC,RC).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},LC=function(){pu(AC,PC).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},jC=r.createContext();function MC(){return(0,r.useContext)(jC)}function FC(e){var t=e.children,n=E((0,r.useState)(),2),i=n[0],a=n[1],o=E((0,r.useState)(!0),2),s=o[0],u=o[1];(0,r.useEffect)((function(){return AC.onAuthStateChanged((function(e){a(e),u(!1)}))}),[]);var c={currentUser:i,signup:function(e,t){return AC.createUserWithEmailAndPassword(e,t).then((function(e){DC.collection("users").doc(e.user.uid)}))},login:function(e,t){return AC.signInWithEmailAndPassword(e,t)},logout:function(){return AC.signOut()}};return(0,Je.jsx)(jC.Provider,{value:c,children:!s&&t})}var UC=(0,r.createContext)(),VC=function(){return(0,r.useContext)(UC)},zC=function(e){var t=e.children,n=E((0,r.useState)([]),2),i=n[0],a=n[1],o=E((0,r.useState)([]),2),s=o[0],u=o[1],l=E((0,r.useState)([]),2),f=l[0],h=l[1],d=dS(DC,"venues"),p=dS(DC,"events"),v=dS(DC,"Favourite events"),m=E((0,r.useState)(""),2),y=(m[0],m[1],MC()),g=y.currentUser,k=(y.logout,we(),function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VT(d);case 3:t=e.sent,n=t.docs.map((function(e){return nt(nt({},e.data()),{},{id:e.id})})),a(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()),b=function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VT(p);case 3:t=e.sent,n=t.docs.map((function(e){return nt(nt({},e.data()),{},{id:e.id})})),u(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=it(Ze().mark((function e(){var t,n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=hT(v,pT("userEmail","==",g.email)),e.next=4,VT(t);case 4:n=e.sent,r=n.docs.map((function(e){return nt(nt({},e.data()),{},{id:e.id})})),h(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){k(),b(),w()}),[]);var x=E((0,r.useState)(""),2),_=x[0],I=x[1],S=E((0,r.useState)(""),2),T=S[0],C=S[1],N=E((0,r.useState)(""),2),A=N[0],D=N[1],R=E((0,r.useState)(""),2),P=R[0],O=R[1],L=E((0,r.useState)(""),2),j=L[0],M=L[1],F=function(){var e=it(Ze().mark((function e(){var t,n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={type:P,contact:j,name:A,hours:T,address:_},a((function(e){return[t].concat(c(e))})),O(""),M(""),D(""),C(""),I(""),e.next=10,WT(dS(DC,"venues"),t);case 10:n=e.sent,console.log("Document written with ID: ",n.id),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),U=E((0,r.useState)(""),2),V=U[0],z=U[1],B=E((0,r.useState)(""),2),q=B[0],G=B[1],K=E((0,r.useState)(""),2),W=K[0],H=K[1],Q=E((0,r.useState)(""),2),Y=Q[0],J=Q[1],$=E((0,r.useState)(""),2),X=$[0],Z=$[1],ee=E((0,r.useState)(""),2),te=ee[0],ne=ee[1],re=function(){var e=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WT(p,{eventType:V,date:q,time:W,location:Y,performers:X,pnumber:te});case 3:b(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=it(Ze().mark((function e(t){var n;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pS(DC,"venues",t),e.prev=1,console.log("Deleting venue from Firestore..."),e.next=5,KT(n);case 5:console.log("Venue deleted from Firestore."),a((function(e){return e.filter((function(e){return e.id!==t}))})),console.log("Local state updated."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error deleting venue:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=it(Ze().mark((function e(t){var n,r,i,a;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pS(DC,"events",t),console.log("Deleting event with id:",t),console.log("eventDoc:",n),e.prev=3,console.log("Deleting event from Firestore..."),e.next=7,KT(n);case 7:return r=hT(dS(DC,"Favourite events"),pT("eventId","==",t)),e.next=10,VT(r);case 10:if((i=e.sent).empty){e.next=15;break}return a=i.docs[0],e.next=15,KT(a.ref);case 15:console.log("Event deleted from Firestore."),u((function(e){return e.filter((function(e){return e.id!==t}))})),h((function(e){return e.filter((function(e){return e.id!==t}))})),console.log("Local state updated."),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),console.error("Error deleting event:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=it(Ze().mark((function e(t){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=dS(DC,"Favourite events"),e.next=4,WT(n,nt(nt({},t),{},{userEmail:g.email,eventId:t.id}));case 4:r=e.sent,t.id=r.id,h((function(e){return[].concat(c(e),[t])})),console.log("Event added to favorites:",t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding event to favorites:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=it(Ze().mark((function e(t){var n,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=null===(n=f.find((function(e){return e.id===t.id})))||void 0===n?void 0:n.id)){e.next=8;break}return i=pS(DC,"Favourite events",r),e.next=6,KT(i);case 6:t.isFavorited=!1,h(f.filter((function(e){return e.id!==t.id})));case 8:console.log("Event removed from favorites:",t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error removing event from favorites:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,Je.jsx)(UC.Provider,{value:{venues:i,setVenues:a,events:s,setEvents:u,favoriteEvents:f,getEvents:b,getVenues:k,getUserFavoriteEvents:w,onSubmitNewEvent:re,addToFavorites:oe,removeFromFavorites:se,deleteEvent:ae,deleteVenue:ie,setNewType:z,setNewDate:G,setNewTime:H,setNewLocation:J,setNewPerformers:Z,setNewPhoneNumber:ne,setNewAddress:I,setNewHours:C,setNewName:D,setVenueType:O,setNewContact:M,onSubmitNewVenue:F},children:t})},BC=function(){var e=MC(),t=e.currentUser,n=(e.logOut,VC()),r=(n.events,n.favoriteEvents,n.getEvents,n.getUserFavoriteEvents,n.deleteEvent,n.addToFavorites,n.removeFromFavorites,n.setNewType,n.setNewDate,n.setNewTime,n.setNewLocation,n.setNewPerformers,n.setNewPhoneNumber,n.onSubmitNewEvent,n.setNewContact),i=n.setVenueType,a=n.setNewName,o=n.setNewHours,s=n.setNewAddress,u=n.onSubmitNewVenue;return(0,Je.jsxs)("div",{className:"exploreContainer",children:[t&&"artan.ebibi@live.com"===t.email?(0,Je.jsxs)("div",{style:{textAlign:"center"},children:[(0,Je.jsx)("h3",{style:{textAlign:"center"},children:"add new venues"}),(0,Je.jsx)("input",{type:"text",placeholder:"Type of venue...",onChange:function(e){return i(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Contact of venue...",onChange:function(e){return r(e.target.value)}}),(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Name of venue...",onChange:function(e){return a(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Working hours of venue...",onChange:function(e){return o(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Address of venue...",onChange:function(e){return s(e.target.value)}}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("button",{style:{background:"black"},onClick:u,children:"Add new venue"}),(0,Je.jsx)("br",{})]}):(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("h4",{children:"Only developer with email: artan.ebibi@live.com can add new events and delete events"})}),(0,Je.jsx)("p",{style:{fontFamily:"against",fontSize:"30px",fontWeight:"bold",marginTop:"50px"},children:"Where do you feel like going today?"}),(0,Je.jsxs)("div",{className:"cardContainer",children:[(0,Je.jsx)("article",{className:"body c1",children:(0,Je.jsxs)(He,{className:"cardC Coffee",to:"/CoffeeShop",children:[(0,Je.jsx)("div",{className:"overlayC"}),(0,Je.jsxs)("div",{className:"circleC",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3.2rem",color:"black",marginLeft:"-18px"},children:"coffee"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"COFFEE"})})]})}),(0,Je.jsx)("article",{className:"body c2",children:(0,Je.jsxs)(He,{className:"cardS Sports",to:"/Sports",children:[(0,Je.jsx)("div",{className:"overlayS"}),(0,Je.jsxs)("div",{className:"circleS",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3.2rem",color:"black",marginLeft:"-18px"},children:"sports_volleyball"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"SPORTS"})})]})}),(0,Je.jsx)("article",{className:"body c3",children:(0,Je.jsxs)(He,{className:"cardF Festival",to:"/Restaurant",children:[(0,Je.jsx)("div",{className:"overlayF"}),(0,Je.jsxs)("div",{className:"circleF",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3.2rem",color:"black",marginLeft:"-18px"},children:"restaurant"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"RESTAURANT"})})]})}),(0,Je.jsx)("article",{className:"body c4",children:(0,Je.jsxs)(He,{className:"cardP Pub",to:"/PubNbar",children:[(0,Je.jsx)("div",{className:"overlayP"}),(0,Je.jsxs)("div",{className:"circleP",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3.2rem",color:"black",marginLeft:"-18px"},children:"sports_bar"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"PUBS & BARS"})})]})}),(0,Je.jsx)("article",{className:"body c5",children:(0,Je.jsxs)(He,{className:"cardCl Club",to:"/Clubs",children:[(0,Je.jsx)("div",{className:"overlayCl"}),(0,Je.jsxs)("div",{className:"circleCl",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"3.2rem",color:"black",marginLeft:"-18px"},children:"liquor"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Clubs"})})]})})]})]})},qC=function(){var e=E((0,r.useState)(""),2),t=(e[0],e[1],MC()),n=t.currentUser,i=(t.logout,we(),dS(DC,"events")),a=function(){var e=it(Ze().mark((function e(){var t,n,r,a,o,s;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,VT(i);case 3:n=e.sent,r=n.docs.map((function(e){return nt(nt({},e.data()),{},{id:e.id})})),a=T(r),e.prev=6,a.s();case 8:if((o=a.n()).done){e.next=16;break}if(s=o.value,!(new Date(s.date)<t)){e.next=14;break}return e.next=14,u(s.id,s.eventId);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(){return e.apply(this,arguments)}}();a();var o=VC(),s=o.events,u=(o.favoriteEvents,o.getEvents,o.getUserFavoriteEvents,o.deleteEvent),c=o.addToFavorites,l=(o.removeFromFavorites,o.setNewType),f=o.setNewDate,h=o.setNewTime,d=o.setNewLocation,p=o.setNewPerformers,v=o.setNewPhoneNumber,m=o.onSubmitNewEvent;return(0,Je.jsxs)("div",{children:[n&&"artan.ebibi@live.com"===n.email?(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h2",{children:"Add a new event bro"}),(0,Je.jsxs)("div",{style:{textAlign:"center"},children:[(0,Je.jsx)("input",{type:"text",placeholder:"Type of event...",onChange:function(e){return l(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Date of event...",onChange:function(e){return f(e.target.value)}}),(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Time of event...",onChange:function(e){return h(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Location of event...",onChange:function(e){return d(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Performers of event...",onChange:function(e){return p(e.target.value)}})," ",(0,Je.jsx)("br",{}),(0,Je.jsx)("input",{type:"text",placeholder:"Phone number of place...",onChange:function(e){return v(e.target.value)}}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("button",{style:{background:"black"},onClick:m,children:"Add new event"}),(0,Je.jsx)("br",{})]})]}):(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("h4",{children:"Only developer with email: artan.ebibi@live.com can add new events and delete events"})}),(0,Je.jsx)("div",{children:n?(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("h3",{style:{marginTop:"200px"},children:["Go to ",(0,Je.jsx)(He,{to:"/Account",children:"Profile"})," to see your favourite events "]})}),(0,Je.jsx)("div",{className:"event-card-container",children:s.map((function(e){return(0,Je.jsxs)("div",{style:{border:"2px solid darkgreen",marginTop:"30px",padding:"10px",width:"320px",height:"500px"},className:"event-card",children:[(0,Je.jsx)("h1",{style:{color:"rgb(139,0,0)",textAlign:"center",fontWeight:"bolder",fontSize:"45px",fontFamily:"franchise",marginTop:"190px"},children:e.eventType}),(0,Je.jsxs)("h3",{style:{marginTop:"-20px"},className:"dateC",children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-8px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"calendar_month"})}),(0,Je.jsxs)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-23px"},children:[e.date," "]}),(0,Je.jsx)("br",{})]}),(0,Je.jsxs)("h3",{className:"timeC",children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"schedule"})}),(0,Je.jsx)("div",{className:"timeCdisplay",style:{marginLeft:"40px",fontSize:"24px",marginTop:"-45px"},children:e.time})]}),(0,Je.jsxs)("h2",{children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-6px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"location_on"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.location})]}),(0,Je.jsxs)("h2",{style:{display:"block"},children:[(0,Je.jsx)("div",{style:{display:"inline",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"music_note"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.performers})]}),(0,Je.jsxs)("h2",{style:{display:"",marginTop:"-10px"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"phone"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.pnumber})]}),(0,Je.jsxs)("div",{className:"heart-container",title:"Like",style:{marginTop:"25px"},children:[(0,Je.jsx)("input",{type:"checkbox",className:"checkbox",id:"Give-It-An-Id",onChange:function(){return c(e)}}),(0,Je.jsxs)("div",{className:"svg-container",children:[(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-outline",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Zm-3.585,18.4a2.973,2.973,0,0,1-3.83,0C4.947,16.006,2,11.87,2,8.967a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,11,8.967a1,1,0,0,0,2,0,4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,22,8.967C22,11.87,19.053,16.006,13.915,20.313Z"})}),(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-filled",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Z"})}),(0,Je.jsx)("svg",{className:"svg-celebrate",width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg"})]})]}),"artan.ebibi@live.com"===n.email?(0,Je.jsx)("button",{style:{background:"black",marginTop:"-46px",position:"absolute",marginLeft:"155px"},onClick:function(){return u(e.id,e.eventId)},children:"Delete event"}):(0,Je.jsx)(Je.Fragment,{children:" "})]})}))})]}):(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h2",{children:"Display of events"}),(0,Je.jsx)("h5",{children:"only signed in users can favour the events"}),(0,Je.jsx)("div",{className:"event-card-container",children:s.map((function(e){return(0,Je.jsxs)("div",{style:{border:"2px solid darkgreen !important",marginTop:"30px",padding:"10px",width:"320px",height:"1550px !important"},className:"event-card",children:[(0,Je.jsx)("h1",{style:{color:"rgb(139,0,0)",textAlign:"center",fontWeight:"bolder",fontSize:"45px",marginTop:"153px",fontFamily:"franchise"},children:e.eventType}),(0,Je.jsxs)("h3",{children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-4px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"calendar_month"})}),(0,Je.jsxs)("div",{style:{marginLeft:"40px",fontSize:"24px"},children:[e.date," "]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-28px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"schedule"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-25px"},children:e.time})]}),(0,Je.jsxs)("h2",{children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-6px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"location_on"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.location})]}),(0,Je.jsxs)("h2",{style:{display:"block"},children:[(0,Je.jsx)("div",{style:{display:"inline",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"music_note"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.performers})]}),(0,Je.jsxs)("h2",{style:{display:"",marginTop:"-10px"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-10px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"phone"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-15px"},children:e.pnumber})]})]})}))})]})})]})},GC=function(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),i=MC().signup,a=E((0,r.useState)(""),2),o=a[0],s=a[1],u=E((0,r.useState)(!1),2),c=u[0],l=u[1],f=we();function h(){return(h=it(Ze().mark((function r(a){return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),t.current.value===n.current.value){r.next=3;break}return r.abrupt("return",s("Passwords do not match"));case 3:return r.prev=3,s(""),l(!0),r.next=8,i(e.current.value,t.current.value);case 8:f("/Account"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),s("Failed to create an account");case 14:l(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))).apply(this,arguments)}return(0,Je.jsxs)("div",{className:"form-container",children:[(0,Je.jsx)("p",{className:"title",children:"Sign Up"}),o&&(0,Je.jsx)("div",{className:"error-message",children:o}),(0,Je.jsxs)("form",{className:"form",onSubmit:function(e){return h.apply(this,arguments)},children:[(0,Je.jsxs)("div",{className:"input-group",children:[(0,Je.jsx)("label",{htmlFor:"username",children:"Email"}),(0,Je.jsx)("div",{children:(0,Je.jsx)("input",{type:"email",name:"email",placeholder:"",ref:e})})]}),(0,Je.jsxs)("div",{className:"input-group",children:[(0,Je.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Je.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"",ref:t})]}),(0,Je.jsxs)("div",{className:"input-group",children:[(0,Je.jsx)("label",{htmlFor:"password",children:"Confirm Password"}),(0,Je.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"",ref:n}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]}),(0,Je.jsx)("button",{className:"sign",disabled:c,children:"Sign Up"})]}),(0,Je.jsxs)("div",{className:"social-message",children:[(0,Je.jsx)("div",{className:"line"}),(0,Je.jsx)("p",{className:"message",children:"Sign Up with social accounts"}),(0,Je.jsx)("div",{className:"line"})]}),(0,Je.jsxs)("div",{className:"social-icons",children:[(0,Je.jsxs)("button",{"aria-label":"Log in with Google",className:"icon",onClick:OC,children:[f("/Account"),(0,Je.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:(0,Je.jsx)("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})]}),(0,Je.jsxs)("button",{"aria-label":"Log in with GitHub",className:"icon",onClick:LC,children:[f("/Account"),(0,Je.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:(0,Je.jsx)("path",{d:"M16 0.396c-8.839 0-16 7.167-16 16 0 7.073 4.584 13.068 10.937 15.183 0.803 0.151 1.093-0.344 1.093-0.772 0-0.38-0.009-1.385-0.015-2.719-4.453 0.964-5.391-2.151-5.391-2.151-0.729-1.844-1.781-2.339-1.781-2.339-1.448-0.989 0.115-0.968 0.115-0.968 1.604 0.109 2.448 1.645 2.448 1.645 1.427 2.448 3.744 1.74 4.661 1.328 0.14-1.031 0.557-1.74 1.011-2.135-3.552-0.401-7.287-1.776-7.287-7.907 0-1.751 0.62-3.177 1.645-4.297-0.177-0.401-0.719-2.031 0.141-4.235 0 0 1.339-0.427 4.4 1.641 1.281-0.355 2.641-0.532 4-0.541 1.36 0.009 2.719 0.187 4 0.541 3.043-2.068 4.381-1.641 4.381-1.641 0.859 2.204 0.317 3.833 0.161 4.235 1.015 1.12 1.635 2.547 1.635 4.297 0 6.145-3.74 7.5-7.296 7.891 0.556 0.479 1.077 1.464 1.077 2.959 0 2.14-0.020 3.864-0.020 4.385 0 0.416 0.28 0.916 1.104 0.755 6.4-2.093 10.979-8.093 10.979-15.156 0-8.833-7.161-16-16-16z"})})]})]}),(0,Je.jsxs)("p",{className:"signup",children:["Have an account? ",(0,Je.jsx)(He,{rel:"noopener noreferrer",to:"/LogIn",className:"",children:"Log In"})]})]})},KC=function(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=MC().login,i=E((0,r.useState)(""),2),a=i[0],o=i[1],s=E((0,r.useState)(!1),2),u=s[0],c=s[1],l=we();function f(){return(f=it(Ze().mark((function r(i){return Ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.preventDefault(),r.prev=1,o(""),c(!0),r.next=6,n(e.current.value,t.current.value);case 6:l("/Account"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),o("Failed to log in");case 12:c(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return(0,Je.jsxs)("div",{className:"form-container",children:[(0,Je.jsx)("p",{className:"title",children:"Log In"}),a&&(0,Je.jsx)("div",{className:"error-message",children:a}),(0,Je.jsxs)("form",{className:"form",onSubmit:function(e){return f.apply(this,arguments)},children:[(0,Je.jsxs)("div",{className:"input-group",children:[(0,Je.jsx)("label",{htmlFor:"username",children:"Email"}),(0,Je.jsx)("div",{children:(0,Je.jsx)("input",{type:"email",name:"email",placeholder:"",ref:e})})]}),(0,Je.jsxs)("div",{className:"input-group",children:[(0,Je.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Je.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"",ref:t})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("button",{className:"sign",disabled:u,children:"Log In"})]}),(0,Je.jsxs)("div",{className:"social-message",children:[(0,Je.jsx)("div",{className:"line"}),(0,Je.jsx)("p",{className:"message",children:"Continue with social accounts"}),(0,Je.jsx)("div",{className:"line"})]}),(0,Je.jsxs)("div",{className:"social-icons",children:[(0,Je.jsxs)("button",{"aria-label":"Log in with Google",className:"icon",onClick:OC,children:[l("/Account"),(0,Je.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:(0,Je.jsx)("path",{d:"M16.318 13.714v5.484h9.078c-0.37 2.354-2.745 6.901-9.078 6.901-5.458 0-9.917-4.521-9.917-10.099s4.458-10.099 9.917-10.099c3.109 0 5.193 1.318 6.38 2.464l4.339-4.182c-2.786-2.599-6.396-4.182-10.719-4.182-8.844 0-16 7.151-16 16s7.156 16 16 16c9.234 0 15.365-6.49 15.365-15.635 0-1.052-0.115-1.854-0.255-2.651z"})})]}),(0,Je.jsxs)("button",{"aria-label":"Log in with GitHub",className:"icon",onClick:LC,children:["'",l("/Account"),(0,Je.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"w-5 h-5 fill-current",children:(0,Je.jsx)("path",{d:"M16 0.396c-8.839 0-16 7.167-16 16 0 7.073 4.584 13.068 10.937 15.183 0.803 0.151 1.093-0.344 1.093-0.772 0-0.38-0.009-1.385-0.015-2.719-4.453 0.964-5.391-2.151-5.391-2.151-0.729-1.844-1.781-2.339-1.781-2.339-1.448-0.989 0.115-0.968 0.115-0.968 1.604 0.109 2.448 1.645 2.448 1.645 1.427 2.448 3.744 1.74 4.661 1.328 0.14-1.031 0.557-1.74 1.011-2.135-3.552-0.401-7.287-1.776-7.287-7.907 0-1.751 0.62-3.177 1.645-4.297-0.177-0.401-0.719-2.031 0.141-4.235 0 0 1.339-0.427 4.4 1.641 1.281-0.355 2.641-0.532 4-0.541 1.36 0.009 2.719 0.187 4 0.541 3.043-2.068 4.381-1.641 4.381-1.641 0.859 2.204 0.317 3.833 0.161 4.235 1.015 1.12 1.635 2.547 1.635 4.297 0 6.145-3.74 7.5-7.296 7.891 0.556 0.479 1.077 1.464 1.077 2.959 0 2.14-0.020 3.864-0.020 4.385 0 0.416 0.28 0.916 1.104 0.755 6.4-2.093 10.979-8.093 10.979-15.156 0-8.833-7.161-16-16-16z"})})]})]}),(0,Je.jsxs)("p",{className:"signup",children:["Need an account? ",(0,Je.jsx)(He,{rel:"noopener noreferrer",to:"/SignUp",className:"",children:"Sign Up"})]})]})},WC=function(){var e=E((0,r.useState)(""),2),t=e[0],n=e[1],i=MC(),a=i.currentUser,o=i.logout,s=we(),u=VC(),c=(u.events,u.favoriteEvents),l=(u.getEvents,u.getUserFavoriteEvents,u.deleteEvent),f=(u.addToFavorites,u.removeFromFavorites);function h(){return(h=it(Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,o();case 4:s("/LogIn"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"account",children:[t&&(0,Je.jsx)("div",{className:"error-message",children:t}),a?(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsxs)("div",{className:"profileContainer",style:{background:"gray",marginTop:"10px",borderRadius:"10px",boxShadow:"rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px"},children:[(0,Je.jsx)("h3",{style:{textAlign:"left",display:"inline",float:"left",fontFamily:"against",paddingLeft:"15px"},children:"Profile"}),(0,Je.jsxs)("h3",{style:{textAlign:"left",clear:"both",fontFamily:"fira",paddingLeft:"15px"},children:[(0,Je.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{style:{display:"flex",justifyContent:"center",alignContent:"center"}}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{style:{display:"flex",justifyContent:"center",alignContent:"center",marginTop:"10px",paddingBottom:"12px"},children:(0,Je.jsx)("button",{className:"logout",style:{background:"black",fontWeight:"light",marginTop:"-30px"},onClick:function(){return h.apply(this,arguments)},children:"Log Out"})})]}),(0,Je.jsxs)("div",{className:"favEventsContainer",style:{background:"gray",borderRadius:"10px",boxShadow:"rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px"},children:[(0,Je.jsx)("div",{style:{},children:(0,Je.jsx)("h2",{style:{marginTop:"100px",fontFamily:"against",padding:"10px"},children:"Favourite events "})}),(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("h3",{style:{marginTop:"70px",fontFamily:"fira",paddingLeft:"15px"},children:["Go to ",(0,Je.jsx)(He,{to:"/Events",children:"events"})," to see more events "]})}),(0,Je.jsx)("div",{className:"event-card-container",children:c.map((function(e){return(0,Je.jsxs)("div",{style:{border:"2px solid darkgreen",marginTop:"30px",padding:"10px",width:"320px",height:"500px"},className:"event-card",children:[(0,Je.jsx)("h1",{style:{color:"rgb(139,0,0)",textAlign:"center",fontWeight:"bolder",fontSize:"45px",fontFamily:"franchise",marginTop:"190px"},children:e.eventType}),(0,Je.jsxs)("h3",{style:{marginTop:"-20px"},className:"dateC",children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-8px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"calendar_month"})}),(0,Je.jsxs)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-23px"},children:[e.date," "]}),(0,Je.jsx)("br",{})]}),(0,Je.jsxs)("h3",{className:"timeC",style:{display:"inline"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"schedule"})}),(0,Je.jsx)("div",{className:"timeCdisplay",style:{marginLeft:"40px",fontSize:"24px",marginTop:"-45px"},children:e.time})]}),(0,Je.jsxs)("h2",{style:{display:"block"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-6px",marginLeft:"-161px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"location_on"})}),(0,Je.jsx)("div",{style:{marginLeft:"-70px",fontSize:"24px",marginTop:"-17px"},children:e.location})]}),(0,Je.jsxs)("h2",{style:{display:"block"},children:[(0,Je.jsx)("div",{style:{display:"inline",marginTop:"-5px",position:"absolute",marginLeft:"-161px"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"music_note"})}),(0,Je.jsx)("div",{style:{marginLeft:"-130px",fontSize:"24px",marginTop:"-17px"},children:e.performers})]}),(0,Je.jsxs)("h2",{style:{display:"",marginTop:"22px",marginLeft:"-320px"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"phone"})}),(0,Je.jsx)("div",{style:{marginLeft:"240px",fontSize:"24px",marginTop:"-17px"},children:e.pnumber})]}),(0,Je.jsxs)("div",{className:"heart-container",title:"Like",style:{marginTop:"25px"},children:[(0,Je.jsx)("input",{type:"checkbox",checked:!0,className:"checkbox",id:"Give-It-An-Id",onChange:function(){return f(e)}}),(0,Je.jsxs)("div",{className:"svg-container",children:[(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-outline",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Zm-3.585,18.4a2.973,2.973,0,0,1-3.83,0C4.947,16.006,2,11.87,2,8.967a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,11,8.967a1,1,0,0,0,2,0,4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,22,8.967C22,11.87,19.053,16.006,13.915,20.313Z"})}),(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-filled",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Z"})}),(0,Je.jsx)("svg",{className:"svg-celebrate",width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg"})]})]}),"artan.ebibi@live.com"===a.email?(0,Je.jsx)("button",{style:{background:"black",marginTop:"-46px",position:"absolute",marginLeft:"155px"},onClick:function(){return l(e.id,e.eventId)},children:"Delete event"}):(0,Je.jsx)(Je.Fragment,{children:" "})]})}))})]})]})]}):(0,Je.jsxs)("h3",{style:{fontFamily:"fira"},children:["Please ",(0,Je.jsx)(He,{to:"/LogIn",children:"log in"})," or ",(0,Je.jsx)(He,{to:"/SignUp",children:"sign up"})," to view your profile and favour events so you dont miss on anything you like ."]})]})})},HC=function(){var e=MC(),t=(e.currentUser,e.logout,we()),n=VC(),r=n.venues;n.deleteVenue,n.setVenues,n.setEvents,n.setFavoriteEvents,n.setNewContact,n.setVenueType,n.setNewName,n.setNewHours,n.setNewAddress;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h1",{style:{fontFamily:"requema",fontSize:"3rem"},children:"Coffee shops"}),(0,Je.jsx)(He,{to:"/Explore",children:(0,Je.jsxs)("div",{style:{position:"sticky",zIndex:"1000",top:"20px",marginRight:"20px",marginLeft:"85%"},className:"goBack",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black",padding:"3px",borderRadius:"90px",border:"4px solid black"},children:"arrow_back"})]})}),(0,Je.jsx)("div",{className:"venueCard-container",children:r.filter((function(e){return"Coffee Shop"===e.type})).map((function(e){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{className:"card",style:{background:"rgba(100, 60, 30, 1)",marginBottom:"40px"},children:[(0,Je.jsxs)("div",{className:"card__wrapper",children:[(0,Je.jsx)("div",{className:"card__back",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 24",height:"24",width:"14",children:(0,Je.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"3",stroke:"#fff",d:"M12 2L2 12L12 22"})})}),(0,Je.jsx)("div",{className:"card__menu",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",width:"29",viewBox:"0 0 29 14",height:"14",fill:"none",children:(0,Je.jsx)("path",{fill:"#fff",d:"m16.5714 9.16667h10.3572c.5493 0 1.0762.22827 1.4647.6346s.6067.95743.6067 1.53203c0 .5747-.2182 1.1258-.6067 1.5321s-.9154.6346-1.4647.6346h-10.3572c-.5493 0-1.0762-.2283-1.4647-.6346s-.6067-.9574-.6067-1.5321c0-.5746.2182-1.1257.6067-1.53203s.9154-.6346 1.4647-.6346zm-14.49997-8.66667h24.85717c.5493 0 1.0762.228273 1.4647.6346.3885.40633.6067.95743.6067 1.53207 0 .57463-.2182 1.12573-.6067 1.53206s-.9154.6346-1.4647.6346h-24.85717c-.54938 0-1.076254-.22827-1.464722-.6346s-.606708-.95743-.606708-1.53206c0-.57464.21824-1.12574.606708-1.53207.388468-.406327.915342-.6346 1.464722-.6346z"})})})]}),(0,Je.jsx)("h2",{style:{color:"floralwhite",textAlign:"center",paddingBottom:"15px",fontSize:"27px",fontFamily:"requema"},children:e.name}),(0,Je.jsxs)("div",{className:"card__img",style:{background:"black"},children:[(0,Je.jsx)("div",{className:"smoke",style:{marginTop:"130px"}}),(0,Je.jsx)("div",{className:"cup",style:{marginTop:"120px"},children:(0,Je.jsx)("div",{className:"coffee"})})]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"floralwhite"},children:"Working hours: "}),e.hours]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"floralwhite"},children:"Address: "}),e.address]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"floralwhite"},children:"Contact: "}),e.contact]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"cta-buttons",children:(0,Je.jsx)("button",{className:"download-button",style:{border:"2px solid black"},onClick:function(){return function(e){var n=encodeURIComponent(e);t("/search?eventType=".concat(n))}(e.name)},children:"Search events in this venue"})})]})]},e.id)}))})]})},QC=function(){var e=MC(),t=(e.currentUser,e.logout,we()),n=VC(),r=n.venues;n.deleteVenue,n.events,n.favoriteEvents,n.getVenues,n.getEvents,n.getUserFavoriteEvents,n.deleteEvent,n.addToFavorites,n.removeFromFavorites,n.setNewType,n.setNewDate,n.setNewTime,n.setNewLocation,n.setNewPerformers,n.setNewPhoneNumber,n.onSubmitNewEvent,n.setNewContact,n.setVenueType,n.setNewName,n.setNewHours,n.setNewAddress,n.onSubmitNewVenue;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h1",{style:{fontFamily:"requema",fontSize:"3rem"},children:"Sport halls and places"}),(0,Je.jsx)(He,{to:"/Explore",children:(0,Je.jsxs)("div",{style:{position:"sticky",zIndex:"1000",top:"20px",marginRight:"20px",marginLeft:"85%"},className:"goBack",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black",padding:"3px",borderRadius:"90px",border:"4px solid black"},children:"arrow_back"})]})}),(0,Je.jsx)("div",{style:{marginBottom:"120px"}}),(0,Je.jsx)("div",{className:"venueCard-container",children:r.filter((function(e){return"Sports"===e.type})).map((function(e){return(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"card",style:{background:"lightblue",marginBottom:"40px"},children:[(0,Je.jsxs)("div",{className:"card__wrapper",children:[(0,Je.jsx)("div",{className:"card__back",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 24",height:"24",width:"14",children:(0,Je.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"3",stroke:"#000",d:"M12 2L2 12L12 22"})})}),(0,Je.jsx)("div",{className:"card__menu",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",width:"29",viewBox:"0 0 29 14",height:"14",fill:"none",children:(0,Je.jsx)("path",{fill:"#000",d:"m16.5714 9.16667h10.3572c.5493 0 1.0762.22827 1.4647.6346s.6067.95743.6067 1.53203c0 .5747-.2182 1.1258-.6067 1.5321s-.9154.6346-1.4647.6346h-10.3572c-.5493 0-1.0762-.2283-1.4647-.6346s-.6067-.9574-.6067-1.5321c0-.5746.2182-1.1257.6067-1.53203s.9154-.6346 1.4647-.6346zm-14.49997-8.66667h24.85717c.5493 0 1.0762.228273 1.4647.6346.3885.40633.6067.95743.6067 1.53207 0 .57463-.2182 1.12573-.6067 1.53206s-.9154.6346-1.4647.6346h-24.85717c-.54938 0-1.076254-.22827-1.464722-.6346s-.606708-.95743-.606708-1.53206c0-.57464.21824-1.12574.606708-1.53207.388468-.406327.915342-.6346 1.464722-.6346z"})})})]}),(0,Je.jsx)("h2",{style:{color:"black",textAlign:"center",paddingBottom:"15px",fontSize:"27px",fontFamily:"requema"},children:e.name}),(0,Je.jsx)("div",{className:"card__img",style:{background:"floralwhite"},children:(0,Je.jsx)("svg",{className:"football",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80 80",style:{marginLeft:"45px",marginTop:"10px"},children:(0,Je.jsxs)("g",{fill:"brown","fill-rule":"evenodd",children:[(0,Je.jsx)("path",{d:"M10.4711111 39.0044444c.04894-3.8343887.4176255-7.6580143 1.1022222-11.4311111L17.7777778 24.32c-.9652971 4.8356205-1.459461 9.753444-1.4755556 14.6844444h7.52v-3.8577777c.6036632-.3993489 1.2909413-.6547974 2.0088889-.7466667v3.5555556h5.3333333V34.4h1.9911112v3.5555556h5.3333333V34.4h2.0088889v3.5555556h5.3333333V34.4H47.84v3.5555556h5.1733333V34.4c.7179476.0918693 1.4052258.3473178 2.0088889.7466667v3.8577777h7.8222222c-.0156475-4.9310235-.5098156-9.8488902-1.4755555-14.6844444l6.1866667 3.2533333c.6839429 3.7731874 1.0526232 7.5967584 1.1022222 11.4311111h10.2933333C77.7422222 31.36 61.1377778 16 39.3955556 16 17.6533333 16 1.3688889 31.1466667 0 39.0044444h10.4711111z"}),(0,Je.jsx)("path",{d:"M68.7288889 40.7822222c-.078548 3.8418891-.4709654 7.6709317-1.1733333 11.4488889l-6.2222223 3.04c.9481791-4.7782102 1.4422316-9.6354013 1.4755556-14.5066667h-7.6977778V44.32c-.5981237.3973855-1.2791754.6527799-1.9911111.7466667v-3.5555556h-5.2444444v3.5555556h-1.9911112v-3.5555556h-5.3333333v3.5555556h-2.0266667v-3.5555556h-5.3333333v3.5555556h-2.0088889v-3.5555556h-5.3333333v3.5555556c-.7140552-.0507373-1.4071584-.2635321-2.0266667-.6222223v-3.5555555H16.32c.0341662 4.8350461.5222341 9.6562045 1.4577778 14.4l-6.2222222-3.04C10.8764915 48.469044 10.5078542 44.6399717 10.4533333 40.8H0c1.0311111 7.7688889 17.4933333 22.8444444 39.6266667 22.8444444 22.1333333 0 38.24-15.2533333 39.4133333-22.8622222H68.7288889z",opacity:".8"})]})})}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:["Working hours: ",e.hours]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:["Address: ",e.address]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:["Contact: ",e.contact]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"cta-buttons",children:(0,Je.jsx)("button",{className:"download-button",style:{border:"2px solid black"},onClick:function(){return function(e){var n=encodeURIComponent(e);t("/search?eventType=".concat(n))}(e.name)},children:"Search events in this venue"})})]})},e.id)}))})]})},YC=function(){var e=we(),t=MC(),n=(t.currentUser,t.logout,VC()),r=n.venues;n.deleteVenue,n.events,n.favoriteEvents,n.getVenues,n.getEvents,n.getUserFavoriteEvents,n.deleteEvent,n.addToFavorites,n.removeFromFavorites,n.setNewType,n.setNewDate,n.setNewTime,n.setNewLocation,n.setNewPerformers,n.setNewPhoneNumber,n.onSubmitNewEvent,n.setNewContact,n.setVenueType,n.setNewName,n.setNewHours,n.setNewAddress,n.onSubmitNewVenue;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h1",{style:{fontFamily:"requema",fontSize:"3rem"},children:"Restaurants and food places"}),(0,Je.jsx)(He,{to:"/Explore",children:(0,Je.jsxs)("div",{style:{position:"sticky",zIndex:"1000",top:"20px",marginRight:"20px",marginLeft:"80%"},className:"goBack",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black",padding:"3px",borderRadius:"90px",border:"4px solid black"},children:"arrow_back"})]})}),(0,Je.jsx)("div",{className:"venueCard-container",children:r.filter((function(e){return"Restaurant"===e.type})).map((function(t){var n;return(0,Je.jsxs)("div",{className:"",children:[(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{className:"card",style:{background:"plum",marginBottom:"40px"},children:[(0,Je.jsxs)("div",{className:"card__wrapper",children:[(0,Je.jsx)("div",{className:"card__back",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 24",height:"24",width:"14",children:(0,Je.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"3",stroke:"#fff",d:"M12 2L2 12L12 22"})})}),(0,Je.jsx)("div",{className:"card__menu",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",width:"29",viewBox:"0 0 29 14",height:"14",fill:"none",children:(0,Je.jsx)("path",{fill:"#fff",d:"m16.5714 9.16667h10.3572c.5493 0 1.0762.22827 1.4647.6346s.6067.95743.6067 1.53203c0 .5747-.2182 1.1258-.6067 1.5321s-.9154.6346-1.4647.6346h-10.3572c-.5493 0-1.0762-.2283-1.4647-.6346s-.6067-.9574-.6067-1.5321c0-.5746.2182-1.1257.6067-1.53203s.9154-.6346 1.4647-.6346zm-14.49997-8.66667h24.85717c.5493 0 1.0762.228273 1.4647.6346.3885.40633.6067.95743.6067 1.53207 0 .57463-.2182 1.12573-.6067 1.53206s-.9154.6346-1.4647.6346h-24.85717c-.54938 0-1.076254-.22827-1.464722-.6346s-.606708-.95743-.606708-1.53206c0-.57464.21824-1.12574.606708-1.53207.388468-.406327.915342-.6346 1.464722-.6346z"})})})]}),(0,Je.jsx)("h2",{style:{color:"lightgoldenrodyellow",textAlign:"center",paddingBottom:"15px",fontFamily:"requema"},children:t.name}),(0,Je.jsx)("div",{className:"card__img",style:{background:"lightgoldenrodyellow"},children:(0,Je.jsx)("svg",(n={xmlns:"http://www.w3.org/2000/svg"},et(n,"xmlns","http://www.w3.org/1999/xlink"),et(n,"viewBox","0 0 378 384"),et(n,"style",{marginTop:"21px"}),et(n,"children",(0,Je.jsxs)("g",{className:"food",children:[(0,Je.jsx)("circle",{className:"food-bg",cx:"189",cy:"192",r:"174"}),(0,Je.jsxs)("g",{id:"plate",children:[(0,Je.jsx)("path",{className:"plate",d:"M191.3,294c-14.5,0-28.5-3-41.6-8.9c-1.6-0.7-2.3-2.6-1.6-4.2c0.7-1.6,2.6-2.3,4.2-1.6\r c12.3,5.5,25.5,8.4,39,8.4c52.5,0,95.3-42.7,95.3-95.3c0-52.5-42.7-95.3-95.3-95.3c-1.8,0-3.3-1.4-3.3-3.2s1.3-3.2,3.1-3.2\r c0,0,0,0,0,0c56.3,0,101.9,45.6,101.9,101.6C293,248.4,247.4,294,191.3,294z"}),(0,Je.jsx)("path",{className:"plate",d:"M125.3,268.2c-0.7,0-1.5-0.2-2.1-0.8c-22.3-18.8-33.6-44.1-33.6-75.1c0-30.2,10.1-55.8,29.3-73.9\r c1.3-1.2,3.3-1.2,4.5,0.1c1.2,1.3,1.2,3.3-0.1,4.5C105.5,140,96,163.9,96,192.3c0,29.1,10.5,52.7,31.3,70.2\r c1.4,1.1,1.5,3.2,0.4,4.5C127.1,267.9,126.2,268.2,125.3,268.2z"}),(0,Je.jsx)("path",{className:"plate",d:"M191.3,260.7c-1.8,0-3.2-1.4-3.2-3.2s1.4-3.2,3.2-3.2c34.2,0,62-27.8,62-62s-27.8-62-62-62\r c-1.8,0-3.2-1.4-3.2-3.2c0-1.8,1.4-3.2,3.2-3.2c37.7,0,68.4,30.7,68.4,68.4C259.7,230.1,229,260.7,191.3,260.7z"})]}),(0,Je.jsxs)("g",{id:"utensils",children:[(0,Je.jsx)("path",{className:"utensils",d:"M142,280.3h-1.6c-4.2,0-7.6-3.4-7.6-7.6v-79.6h-0.9c-2.2,0-4.2-0.8-5.7-2.4c-1.5-1.5-2.4-3.6-2.3-5.7\r c0.2-36.9,3.4-99.3,22.1-103.4l3.9-0.9v192C149.6,276.9,146.2,280.3,142,280.3z M143.2,90.7c-7.7,10.3-12.9,46-13.1,94.3\r c0,0.4,0.2,0.9,0.5,1.2c0.3,0.3,0.7,0.5,1.2,0.5h7.3v86c0,0.7,0.6,1.2,1.2,1.2h1.6c0.7,0,1.2-0.6,1.2-1.2V90.7z"}),(0,Je.jsx)("path",{className:"utensils",d:"M172.1,280.3h-6.8c-1.8,0-3.2-1.4-3.2-3.2s1.4-3.2,3.2-3.2h5.2V134.6c0-2.7,2.2-4.8,4.8-4.8h1.9V89.3\r c0-1.8,1.4-3.2,3.2-3.2c1.8,0,3.2,1.4,3.2,3.2v42.1c0,2.7-2.2,4.8-4.8,4.8h-1.9v139.3C176.9,278.1,174.7,280.3,172.1,280.3z"}),(0,Je.jsx)("path",{className:"utensils",d:"M172.6,280.3h-6.8c-2.7,0-4.8-2.2-4.8-4.8V136.2h-1.9c-2.7,0-4.8-2.2-4.8-4.8V89.3c0-1.8,1.4-3.2,3.2-3.2\r s3.2,1.4,3.2,3.2v40.5h1.9c2.7,0,4.8,2.2,4.8,4.8v139.3h5.2c1.8,0,3.2,1.4,3.2,3.2S174.4,280.3,172.6,280.3z"}),(0,Je.jsx)("path",{className:"utensils",d:"M172.8,127.3c-1.4,0-2.6-1.1-2.6-2.6V86.5c0-1.4,1.1-2.6,2.6-2.6c1.4,0,2.6,1.1,2.6,2.6v38.3\r C175.4,126.2,174.2,127.3,172.8,127.3z"}),(0,Je.jsx)("path",{className:"utensils",d:"M165.3,127.3c-1.4,0-2.6-1.1-2.6-2.6V86.5c0-1.4,1.1-2.6,2.6-2.6c1.4,0,2.6,1.1,2.6,2.6v38.3\r C167.8,126.2,166.7,127.3,165.3,127.3z"})]})]})),n))}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Working hours: "}),t.hours]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Address: "}),t.address]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Contact: "}),t.contact]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"cta-buttons",children:(0,Je.jsx)("button",{className:"download-button",style:{border:"2px solid black"},onClick:function(){return function(t){var n=encodeURIComponent(t);e("/search?eventType=".concat(n))}(t.name)},children:"Search events in this venue"})})]})]},t.id)}))})]})},JC=function(){var e=MC(),t=(e.currentUser,e.logout,we()),n=VC(),r=n.venues;n.deleteVenue,n.events,n.favoriteEvents,n.getVenues,n.getEvents,n.getUserFavoriteEvents,n.deleteEvent,n.addToFavorites,n.removeFromFavorites,n.setNewType,n.setNewDate,n.setNewTime,n.setNewLocation,n.setNewPerformers,n.setNewPhoneNumber,n.onSubmitNewEvent,n.setNewContact,n.setVenueType,n.setNewName,n.setNewHours,n.setNewAddress,n.onSubmitNewVenue;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h1",{style:{fontFamily:"requema",fontSize:"3rem"},children:"Pubs n' bars"}),"        ",(0,Je.jsx)(He,{to:"/Explore",children:(0,Je.jsxs)("div",{style:{position:"sticky",zIndex:"1000",top:"20px",marginRight:"20px",marginLeft:"85%"},className:"goBack",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black",padding:"3px",borderRadius:"90px",border:"4px solid black"},children:"arrow_back"})]})}),(0,Je.jsx)("div",{className:"venueCard-container",children:r.filter((function(e){return"Pub and Bar"===e.type})).map((function(e){var n;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{className:"card",style:{background:"hsla(172, 95%, 18%, 1)",marginBottom:"40px"},children:[(0,Je.jsxs)("div",{className:"card__wrapper",children:[(0,Je.jsx)("div",{className:"card__back",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 24",height:"24",width:"14",children:(0,Je.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"3",stroke:"#fff",d:"M12 2L2 12L12 22"})})}),(0,Je.jsx)("div",{className:"card__menu",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",width:"29",viewBox:"0 0 29 14",height:"14",fill:"none",children:(0,Je.jsx)("path",{fill:"#fff",d:"m16.5714 9.16667h10.3572c.5493 0 1.0762.22827 1.4647.6346s.6067.95743.6067 1.53203c0 .5747-.2182 1.1258-.6067 1.5321s-.9154.6346-1.4647.6346h-10.3572c-.5493 0-1.0762-.2283-1.4647-.6346s-.6067-.9574-.6067-1.5321c0-.5746.2182-1.1257.6067-1.53203s.9154-.6346 1.4647-.6346zm-14.49997-8.66667h24.85717c.5493 0 1.0762.228273 1.4647.6346.3885.40633.6067.95743.6067 1.53207 0 .57463-.2182 1.12573-.6067 1.53206s-.9154.6346-1.4647.6346h-24.85717c-.54938 0-1.076254-.22827-1.464722-.6346s-.606708-.95743-.606708-1.53206c0-.57464.21824-1.12574.606708-1.53207.388468-.406327.915342-.6346 1.464722-.6346z"})})})]}),(0,Je.jsx)("h2",{style:{color:"lightgoldenrodyellow",textAlign:"center",paddingBottom:"15px",fontFamily:"requema"},children:e.name}),(0,Je.jsx)("div",{className:"card__img",style:{background:"lightgoldenrodyellow"},children:(0,Je.jsxs)("svg",(n={version:"1.1",id:"Ebene_1",xmlns:"http://www.w3.org/2000/svg"},et(n,"xmlns","http://www.w3.org/1999/xlink"),et(n,"x","0px"),et(n,"y","0px"),et(n,"width","100%"),et(n,"height","500px"),et(n,"viewBox","0 0 560 960"),et(n,"xml","preserve"),et(n,"style",{marginLeft:"-8px",marginTop:"15px"}),et(n,"children",[(0,Je.jsx)("path",{className:"beer",d:"M147,386.582c0,0,0.833,235.875,0.833,257.209S168.333,668,172.667,668s145.667,0,154.333,0s17-11,17-28\r s0-253,0-253L147,386.582z"}),(0,Je.jsx)("path",{className:"schaum",d:"M344,387l-132-0.418V422c0,0-2,16.75-20.75,16.75S171,428.25,171,423.5c0-5.25,0-36.5,0-36.5\r s-12.25-0.334-24-0.418c-19.625-2.457-23-25.332-3.625-38.832c-7.5-30.25,64.063-94.25,107.896-16.418\r c15.333-15.5,39.781-19,49.115,14.168c3.666-24.834,10.437-43.25,42.974-43.25c28.668,0,41.457,27.082,41.457,41.422\r C384.814,375,356.732,387,346.215,387H344z"}),(0,Je.jsx)("path",{className:"handle",d:"M348,597c0,0,27.75,0,53,0c14,0,20.5-16.5,20.5-25.5c0-4.25,0.355-99,0.355-113.75S407.75,437,399.25,437\r S348,437,348,437"}),(0,Je.jsx)("path",{className:"outline",d:"M147,385.481c0,0,0.833,235.875,0.833,257.209s20.5,24.209,24.834,24.209s145.667,0,154.333,0s17-11,17-28\r s0-48,0-48v-4v-201l-132-0.418v35.418c0,0-2,16.75-20.75,16.75s-20.25-10.5-20.25-15.25c0-5.25,0-36.5,0-36.5\r S158.75,385.565,147,385.481c-19.625-2.457-23-25.332-3.625-38.832c-7.5-30.25,64.063-94.25,107.896-16.418\r c15.332-15.5,39.78-19,49.114,14.168c3.666-24.834,10.437-43.25,42.974-43.25c28.668,0,41.457,27.082,41.457,41.422\r c-0.002,31.328-28.084,43.328-38.602,43.328"}),(0,Je.jsx)("line",{className:"lines",x1:"196",y1:"480",x2:"196",y2:"562"}),(0,Je.jsx)("line",{className:"lines",x1:"250",y1:"480",x2:"250",y2:"562"}),(0,Je.jsx)("line",{className:"lines",x1:"304",y1:"480",x2:"304",y2:"562"})]),n))}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Working hours: "}),e.hours]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Address: "}),e.address]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Contact: "}),e.contact]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"cta-buttons",children:(0,Je.jsx)("button",{className:"download-button",style:{border:"2px solid black"},onClick:function(){return function(e){var n=encodeURIComponent(e);t("/search?eventType=".concat(n))}(e.name)},children:"Search events in this venue"})})]})]},e.id)}))})]})},$C=function(){var e=MC(),t=(e.currentUser,e.logout,we()),n=VC(),r=n.venues;n.deleteVenue,n.setVenues,n.setEvents,n.setFavoriteEvents,n.setNewContact,n.setVenueType,n.setNewName,n.setNewHours,n.setNewAddress;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h1",{style:{fontFamily:"requema",fontSize:"3rem"},children:"Night clubs"}),(0,Je.jsx)(He,{to:"/Explore",children:(0,Je.jsxs)("div",{style:{position:"sticky",zIndex:"1000",top:"20px",marginRight:"20px",marginLeft:"85%"},className:"goBack",children:[(0,Je.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2rem",color:"black",padding:"3px",borderRadius:"90px",border:"4px solid black"},children:"arrow_back"})]})}),(0,Je.jsx)("div",{className:"venueCard-container",children:r.filter((function(e){return"Clubs"===e.type})).map((function(e){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{className:"card",style:{background:"darkred",marginBottom:"40px"},children:[(0,Je.jsxs)("div",{className:"card__wrapper",children:[(0,Je.jsx)("div",{className:"card__back",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 24",height:"24",width:"14",children:(0,Je.jsx)("path",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"3",stroke:"#000",d:"M12 2L2 12L12 22"})})}),(0,Je.jsx)("div",{className:"card__menu",children:(0,Je.jsx)("svg",{xlinkHref:"http://www.w3.org/2000/svg",width:"29",viewBox:"0 0 29 14",height:"14",fill:"none",children:(0,Je.jsx)("path",{fill:"#000",d:"m16.5714 9.16667h10.3572c.5493 0 1.0762.22827 1.4647.6346s.6067.95743.6067 1.53203c0 .5747-.2182 1.1258-.6067 1.5321s-.9154.6346-1.4647.6346h-10.3572c-.5493 0-1.0762-.2283-1.4647-.6346s-.6067-.9574-.6067-1.5321c0-.5746.2182-1.1257.6067-1.53203s.9154-.6346 1.4647-.6346zm-14.49997-8.66667h24.85717c.5493 0 1.0762.228273 1.4647.6346.3885.40633.6067.95743.6067 1.53207 0 .57463-.2182 1.12573-.6067 1.53206s-.9154.6346-1.4647.6346h-24.85717c-.54938 0-1.076254-.22827-1.464722-.6346s-.606708-.95743-.606708-1.53206c0-.57464.21824-1.12574.606708-1.53207.388468-.406327.915342-.6346 1.464722-.6346z"})})})]}),(0,Je.jsx)("h2",{style:{color:"gray",textAlign:"center",paddingBottom:"15px",fontSize:"27px",fontFamily:"requema"},children:e.name}),(0,Je.jsx)("div",{className:"card__img",children:(0,Je.jsxs)("svg",{xlinkHref:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,Je.jsx)("linearGradient",{y2:"14.26279",y1:"7.881249",x2:"18.333574",x1:"4.648317",gradientUnits:"userSpaceOnUse",id:"a"}),(0,Je.jsx)("path",{fill:"#303c42",d:"m23.8535156 1.6464844-1.5-1.5c-.1953125-.1953125-.5117188-.1953125-.7070312 0l-1.9173584 1.9173584c-.1885986-.098999-.4240723-.0759277-.5826416.0826416l-3.7880859 3.7880859c-1.9462891-.5317383-4.0078125.0078125-5.4482422 1.4477539l-9.0566406 9.0571289c-.5507813.5498047-.8535157 1.2817383-.8535157 2.0605469s.3027344 1.5107422.8535156 2.0605469l2.5859375 2.5859375c.5507813.5502929 1.2832031.8535156 2.0605469.8535156s1.5097656-.3032227 2.0605469-.8535156l9.0566406-9.0571289c1.4404297-1.4394531 1.9814453-3.5014648 1.4482422-5.4477539l3.7880859-3.7880859c.1585693-.1585693.1816406-.394043.0826416-.5826416l1.9173584-1.9173584c.1953125-.1953126.1953125-.5117188 0-.7070313z"}),(0,Je.jsx)("path",{transform:"matrix(.7071068 -.7071068 .7071068 .7071068 -8.470512 10.550131)",fill:"#9f614b",d:"m4.757184 11.757184h7.485388v7.485388h-7.485388z"}),(0,Je.jsx)("path",{fill:"#676f4b",d:"m6.8535156 22.4394531c-.7246094.7226562-1.9824219.7226562-2.7070312 0l-2.5859375-2.5859375c-.3613281-.3613281-.5605469-.8417968-.5605469-1.3535156s.1992188-.9921875.5605469-1.3535156l.9394531-.9394532 5.2929688 5.2929688z"}),(0,Je.jsx)("path",{fill:"#676f4b",d:"m17.1464844 8.1464844c-.1337891.1337891-.1806641.3320312-.1210938.5117188.5576172 1.6699219.1298828 3.4799805-1.1152344 4.7241211l-1.4103394 1.4104614-5.2929687-5.2929688 1.4103394-1.4104614c.8837891-.8833008 2.0527344-1.3549805 3.2548828-1.3549805.4902344 0 .9863281.0786133 1.4697266.2397461.1806641.0615234.3779297.0131836.5117188-.1206055l3.6464843-3.6464844 1.2929688 1.2929688z"}),(0,Je.jsx)("path",{opacity:".1",d:"m8.4998169 10.2068481-5.2928467 5.2930909.5092774.5092773 5.2767658-5.3091717z"}),(0,Je.jsx)("path",{opacity:".1",d:"m2.0605469 17.6650391.9394531-.9580079-.5-.5-.9394531.9394531c-.3613281.3613282-.5605469.8417969-.5605469 1.3535157s.1992188.9921875.5605469 1.3535156l.4143677.4143677c-.3024903-.3477783-.4749146-.7832642-.4749146-1.2493286 0-.5117188.1992188-.9921875.5605469-1.3535156z"}),(0,Je.jsx)("path",{opacity:".1",d:"m14.3720703 7.2529297c.4902344 0 .9863281.0786133 1.4697266.2397461.1806641.0615234.3779297.0131836.5117188-.1206055l3.6578121-3.6537108-.5113278-.5113283-3.6464844 3.6464844c-.1337891.1337891-.3310547.1821289-.5117188.1206055-.4833984-.1611328-.9794922-.2397461-1.4697266-.2397461-1.2021484 0-2.3710938.4716797-3.2548828 1.3549805l-1.4103393 1.4104614.5092773.5092773 1.401062-1.4011841c.8837892-.8833007 2.0527345-1.3549804 3.2548829-1.3549804z"}),(0,Je.jsxs)("g",{fill:"#fff",children:[(0,Je.jsx)("path",{transform:"matrix(.7025585 -.711626 .711626 .7025585 -9.489386 13.071864)",opacity:".2",d:"m7.148615 17.527449h7.487697v.720234h-7.487697z"}),(0,Je.jsx)("path",{opacity:".2",d:"m6.3550715 21.9159241c-.7246094.7226562-1.9824219.7226562-2.7070312 0l.5.5185547c.7246094.7226562 1.9824219.7226562 2.7070312 0l.9378973-.9344788-.5113282-.5113277z"}),(0,Je.jsx)("path",{opacity:".2",d:"m17.1480408 8.14151 3.6464844-3.6464849-.5125713-.5060406-3.633913 3.6339703c-.1337891.1337891-.1806641.3320312-.1210938.5117192.5576172 1.6699219.1298828 3.4799805-1.1152344 4.7241211l-1.4258442 1.420042.5155048.5089741 1.4103394-1.4104614c1.2451172-1.2441406 1.6728516-3.0541992 1.1152344-4.7241211-.0595704-.1796874-.0126954-.3779296.1210937-.5117187z"})]}),(0,Je.jsx)("path",{transform:"matrix(.7071068 -.7071068 .7071068 .7071068 4.654437 15.986806)",fill:"#fed4a3",d:"m20.533957 1.814287h2.182087v1.121427h-2.182087z"}),(0,Je.jsx)("path",{fill:"url(#a)",d:"m23.8535156 1.6464844-1.5-1.5c-.1953125-.1953125-.5117188-.1953125-.7070312 0l-1.9173584 1.9173584c-.1885986-.098999-.4240723-.0759277-.5826416.0826416l-3.7880859 3.7880859c-1.9462891-.5317383-4.0078125.0078125-5.4482422 1.4477539l-9.0566406 9.0571289c-.5507813.5498047-.8535157 1.2817383-.8535157 2.0605469s.3027344 1.5107422.8535156 2.0605469l2.5859375 2.5859375c.5507813.5502929 1.2832031.8535156 2.0605469.8535156s1.5097656-.3032227 2.0605469-.8535156l9.0566406-9.0571289c1.4404297-1.4394531 1.9814453-3.5014648 1.4482422-5.4477539l3.7880859-3.7880859c.1585693-.1585693.1816406-.394043.0826416-.5826416l1.9173584-1.9173584c.1953125-.1953126.1953125-.5117188 0-.7070313z"})]})}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Working hours: "}),e.hours]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Address: "}),e.address]}),(0,Je.jsxs)("p",{style:{marginBottom:"-20px",fontFamily:"fira",fontWeight:"bold"},children:[(0,Je.jsx)("span",{style:{color:"lightgoldenrodyellow"},children:"Contact: "}),e.contact]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"cta-buttons",children:(0,Je.jsx)("button",{className:"download-button",style:{border:"2px solid black"},onClick:function(){return function(e){var n=encodeURIComponent(e);t("/search?eventType=".concat(n))}(e.name)},children:"Search events in this venue"})})]})]},e.id)}))})]})},XC=function(){var e=VC(),t=e.events,n=e.setEvents,i=(e.favoriteEvents,e.setFavoriteEvents,e.getEvents,e.getUserFavoriteEvents,e.deleteEvent),a=e.addToFavorites,o=(e.removeFromFavorites,e.setNewType,e.setNewDate,e.setNewTime,e.setNewLocation,e.setNewPerformers,e.onSubmitNewEvent,MC()),s=o.currentUser,u=(o.logout,E((0,r.useState)(),2)),c=(u[0],u[1],ke()),l=new URLSearchParams(c.search).get("eventType"),f=dS(DC,"events"),h=function(){var e=it(Ze().mark((function e(){var t,r,i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!(l.length<2)){e.next=6;break}return n([]),e.abrupt("return");case 6:return e.next=8,VT(f);case 8:t=e.sent,r=t.docs.map((function(e){return e.data()})),i=r.filter((function(e){var t=e.eventType.toLowerCase(),n=l.toLowerCase();return t.includes(n)})),n(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Error fetching data:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h()}),[l]),(0,Je.jsx)("div",{children:t.length>0?(0,Je.jsx)("div",{className:"event-card-container",children:t.map((function(e){return(0,Je.jsxs)("div",{style:{border:"2px solid darkgreen",marginTop:"30px",padding:"10px",width:"320px",height:"500px"},className:"event-card",children:[(0,Je.jsx)("h1",{style:{color:"rgb(139,0,0)",textAlign:"center",fontWeight:"bolder",fontSize:"45px",fontFamily:"franchise",marginTop:"190px"},children:e.eventType}),(0,Je.jsxs)("h3",{style:{marginTop:"-20px"},className:"dateC",children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-8px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"calendar_month"})}),(0,Je.jsxs)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-23px"},children:[e.date," "]}),(0,Je.jsx)("br",{})]}),(0,Je.jsxs)("h3",{className:"timeC",children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"schedule"})}),(0,Je.jsx)("div",{className:"timeCdisplay",style:{marginLeft:"40px",fontSize:"24px",marginTop:"-45px"},children:e.time})]}),(0,Je.jsxs)("h2",{children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-6px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"location_on"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.location})]}),(0,Je.jsxs)("h2",{style:{display:"block"},children:[(0,Je.jsx)("div",{style:{display:"inline",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"music_note"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.performers})]}),(0,Je.jsxs)("h2",{style:{display:"",marginTop:"-10px"},children:[(0,Je.jsx)("div",{style:{display:"inline-block",marginTop:"-5px",position:"absolute"},children:(0,Je.jsx)("i",{className:"material-icons profile-icon",style:{fontSize:"2.3rem",color:"black"},children:"phone"})}),(0,Je.jsx)("div",{style:{marginLeft:"40px",fontSize:"24px",marginTop:"-17px"},children:e.pnumber})]}),s?(0,Je.jsxs)("div",{className:"heart-container",title:"Like",style:{marginTop:"25px"},children:[(0,Je.jsx)("input",{type:"checkbox",className:"checkbox",id:"Give-It-An-Id",onChange:function(){return a(e)}}),(0,Je.jsxs)("div",{className:"svg-container",children:[(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-outline",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Zm-3.585,18.4a2.973,2.973,0,0,1-3.83,0C4.947,16.006,2,11.87,2,8.967a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,11,8.967a1,1,0,0,0,2,0,4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,22,8.967C22,11.87,19.053,16.006,13.915,20.313Z"})}),(0,Je.jsx)("svg",{viewBox:"0 0 24 24",className:"svg-filled",xmlns:"http://www.w3.org/2000/svg",children:(0,Je.jsx)("path",{d:"M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Z"})}),(0,Je.jsx)("svg",{className:"svg-celebrate",width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg"})]})]}):(0,Je.jsx)(Je.Fragment,{children:" "}),s&&"artan.ebibi@live.com"===s.email?(0,Je.jsx)("button",{style:{background:"black",marginTop:"-46px",position:"absolute",marginLeft:"155px"},onClick:function(){return i(e.id,e.eventId)},children:"Delete event"}):(0,Je.jsx)(Je.Fragment,{children:" "})]})}))}):(0,Je.jsxs)("h1",{children:['No "',l,'" events']})})};var ZC=function(){return(0,Je.jsx)("div",{className:"App",children:(0,Je.jsx)(FC,{children:(0,Je.jsxs)(zC,{children:[(0,Je.jsx)($e,{}),(0,Je.jsxs)(Me,{children:[(0,Je.jsx)(Le,{path:"/",element:(0,Je.jsx)(Xe,{})}),(0,Je.jsx)(Le,{path:"/Explore",element:(0,Je.jsx)(BC,{})}),(0,Je.jsx)(Le,{path:"/Events",element:(0,Je.jsx)(qC,{})}),(0,Je.jsx)(Le,{path:"/SignUp",element:(0,Je.jsx)(GC,{})}),(0,Je.jsx)(Le,{path:"/LogIn",element:(0,Je.jsx)(KC,{})}),(0,Je.jsx)(Le,{path:"/Account",element:(0,Je.jsx)(WC,{})}),(0,Je.jsx)(Le,{path:"/CoffeeShop",element:(0,Je.jsx)(HC,{})}),(0,Je.jsx)(Le,{path:"/Sports",element:(0,Je.jsx)(QC,{})}),(0,Je.jsx)(Le,{path:"/Restaurant",element:(0,Je.jsx)(YC,{})}),(0,Je.jsx)(Le,{path:"/PubNbar",element:(0,Je.jsx)(JC,{})}),(0,Je.jsx)(Le,{path:"/Clubs",element:(0,Je.jsx)($C,{})}),(0,Je.jsx)(Le,{path:"/search",element:(0,Je.jsx)(XC,{})})]})]})})})},eN=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Je.jsx)(r.StrictMode,{children:(0,Je.jsx)(Ge,{children:(0,Je.jsx)(ZC,{})})})),eN()}()}();
//# sourceMappingURL=main.9fa7046b.js.map